/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2015 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/thirdparty/URI'],function(q,U){"use strict";(function(){var f=/sap-ui-xx-fesr=(true|x|X)/.test(location.search),t=/sap-ui-xx-e2e-trace=(true|x|X)/.test(location.search),I=f,R=v(),C=v().substr(-8,8)+R,H=new U(window.location).host(),a=sap.ui.Device.os.name+"_"+sap.ui.Device.os.version,b=sap.ui.Device.browser.name+"_"+sap.ui.Device.browser.version,e,T,F,p={component:"initial",trigger:"initial",event:"initial"},S=0,c,o,d,g,x=window.XMLHttpRequest.prototype.open,X=window.XMLHttpRequest.prototype.send,h=window.XMLHttpRequest.prototype.setRequestHeader;if(f){window.XMLHttpRequest.prototype.open=function(){x.apply(this,arguments);var s=new U(arguments[1]).host();if(!s||s===H){this.addEventListener("readystatechange",j);this.pendingInteraction=p;T=v();S++;if(d){this.setRequestHeader("SAP-Perf-FESRec",d);this.setRequestHeader("SAP-Perf-FESRec-opt",g);d=null;g=null;S=0;F=T;}else if(!F){F=T;}this.setRequestHeader("SAP-PASSPORT",u(e,R,T,p.component,p.trigger+"_"+p.event+"_"+S));}};window.XMLHttpRequest.prototype.send=function(){X.apply(this,arguments);if(this.pendingInteraction){this.pendingInteraction.bytesSent+=arguments[0]?arguments[0].length*2:0;}};window.XMLHttpRequest.prototype.setRequestHeader=function(s,V){h.apply(this,arguments);if(!this.requestHeaderLength){this.requestHeaderLength=0;}this.requestHeaderLength+=(s.length+V.length+3)*2;};}function j(){if(this.readyState===4&&this.pendingInteraction){var s=this.getResponseHeader("content-length"),i=this.getResponseHeader("content-encoding")==="gzip",w=this.getResponseHeader("sap-perf-fesrec");this.pendingInteraction.bytesReceived+=s?parseInt(s,10):0;this.pendingInteraction.bytesReceived+=this.getAllResponseHeaders().length*2;this.pendingInteraction.bytesSent+=this.requestHeaderLength;this.pendingInteraction.requestCompression=i&&(this.pendingInteraction.requestCompression!==false);this.pendingInteraction.networkTime+=w?Math.round(parseFloat(w,10)/1000):0;var y=this.getResponseHeader("sap-statistics");if(y){this.pendingInteraction.sapStatistics.push({url:this.responseURL,statistics:y});}delete this.requestHeaderLength;delete this.pendingInteraction;}}function k(i){return[m(R,32),m(F,32),m(i.navigation,4),m(i.roundtrip,4),m(i.duration,4),m(i.requests.length,2),m(C,40),m(i.networkTime,4),m(i.requestTime,4),m(a,20),m("SAP_UI5",10)].join(",");}function l(i){return[m(i.component,20),m(i.trigger+"_"+p.event,20),"",m(b,20),m(i.bytesSent,4),m(i.bytesReceived,4),"","",m(i.processing,4),i.requestCompression?"X":"","","","","","","","","",""].join(",");}function m(i,L){if(!i){i=i===0?"0":"";}else if(typeof i==="number"){i=Math.round(i).toString();}return i.substr(-L,L);}q.sap.interaction={};q.sap.interaction.setActive=function(A){I=f||A;};q.sap.interaction.getActive=function(A){return I;};q.sap.interaction.notifyStepStart=function(i,s){if(I){if(o||s){var w;if(s){w="startup";}else if(o.originalEvent){w=o.originalEvent.type;}else{w=o.type;}q.sap.measure.startInteraction(w,i);var y=q.sap.measure.getAllInteractionMeasurements();var z=y[y.length-1];var P=q.sap.measure.getPendingInteractionMeasurement();p=P?P:p;if(z&&z.requests.length>0){d=k(z);g=l(z);}o=null;}}};q.sap.interaction.notifyStepEnd=function(){if(I){if(c){q.sap.clearDelayedCall(c);}c=q.sap.delayedCall(1,q.sap.measure,"endInteraction");}};q.sap.interaction.notifyEventStart=function(E){o=I?E:null;};q.sap.interaction.notifyEventEnd=function(){if(o){if(o.type.match(/^(mousedown|touchstart|keydown)$/)){q.sap.measure.endInteraction(true);}}o=null;};q.sap.fesr={};q.sap.fesr.getCurrentTransactionId=function(){return T;};q.sap.fesr.getRootId=function(){return R;};q.sap.passport={};q.sap.passport.startTracing=function(){t=true;if(!f){x=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(){x.apply(this,arguments);var s=new U(arguments[1]).host();if(!s||s===H){T=v();this.setRequestHeader("SAP-PASSPORT",u(e,R,T));}};}};function n(s){var w=[];for(var i=0;i<s.length;++i){w.push(s.charCodeAt(i));}return w;}function r(s){var w="";for(var i=0;i<s.length;i++){var y=s[i].toString(16);y=Array(2-y.length+1).join("0")+y;w+=y;}return w;}function u(i,s,w,y,z){var A=[0x2A,0x54,0x48,0x2A,0x03,0x01,0x30,0x00,0x00,0x53,0x41,0x50,0x5F,0x45,0x32,0x45,0x5F,0x54,0x41,0x5F,0x50,0x6C,0x75,0x67,0x49,0x6E,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x00,0x00,0x53,0x41,0x50,0x5F,0x45,0x32,0x45,0x5F,0x54,0x41,0x5F,0x55,0x73,0x65,0x72,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x53,0x41,0x50,0x5F,0x45,0x32,0x45,0x5F,0x54,0x41,0x5F,0x52,0x65,0x71,0x75,0x65,0x73,0x74,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x00,0x05,0x53,0x41,0x50,0x5F,0x45,0x32,0x45,0x5F,0x54,0x41,0x5F,0x50,0x6C,0x75,0x67,0x49,0x6E,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x34,0x36,0x33,0x35,0x30,0x30,0x30,0x30,0x30,0x30,0x33,0x31,0x31,0x45,0x45,0x30,0x41,0x35,0x44,0x32,0x35,0x30,0x39,0x39,0x39,0x43,0x33,0x39,0x32,0x42,0x36,0x38,0x20,0x20,0x20,0x00,0x07,0x46,0x35,0x00,0x00,0x00,0x31,0x1E,0xE0,0xA5,0xD2,0x4E,0xDB,0xB2,0xE4,0x4B,0x68,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x00,0xE2,0x2A,0x54,0x48,0x2A,0x01,0x00,0x27,0x00,0x00,0x02,0x00,0x03,0x00,0x02,0x00,0x01,0x04,0x00,0x08,0x58,0x00,0x02,0x00,0x02,0x04,0x00,0x08,0x30,0x00,0x02,0x00,0x03,0x02,0x00,0x0B,0x00,0x00,0x00,0x00,0x2A,0x54,0x48,0x2A,0x01,0x00,0x23,0x01,0x00,0x01,0x00,0x01,0x00,0x02,0x00,0x01,0x03,0x00,0x17,0x00,0xAB,0xCD,0xEF,0xAB,0xCD,0xEF,0xAB,0xCD,0xEF,0xAB,0xCD,0xEF,0xAB,0xCD,0xEF,0x2A,0x54,0x48,0x2A];var B=[372,32];var D=[149,32];var E=[9,32];var P=[117,32];var G=[75,40];var J=[7,2];var K=n("SAP_E2E_TA_UI5LIB");K=K.concat(n(new Array(32+1-K.length).join(' ')));if(y){y=n(y.substr(-32,32));y=y.concat(n(new Array(32+1-y.length).join(' ')));A.splice.apply(A,E.concat(y));A.splice.apply(A,P.concat(y));}else{A.splice.apply(A,E.concat(K));A.splice.apply(A,P.concat(K));}A.splice.apply(A,D.concat(n(w)));A.splice.apply(A,J.concat(i));if(z){z=n(z.substr(-40,40));z=z.concat(n(new Array(40+1-z.length).join(' ')));A.splice.apply(A,G.concat(z));}var L=r(A).toUpperCase();return L.substring(0,B[0]).concat(s)+L.substring(B[0]+B[1]);}q.sap.passport.traceFlags=function(i){switch(i){case'low':e=[0x00,0x00];break;case'medium':e=[0x89,0x0A];break;case'high':e=[0x9F,0x0D];break;default:e=[];e.push((parseInt(i,16)&0xFF00)/256);e.push((parseInt(i,16)&0xFF));}return e;};function v(){var i=function(){var z=Math.floor(Math.random()*0x10000);return(new Array(4+1-z.toString(16).length)).join('0')+z.toString(16);};var s=function(){var z=(Math.floor(Math.random()*0x10000)&0x0fff)+0x4000;return(new Array(4+1-z.toString(16).length)).join('0')+z.toString(16);};var w=function(){var z=(Math.floor(Math.random()*0x10000)&0x3fff)+0x8000;return(new Array(4+1-z.toString(16).length)).join('0')+z.toString(16);};var y=(i()+i()+i()+s()+w()+i()+i()+i());return y.toUpperCase();}e=q.sap.passport.traceFlags();q.sap.interaction.notifyStepStart(null,true);if(t){q.sap.require("sap.ui.core.support.trace.E2eTraceLib");}}());return q;});
