/*
* Copyright 2015 Raj Nathani
* @license: MIT
* @author: Raj Nathani <me@relfor.co>
*/
!function(){"use strict";window.LAY={version:function(){return"0.16.8"},$pathName2level:{},$newlyInstalledStateLevelS:[],$newlyUninstalledStateLevelS:[],$newLevelS:[],$recalculateDirtyAttrValS:[],$renderDirtyPartS:[],$prevFrameTime:0,$newManyS:[],$isRendering:!1,$isNoTransition:!1,$isGpuAccelerated:void 0,$isBelowIE9:void 0,$numClog:0,$isSolving:!1,$isSolveRequiredOnRenderFinish:!1,$isOkayToEstimateWhitespaceHeight:!0,$naturalHeightDirtyPartS:[],$naturalWidthDirtyPartS:[],$relayoutDirtyManyS:[],$isDataTravellingShock:!1,$isDataTravelling:!1,$dataTravelDelta:0,$dataTravellingLevel:void 0,$dataTravellingAttrInitialVal:void 0,$dataTravellingAttrVal:void 0}}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var r;if(null===this)throw new TypeError('"" is null or not defined');var i=Object(this),a=i.length>>>0;if(0===a)return-1;var n=+e||0;if(Math.abs(n)===1/0&&(n=0),n>=a)return-1;for(r=Math.max(n>=0?n:a-Math.abs(n),0);a>r;){if(r in i&&i[r]===t)return r;r++}return-1}),function(){"use strict";function t(t){return-1===t.lastIndexOf(".onlyif")||t.startsWith("data.")||t.startsWith("row.")?"":t.slice(0,t.indexOf("."))}function e(t){return t.startsWith("when.")?t.slice(5,t.length-2):""}function r(t){return t.startsWith("transition.")?t.slice(11,t.indexOf(".",11)):""}function i(t){var e=t.indexOf(".");if(LAY.$checkIsValidUtils.propAttr(t)&&-1===["centerX","right","centerY","bottom"].indexOf(t))return!0;if(-1!==["formation","filter"].indexOf(t))return!0;if(-1!==e){var r=t.slice(0,e);return-1!==["when","transition","fargs","sort","$$num","$$max"].indexOf(r)}}function a(t){var e,r=t.attr2attrVal.$hovering,i=t.attr2attrVal.$clicking,n=t.childLevelS;if(r&&r.update(!1),i&&i.update(!1),n.length)for(var o=0,s=n.length;s>o;o++)e=n[o],e.part&&a(e)}LAY.AttrVal=function(e,r){this.level=r,this.val=void 0,this.prevVal=void 0,this.isTakeValReady=void 0,this.attr=e,this.isRecalculateRequired=!0,this.isRemoved=!1,this.calcVal=void 0,this.transCalcVal=void 0,this.startCalcVal=void 0,this.transition=void 0,this.isTransitionable=!1,this.isDeltaTransitionable=!1,this.isForceRecalculate=!1,this.onlyIfStateName=t(e),this.isStateProjectedAttr=i(e),this.isEventReadonlyAttr=LAY.$eventReadonlyUtils.checkIsEventReadonlyAttr(e),this.renderCall=r&&r.isPart&&LAY.$findRenderCall(e,r),this.takerAttrValS=[],this.eventReadonlyEventType2boundFnHandler={}},LAY.AttrVal.prototype.update=function(t){return this.val=t,LAY.identical(t,this.prevVal)?void 0:(this.prevVal instanceof LAY.Take&&this.takeNot(this.prevVal),this.isTakeValReady=!1,this.requestRecalculation(),!0)},LAY.AttrVal.prototype.requestRecalculation=function(){this.isRecalculateRequired=!0,this.level&&LAY.$arrayUtils.pushUnique(LAY.$recalculateDirtyAttrValS,this)},LAY.AttrVal.prototype.forceRecalculation=function(){this.isForceRecalculate=!0,this.requestRecalculation()},LAY.AttrVal.prototype.checkIsTransitionable=function(){return this.isTransitionable=!1,this.isDeltaTransitionable=!1,this.renderCall&&this.startCalcVal!==this.calcVal&&(this.isTransitionable=!0,"zIndex"!==this.attr&&("number"==typeof this.startCalcVal&&"number"==typeof this.calcVal||this.startCalcVal instanceof LAY.Color&&this.calcVal instanceof LAY.Color)&&(this.isDeltaTransitionable=!0)),this.renderCall&&this.startCalcVal!==this.calcVal&&("number"==typeof this.startCalcVal&&"number"==typeof this.calcVal||this.startCalcVal instanceof LAY.Color&&this.calcVal instanceof LAY.Color)&&"zIndex"!==this.attr},LAY.AttrVal.prototype.recalculate=function(){var t,i,n,o=!1,s=this.level,l=s.part,c=s.manyObj,h=this.attr;if("$"===h.charAt(0)&&LAY.$checkIfImmidiateReadonly(h)&&(this.val=l.getImmidiateReadonlyVal(h)),this.val instanceof LAY.Take){if(!this.isTakeValReady)return this.isTakeValReady=this.take(),!1;t=this.val.execute(this.level),(h.startsWith("data.")||h.startsWith("row."))&&(t=LAY.$clone(t)),LAY.identical(t,this.calcVal)||(o=!0,this.calcVal=t)}else(h.startsWith("data.")||h.startsWith("row."))&&(this.val=LAY.$clone(this.val)),LAY.identical(this.val,this.calcVal)||(o=!0,this.calcVal=this.val);if(this.isForceRecalculate&&(o=!0),"rows"===h&&(o=!0,s.attr2attrVal.filter.forceRecalculation()),o){var u=this.onlyIfStateName,d=e(h),p=r(h);for(this.prevVal=this.val,i=0,n=this.takerAttrValS.length;n>i;i++)this.takerAttrValS[i].requestRecalculation();if(LAY.$isDataTravellingShock&&l.addTravelRenderDirtyAttrVal(this),this.renderCall){switch(this.startCalcVal=this.transCalcVal,this.checkIsTransitionable(),LAY.$isDataTravellingShock||l.addNormalRenderDirtyAttrVal(this),h){case"display":var f=this.level.parentLevel;f&&(f.part.updateNaturalWidth(),f.part.updateNaturalHeight()),this.calcVal===!1&&a(s);break;case"input":("option"===l.inputType||"options"===l.inputType)&&s.attr2attrVal.$input.requestRecalculation();break;case"width":if(l.isText){var g=s.attr2attrVal.textWrap;g&&!g.isRecalculateRequired&&"nowrap"!==g.calcVal&&l.updateNaturalHeight()}else("image"===l.type||"video"===l.type)&&l.updateNaturalHeight();break;case"height":("image"===l.type||"video"===l.type)&&l.updateNaturalWidth();break;case"image":l.isImageLoaded=!1;break;case"video":l.isVideoLoaded=!1;break;case"audioController":l.updateNaturalHeight(),l.updateNaturalHeight();break;default:if(h.startsWith("videos"))l.isVideoLoaded=!1;else{var v=function(t){return"html"===t||t.startsWith("text")&&!t.startsWith("textShadows")&&-1===["textColor","textDecoration","textSmoothing","textShadows"].indexOf(t)};l.isText&&(v(h)?(l.updateNaturalWidth(),l.updateNaturalHeight()):"borderTopWidth"===h||"borderBottomWidth"===h?l.updateNaturalHeight():("borderLeftWidth"===h||"borderRightWidth"===h)&&(l.updateNaturalWidth(),l.updateNaturalHeight()))}}l.updateTransitionProp(h)}else if(""!==u)this.calcVal?LAY.$arrayUtils.pushUnique(s.stateS,u)&&(s.$updateStates(),LAY.$arrayUtils.remove(s.newlyUninstalledStateS,u),LAY.$arrayUtils.pushUnique(s.newlyInstalledStateS,u),LAY.$arrayUtils.pushUnique(LAY.$newlyInstalledStateLevelS,s)):LAY.$arrayUtils.remove(s.stateS,u)&&(s.$updateStates(),LAY.$arrayUtils.remove(s.newlyInstalledStateS,u),LAY.$arrayUtils.pushUnique(s.newlyUninstalledStateS,u),LAY.$arrayUtils.pushUnique(LAY.$newlyUninstalledStateLevelS,s));else if(""!==d)l.updateWhenEventType(d);else if(""!==p)l.updateTransitionProp(p);else if("exist"===h)s.$updateExistence();else if(c)if("rows"===h)c.updateRows();else if("filter"===h){if(!c.updateFilter())return!1;c.updateLayout()}else h.startsWith("sort.")?c.updateRows():(h.startsWith("fargs.")||"formation"===h)&&c.updateLayout();else switch(h){case"right":void 0!==s.parentLevel&&s.parentLevel.part.updateNaturalWidth();break;case"bottom":void 0!==s.parentLevel&&s.parentLevel.part.updateNaturalHeight();break;case"$naturalWidth":if(this.level.attr2attrVal.scrollX){var A=this;setTimeout(function(){A.level.attr2attrVal.scrollX.requestRecalculation(),LAY.$solve()})}break;case"$naturalHeight":if(this.level.attr2attrVal.scrollY){var A=this;setTimeout(function(){A.level.attr2attrVal.scrollY.requestRecalculation(),LAY.$solve()})}break;case"$input":l.updateNaturalWidth(),"line"===l.inputType&&l.isInitiallyRendered||l.updateNaturalHeight();break;case"css":this.calcVal&&LAY.$insertCSS(this.calcVal)}}return this.isForceRecalculate=!1,this.isRecalculateRequired=!1,!0},LAY.AttrVal.prototype.checkIfDeferenced=function(){return 0===this.takerAttrValS.length},LAY.AttrVal.prototype.give=function(t){if(LAY.$arrayUtils.pushUnique(this.takerAttrValS,t)&&1===this.takerAttrValS.length&&this.isEventReadonlyAttr){var e,r,i,a=LAY.$eventReadonlyUtils.getEventType2fnHandler(this.attr);i=this.level.part.node;for(e in a)LAY.$checkIsWindowEvent(e)&&"/"===this.level.pathName&&(i=window),r=a[e].bind(this.level),LAY.$eventUtils.add(i,e,r),this.eventReadonlyEventType2boundFnHandler[e]=r}},LAY.AttrVal.prototype.giveNot=function(t){if(LAY.$arrayUtils.remove(this.takerAttrValS,t)&&0===this.takerAttrValS.length&&this.isEventReadonlyAttr){var e,r,i,a=LAY.$eventReadonlyUtils.getEventType2fnHandler(this.attr);i=this.level.part.node;for(e in a)LAY.$checkIsWindowEvent(e)&&"/"===this.level.pathName&&(i=window),r=this.eventReadonlyEventType2boundFnHandler[e],LAY.$eventUtils.remove(i,e,r),this.eventReadonlyEventType2boundFnHandler[e]=void 0}},LAY.AttrVal.prototype.take=function(){if(this.val instanceof LAY.Take){var t,e,r,i,a,n;for(t=this.val._relPath00attr_S,a=0,n=t.length;n>a;a++){if(e=t[a][0],i=t[a][1],r=e.resolve(this.level),void 0===r)return!1;if(void 0===r.attr2attrVal[i])return r.$createLazyAttr(i),!1;if(r.attr2attrVal[i].isRecalculateRequired)return!1}for(a=0;n>a;a++)e=t[a][0],i=t[a][1],e.resolve(this.level).$getAttrVal(i).give(this)}return!0},LAY.AttrVal.prototype.takeNot=function(t){if(t instanceof LAY.Take){var e,r,i,a;e=t._relPath00attr_S;for(var n=0,o=e.length;o>n;n++)r=e[n][0],a=e[n][1],i=r.resolve(this.level),void 0!==i&&void 0!==i.$getAttrVal(a)&&i.$getAttrVal(a).giveNot(this)}},LAY.AttrVal.prototype.remove=function(){this.takeNot(this.val),this.isRemoved=!0,this.level.attr2attrVal[this.attr]=void 0}}(),function(){"use strict";function t(t,e,i){var a,n,o;if(t/=360,0===e)a=n=o=i;else{var s=.5>i?i*(1+e):i+e-i*e,l=2*i-s;a=r(l,s,t+1/3),n=r(l,s,t),o=r(l,s,t-1/3)}return{r:255*a,g:255*n,b:255*o}}function e(t,e,r){t/=255,e/=255,r/=255;var i,a,n=Math.max(t,e,r),o=Math.min(t,e,r),s=(n+o)/2;if(n==o)i=a=0;else{var l=n-o;switch(a=s>.5?l/(2-n-o):l/(n+o),n){case t:i=(e-r)/l+(r>e?6:0);break;case e:i=(r-t)/l+2;break;case r:i=(t-e)/l+4}i/=6}return{h:360*i,s:a,l:s}}function r(t,e,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?t+6*(e-t)*r:.5>r?e:2/3>r?t+(e-t)*(2/3-r)*6:t}var i=function(){var t=document.body.style.color;try{document.body.style.color="rgba(0,0,0,0)"}catch(e){}var r=document.body.style.color!==t;return document.body.style.color=t,r}();LAY.Color=function(t,e,r){this.format=t,this.r=e.r,this.g=e.g,this.b=e.b,this.h=e.h,this.s=e.s,this.l=e.l,this.a=r},LAY.Color.prototype.stringify=function(){var t,e;return i?"hsl"===this.format?(e=this.getHsl(),1===this.a?"hsl("+e.h+","+100*e.s+"%,"+100*e.l+"%)":"hsla("+e.h+","+100*e.s+"%,"+100*e.l+"%,"+this.a+")"):(t=this.getRgb(),1===this.a?"rgb("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+")":"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+this.a+")"):this.a<.1?"transparent":(t=this.getRgb(),"rgb("+t.r+","+t.g+","+t.b+")")},LAY.Color.prototype.copy=function(){return"rgb"===this.format?new LAY.Color("rgb",{r:this.r,g:this.g,b:this.b},this.a):new LAY.Color("hsl",{h:this.h,s:this.s,l:this.l},this.a)},LAY.Color.prototype.equals=function(t){return this.format===t.format&&this.a===t.a&&("rgb"===this.format&&this.r===t.r&&this.g===t.g&&this.b===t.b||"hsl"===this.format&&this.h===t.h&&this.s===t.s&&this.l===t.l)},LAY.Color.prototype.getRgb=function(){return"rgb"===this.format?{r:this.r,g:this.g,b:this.b}:t(this.r,this.g,this.b)},LAY.Color.prototype.getHsl=function(){return"hsl"===this.format?{h:this.h,s:this.s,l:this.l}:e(this.r,this.g,this.b)},LAY.Color.prototype.getRgba=function(){var t=this.getRgb();return t.a=this.a,t},LAY.Color.prototype.getHsla=function(){var t=this.getHsl();return t.a=this.a,t},LAY.Color.prototype.getRed=function(){return this.getRgb().r},LAY.Color.prototype.getGreen=function(){return this.getRgb().g},LAY.Color.prototype.getBlue=function(){return this.getRgb().b},LAY.Color.prototype.getHue=function(){return this.getHsl().h},LAY.Color.prototype.getSaturation=function(){return this.getHsl().s},LAY.Color.prototype.getLightness=function(){return this.getHsl().l},LAY.Color.prototype.getAlpha=function(){return this.a},LAY.Color.prototype.setRed=function(t){if("rgb"===this.format)this.r=t;else{var r=this.getRgb(),i=e(t,r.g,r.b);this.h=i.h,this.s=i.s,this.l=i.l}return this},LAY.Color.prototype.setGreen=function(t){if("rgb"===this.format)this.g=t;else{var r=this.getRgb(),i=e(r.r,t,r.b);this.h=i.h,this.s=i.s,this.l=i.l}return this},LAY.Color.prototype.setBlue=function(t){if("rgb"===this.format)this.b=t;else{var r=this.getRgb(),i=e(r.r,r.g,t);this.h=i.h,this.s=i.s,this.l=i.l}return this},LAY.Color.prototype.setHue=function(e){if("hsl"===this.format)this.h=e;else{var r=this.getHsl(),i=t(e,r.s,r.l);this.r=i.r,this.g=i.g,this.b=i.b}return this},LAY.Color.prototype.setSaturation=function(e){if("hsl"===this.format)this.s=e;else{var r=this.getHsl(),i=t(r.h,e,r.l);this.r=i.r,this.g=i.g,this.b=i.b}return this},LAY.Color.prototype.setLightness=function(e){if("hsl"===this.format)this.l=e;else{var r=this.getHsl(),i=t(r.h,r.s,e);this.r=i.r,this.g=i.g,this.b=i.b}return this},LAY.Color.prototype.setAlpha=function(t){return this.a=t,this},LAY.Color.prototype.darken=function(e){var r=this.getHsl();if(r.l=r.l-r.l*e,"hsl"===this.format)this.l=r.l;else{var i=t(r.h,r.s,r.l);this.r=i.r,this.g=i.g,this.b=i.b}return this},LAY.Color.prototype.lighten=function(e){var r=this.getHsl();if(r.l=r.l+r.l*e,"hsl"===this.format)this.l=r.l;else{var i=t(r.h,r.s,r.l);this.r=i.r,this.g=i.g,this.b=i.b}return this},LAY.Color.prototype.saturate=function(e){var r=this.getHsl();if(r.s=r.s+r.s*e,"hsl"===this.format)this.s=r.s;else{var i=t(r.h,r.s,r.l);this.r=i.r,this.g=i.g,this.b=i.b}return this},LAY.Color.prototype.desaturate=function(e){var r=this.getHsl();if(r.s=r.s-r.s*e,"hsl"===this.format)this.s=r.s;else{var i=t(r.h,r.s,r.l);this.r=i.r,this.g=i.g,this.b=i.b}return this},LAY.Color.prototype.transparentize=function(t){return this.a=this.a*t,this},LAY.Color.prototype.invert=function(){var t=this.getRgb();if(t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,"rgb"===this.format)this.r=t.r,this.g=t.g,this.b=t.b;else{var r=e(t.r,t.g,t.b);this.h=r.h,this.s=r.s,this.l=r.l}return this},LAY.Color.prototype.mix=function(t){var e=this.getRgb(),r=t.getRgb();return this.r=(e.r+r.r)/2,this.g=(e.g+r.g)/2,this.b=(e.b+r.b)/2,this.a=(this.a+t.a)/2,this}}(),function(){"use strict";function t(t,e,r,i){var a;for(a in e)void 0===e[a]&&i||(r[t+a]=e[a])}function e(t,e,r){for(var i=0,a=e.length;a>i;i++)r[t+"."+(i+1)]=e[i]}function r(r,i,a){var n=(r.props,r.when),o=r.transition,s=r.fargs;if(a){t("",r.props,i,!0);for(var l in o){var c=o[l],h="transition."+l+".";void 0!==c.type&&(i[h+"type"]=c.type),void 0!==c.duration&&(i[h+"duration"]=c.duration),void 0!==c.delay&&(i[h+"delay"]=c.delay),void 0!==c.done&&(i[h+"done"]=c.done),void 0!==c.args&&t(h+"args.",c.args,i,!1)}for(var u in n){var d=n[u];e("when."+u,d,i)}void 0!==r.$$num&&t("$$num.",r.$$num,i,!1),void 0!==r.$$max&&t("$$max.",r.$$max,i,!1)}else{if(i.formation=r.formation,i.filter=r.filter,s)for(var p in s)t("fargs."+p+".",s[p],i,!1);i["$$num.sort"]=r.sort.length;for(var f=0,g=r.sort.length;g>f;f++)t("sort."+(f+1)+".",r.sort[f],i,!1)}}LAY.Level=function(t,e,r,i,a,n,o){this.name=t,void 0===r?this.pathName="/":"/"===r.pathName?this.pathName="/"+t:this.pathName=r.pathName+"/"+t,this.lson=e,this.partLson=void 0,this.isGpu=!1,this.isInitialized=!1,this.parentLevel=r,this.attr2attrVal={},this.isPart=!0,this.isView=!1,this.isPage=!1,this.isHelper=i,this.isExist=!0,this.part=void 0,this.manyObj=void 0,this.derivedMany=a,this.id=o,this.rowDict=n,this.isInherited=!1,this.childLevelS=[],this.stateS=["root"],this.stringHashedStates2_cachedAttr2val_={},this.newlyInstalledStateS=[],this.newlyUninstalledStateS=[],LAY.$pathName2level[this.pathName]=this,LAY.$newLevelS.push(this),this.parentLevel&&this.parentLevel.childLevelS.push(this),void 0!==e.$extfonts&&LAY.$loadFonts(e.$extfonts)},LAY.Level.prototype.level=function(t,e){var r=new LAY.RelPath(t).resolve(this);return void 0===e?r:void 0!==r?r.attr(e):void 0},LAY.Level.prototype.parent=function(){return this.parentLevel},LAY.Level.prototype.children=function(){return this.childLevelS},LAY.Level.prototype.path=function(){return this.pathName},LAY.Level.prototype.node=function(){return this.isPart&&this.part.node},LAY.Level.prototype.attr=function(t){if(this.attr2attrVal[t])return this.attr2attrVal[t].calcVal;if("$"===t.charAt(0)){if(LAY.$checkIfDoingReadonly(t))return void LAY.$warning(t+" must be placed in $obdurate");if(LAY.$checkIfImmidiateReadonly(t))return this.part.getImmidiateReadonlyVal(t)}if(this.$createLazyAttr(t,!0)){var e=this.attr2attrVal[t];return e.give(LAY.$emptyAttrVal),LAY.$solve(),e.calcVal}},LAY.Level.prototype.data=function(t,e){this.$changeAttrVal("data."+t,e),LAY.$solve()},LAY.Level.prototype.row=function(t,e){this.derivedMany&&(this.derivedMany.id2row[this.id][t]=e,this.derivedMany.level.attr2attrVal.rows.requestRecalculation(),LAY.$solve())},LAY.Level.prototype.changeNativeInput=function(t){this.part.node.value=t},LAY.Level.prototype.changeNativeScrollX=function(t){this.part.node.scrollLeft=t},LAY.Level.prototype.changeNativeScrollY=function(t){this.part.node.scrollTop=t},LAY.Level.prototype.many=function(){return this.derivedMany&&this.derivedMany.level},LAY.Level.prototype.rowsLevels=function(t){return this.isPart?void 0:this.manyObj.rowsLevels(t)},LAY.Level.prototype.rowsCommit=function(t){this.isPart||this.manyObj.rowsCommit(t)},LAY.Level.prototype.rowsMore=function(t){this.isPart||this.manyObj.rowsMore(t)},LAY.Level.prototype.rowAdd=function(t){this.isPart||this.rowsMore([t])},LAY.Level.prototype.rowsUpdate=function(t,e,r){this.isPart||this.manyObj.rowsUpdate(t,e,r)},LAY.Level.prototype.rowsDelete=function(t){this.isPart||this.manyObj.rowsDelete(t)},LAY.Level.prototype.dataTravelBegin=function(t,e){var r;LAY.$isDataTravelling?console.error("LAY Warning: Existence of another unfinished data travel"):(r=this.attr2attrVal["data."+t],void 0===r&&console.error("LAY Warning: Inexistence of data key for data travel"),LAY.$isDataTravelling=!0,LAY.level("/").attr2attrVal.$dataTravelling.update(!0),LAY.$dataTravellingLevel=this,LAY.level("/").attr2attrVal.$dataTravelLevel.update(this),LAY.$dataTravellingAttrInitialVal=r.val,LAY.$dataTravellingAttrVal=r,LAY.$isDataTravellingShock=!0,r.update(e),LAY.$solve(),LAY.$isDataTravellingShock=!1)},LAY.Level.prototype.dataTravelContinue=function(t){LAY.$isDataTravelling?this!==LAY.$dataTravellingLevel?console.error("LAY Warning: Inexistence of a data travel for this Level"):LAY.$dataTravelDelta!==t&&(LAY.$dataTravelDelta=t,LAY.level("/").attr2attrVal.$dataTravelDelta.update(t),LAY.$render()):console.error("LAY Warning: Inexistence of a data travel")},LAY.Level.prototype.dataTravelArrive=function(t){LAY.$isDataTravelling?(LAY.$isDataTravelling=!1,LAY.level("/").attr2attrVal.$dataTravelling.update(!1),LAY.$dataTravellingLevel=void 0,LAY.level("/").attr2attrVal.$dataTravelLevel.update(null),LAY.$dataTravelDelta=0,LAY.level("/").attr2attrVal.$dataTravelDelta.update(0),LAY.$clearDataTravellingAttrVals(),t||(LAY.$dataTravellingAttrVal.update(LAY.$dataTravellingAttrInitialVal),LAY.$solve()),LAY.$render()):console.error("LAY Warning: Inexistence of a data travel")},LAY.Level.prototype.queryRows=function(){return this.isPart?void 0:this.manyObj.queryRows()},LAY.Level.prototype.queryFilter=function(){return this.isPart?void 0:this.manyObj.queryFilter()},LAY.Level.prototype.addChild=function(t,e){var r={};r[t]=e,this.addChildren(r)},LAY.Level.prototype.addChildren=function(t){for(var e in t){var r=t[e];LAY.$normalize(r),this.$addChild(e,t[e]),this.lson.children[e]=t[e]}LAY.$solve()},LAY.Level.prototype.remove=function(){"/"===this.pathName?LAY.$error("Attempt to remove root level '/' prohibited"):this.derivedMany?this.derivedMany.rowDeleteById(this.id):(this.$remove(),LAY.$solve())},LAY.Level.prototype.$remove=function(){var t=(this.childLevelS,this.attr2attrVal);for(var e in t)t[e].remove();this.isPart?this.part&&this.part.remove():this.manyObj&&this.manyObj.remove(),this.$removeDescendants(),LAY.$pathName2level[this.pathName]=void 0,LAY.$arrayUtils.remove(this.parentLevel.childLevelS,this)},LAY.Level.prototype.$removeDescendants=function(){for(var t=this.childLevelS;t.length;)t[0].$remove()},LAY.Level.prototype.$addChildren=function(t){if(void 0!==t)for(var e in t)this.$addChild(e,t[e])},LAY.Level.prototype.$addChild=function(t,e){var r,i;LAY.$checkIsValidUtils.levelName(t)||LAY.$error("Invalid Level Name: "+t),r=this.pathName+("/"===this.pathName?"":"/")+t,void 0!==LAY.$pathName2level[r]&&LAY.$error("Level already exists with path: "+r+" within Level: "+this.pathName),i=new LAY.Level(t,e,this,"_"===t.charAt(0))},LAY.Level.prototype.$inherit=function(){var t,e,r,i,a,n,o;if(void 0!==this.lson.$inherit){for(t={},e=this.lson.$inherit,r=0,i=e.length;i>r;r++)if(a=e[r],"string"==typeof a){if(a===this.pathName)return!1;if(n=new LAY.RelPath(a).resolve(this),void 0===n||!n.isInherited)return!1}for(r=0;i>r;r++)a=e[r],"string"==typeof a?(n=new LAY.RelPath(a).resolve(this),o=n.lson):(LAY.$normalize(a),o=a),LAY.$inherit(t,o);LAY.$inherit(t,this.lson),this.lson=t}return this.isInherited=!0,!0},LAY.Level.prototype.$reproduce=function(){this.isPart?(this.part=new LAY.Part(this),void 0!==this.lson.children&&this.$addChildren(this.lson.children)):this.manyObj=new LAY.Many(this,this.partLson)},LAY.Level.prototype.$identify=function(){this.isView=!!this.lson.$view,this.isPage=!!this.lson.$page,this.isPart=void 0===this.lson.many||this.derivedMany,"/"===this.pathName?this.isGpu=void 0===this.lson.$gpu?!0:this.lson.$gpu:this.isGpu=void 0===this.lson.$gpu?this.parentLevel.isGpu:this.lson.$gpu,this.isGpu=this.isGpu&&LAY.$isGpuAccelerated,this.isPart?this.derivedMany||LAY.$defaultizePartLson(this.lson,this.parentLevel):("/"===this.pathName&&LAY.$error("'many' prohibited for root level /"),this.partLson=this.lson,this.lson=this.lson.many,LAY.$defaultizeManyLson(this.lson))},LAY.Level.prototype.$updateExistence=function(){this.attr2attrVal.exist.calcVal?this.$appear():this.$disappear()},LAY.Level.prototype.$appear=function(){this.isExist=!0,this.$reproduce(),this.$initAllAttrs(),this.isPart&&this.part.add()},LAY.Level.prototype.$disappear=function(){this.isExist=!1;var t=this.attr2attrVal;for(var e in t)"exist"!==e&&t[e].remove();this.$removeDescendants(),this.isPart?this.part&&this.part.remove():this.manyObj&&this.manyObj.remove()},LAY.Level.prototype.$decideExistence=function(){this.isHelper||this.$createAttrVal("exist",void 0===this.lson.exist?!0:this.lson.exist)},LAY.Level.prototype.$initAllAttrs=function(){var t,e,r,i=this.lson.$obdurate?this.lson.$obdurate:[];if(this.isInitialized=!0,this.isPart&&(this.lson.states.root.props.scrollX&&i.push("$naturalWidth"),this.lson.states.root.props.scrollY&&i.push("$naturalHeight"),"input"===this.part.type&&"line"!==this.part.inputType&&i.push("$input")),i.length)for(e=0,r=i.length;r>e;e++)t=i[e],this.$createLazyAttr(t)||LAY.$error("Unknown $obdurate attr: '"+t+"'"),this.attr2attrVal[t].give(LAY.$emptyAttrVal);this.$initNonStateProjectedAttrs(),this.$updateStates()},LAY.Level.prototype.$initNonStateProjectedAttrs=function(){var e,r,i=this.lson.states,a=this.lson,n={};t("data.",a.data,n,!1);for(e in i)r=i[e],"root"!==e&&(n[e+".onlyif"]=r.onlyif,r.install&&(n[e+".install"]=r.install),r.uninstall&&(n[e+".uninstall"]=r.uninstall));a.css&&(n.css=a.css),this.isPart?(n.right=LAY.$essentialPosAttr2take.right,n.bottom=LAY.$essentialPosAttr2take.bottom,"/"===this.pathName?(n.$dataTravelling=!1,n.$dataTravelDelta=0,n.$dataTravelLevel=void 0,n.$absoluteLeft=0,n.$absoluteTop=0,n.$windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n.$windowHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight):this.derivedMany&&(t("row.",this.rowDict,n,!1),n.$i=0,n.$f=0)):(n.rows=a.rows,n.$id=a.$id,n.$$layout=null),this.$commitAttr2Val(n)},LAY.Level.prototype.$commitAttr2Val=function(t){var e,r,i;for(e in t)r=t[e],i=this.attr2attrVal[e],void 0===i&&(i=this.attr2attrVal[e]=new LAY.AttrVal(e,this)),i.update(r)},LAY.Level.prototype.$createAttrVal=function(t,e){(this.attr2attrVal[t]=new LAY.AttrVal(t,this)).update(e)},LAY.Level.prototype.$createLazyAttr=function(t,e){var r,i,a,n,o;if(LAY.$miscPosAttr2take[t])this.$createAttrVal(t,LAY.$miscPosAttr2take[t]);else if("$"===t.charAt(0))if(-1!==["$type","$load","$id","$inherit","$obdurate"].indexOf(t))this.$createAttrVal(t,this.lson[t]);else if("$path"===t)this.$createAttrVal("$path",this.pathName);else if(!e&&LAY.$checkIfImmidiateReadonly(t))this.$createAttrVal(t,null);else{if(!LAY.$checkIfDoingReadonly(t))return LAY.$warning("Incorrectly named readonly: "+t),!1;this.$createAttrVal(t,!1)}else if(-1===t.indexOf(".")){if(!this.isInitialized)return!1;var s=LAY.$getLazyPropVal(t,void 0===this.parentLevel,"input"===this.type&&"lines"===this.inputType);if(void 0===s)return!1;this.$createAttrVal(t,s),this.$getAttrVal(t).isStateProjectedAttr=!1}else{if(t.startsWith("data."))return!1;if(r=t.split("."),void 0===this.lson.states)return!1;if(o=r[0],!LAY.$checkIsValidUtils.stateName(o))return!1;if(i=this.lson.states[o],r.shift(),"when"===r[0])r[r.length-1]=parseInt(r[r.length-1])-1;else if(-1!==["fargs","sort","formation","filter","rows"].indexOf(r[0]));else if("transition"!==r[0]){if(void 0===i.props)return!1;i=i.props}for(a=0,n=r.length;n>a&&(i=i[r[a]],void 0!==i);a++);if(void 0===i)return!1;this.$createAttrVal(t,i)}return!0},LAY.Level.prototype.$undefineStateProjectedAttrs=function(){for(var t in this.attr2attrVal){var e=this.attr2attrVal[t];void 0!==e&&e.isStateProjectedAttr&&!t.isCreatedLazily&&e.update(void 0)}},LAY.Level.prototype.$getStateAttr2val=function(){var t={},e=this.derivedMany?this.derivedMany.levelStringHashedStates2_cachedAttr2val_:this.stringHashedStates2_cachedAttr2val_;this.$sortStates();var i=this.stateS.join("&");return void 0===e[i]&&(r(this.$generateSLSON(),t,this.isPart),e[i]=t),e[i]},LAY.Level.prototype.$sortStates=function(t){var e=this.stateS.sort();LAY.$arrayUtils.remove(e,"root"),e.unshift("root"),-1!==e.indexOf("formationDisplayNone")&&(LAY.$arrayUtils.remove(e,"formationDisplayNone"),e.push("formationDisplayNone"))},LAY.Level.prototype.$generateSLSON=function(){this.$sortStates();for(var t={},e=0,r=this.stateS.length;r>e;e++)LAY.$inherit(t,this.lson.states[this.stateS[e]],!0,!this.isPart,!0);return t},LAY.Level.prototype.$updateStates=function(){var t=this.attr2attrVal;this.$undefineStateProjectedAttrs(),this.$commitAttr2Val(this.$getStateAttr2val()),this.derivedMany&&!this.derivedMany.level.attr2attrVal.filter.isRecalculateRequired&&1!==t.$f.calcVal&&this.$setFormationXY(this.part.formationX,this.part.formationY)},LAY.Level.prototype.$getAttrVal=function(t){return this.attr2attrVal[t]},LAY.Level.prototype.$changeAttrVal=function(t,e){this.attr2attrVal[t]&&(this.attr2attrVal[t].update(e),LAY.$solve())},LAY.Level.prototype.$requestRecalculation=function(t){this.attr2attrVal[t]&&(this.attr2attrVal[t].requestRecalculation(),LAY.$solve())},LAY.Level.prototype.$setFormationXY=function(t,e){if(this.part.formationX=t,this.part.formationY=e,this.part){var r=this.attr2attrVal.top,i=this.attr2attrVal.left;void 0===t?i.update(this.derivedMany.defaultFormationX):i.update(t),void 0===e?r.update(this.derivedMany.defaultFormationY):r.update(e),r.requestRecalculation(),i.requestRecalculation()}}}(),function(){"use strict";function t(t){return t.length&&"object"!==LAY.$type(t[0])}function e(t,e){for(var r=[],i=0,a=t.length;a>i;i++)if("object"!==LAY.$type(t[i])){var n={content:t[i]};n[e]=i+1,r.push(n)}else r.push(t[i]);return r}function r(t,e,r){for(var i=0,a=0,n=t.length;n>a;a++)void 0!==t[a][e]&&i++;if(i>0)i!==t.length&&LAY.$error("Inconsistent id provision to rows of "+r.pathName);else if(t.length)return!0;return!1}function i(t,e){for(var r=0,i=t.length;i>r;r++)t[r][e]=r+1;for(var a=!1,r=0,i=t.length;i>r;r++)if(t[r][e]!==r+1){a=!0;break}if(a)for(var r=0,i=t.length;i>r;r++)t[r]=LAY.$clone(t[r]),t[r][e]=r+1;return t}/*! @source: http://stackoverflow.com/a/4760279 */
function a(t){var e=t.key,r=t.ascending?1:-1;return function(t,i){var a=t[e]<i[e]?-1:t[e]>i[e]?1:0;return a*r}}function n(t){return function(e,r){for(var i=0,n=0,o=t.length;0===n&&o>i;)n=a(t[i])(e,r),i++;return n}}LAY.Many=function(t,e){this.level=t,this.partLson=e,this.allLevelS=[],this.filteredLevelS=[],this.id2level={},this.id2row={},this.levelStringHashedStates2_cachedAttr2val_={},this.id=t.lson.$id||"id",this.isLoaded=!1,this.isAutoId=!1,this.isObjectified=!1,this.defaultFormationX=void 0,this.defaultFormationY=void 0,this.init()},LAY.Many.prototype.init=function(){var t=this.partLson.states||(this.partLson.states={});t.formationDisplayNone=LAY.$formationDisplayNoneState,LAY.$defaultizePartLson(this.partLson,this.level.parentLevel),LAY.$newManyS.push(this),this.defaultFormationX=this.partLson.states.root.props.left,this.defaultFormationY=this.partLson.states.root.props.top,this.partLson.exist&&LAY.$error("many derived levels cannot contain 'exist'")},LAY.Many.prototype.rowsLevels=function(t){if(t){for(var e=t.rowS,r=[],i=0,a=e.length;a>i;i++)r.push(this.id2row[e[i][this.id]]);return r}return this.allLevelS},LAY.Many.prototype.queryRows=function(){return new LAY.Query(LAY.$arrayUtils.cloneSingleLevel(this.level.attr2attrVal.rows.calcVal))},LAY.Many.prototype.queryFilter=function(){return new LAY.Query(LAY.$arrayUtils.cloneSingleLevel(this.level.attr2attrVal.filter.calcVal))},LAY.Many.prototype.rowsCommit=function(t){var e=this.level.attr2attrVal.rows;e.val=t||[],e.requestRecalculation(),LAY.$solve()},LAY.Many.prototype.rowsMore=function(t){for(var e=this.level.attr2attrVal.rows,r=e.calcVal,i=0;i<t.length;i++)r.push(t[i]);e.val=e.calcVal,e.requestRecalculation(),LAY.$solve()},LAY.Many.prototype.rowLevelById=function(t){return this.id2level[t]},LAY.Many.prototype.rowsUpdate=function(t,e,r){for(var i=this.level.attr2attrVal.rows,a=r instanceof LAY.Query?r.rowS:i.calcVal,n=0,o=a.length;o>n;n++){var s=this.id2row[a[n][this.id]];s&&(s[t]=e)}i.val=i.calcVal,i.requestRecalculation(),LAY.$solve()},LAY.Many.prototype.rowsDelete=function(t){for(var e=this.level.attr2attrVal.rows,r=e.calcVal,i=t instanceof LAY.Query?t.rowS:e.calcVal,a=0,n=i.length;n>a;a++){var o=this.id2row[i[a][this.id]];LAY.$arrayUtils.remove(r,o)}e.val=e.calcVal,e.requestRecalculation(),LAY.$solve()},LAY.Many.prototype.rowDeleteById=function(t){var e=this.level.attr2attrVal.rows,r=e.calcVal,i=this.id2row[t];i&&(LAY.$arrayUtils.remove(r,i),e.val=e.calcVal,e.requestRecalculation(),LAY.$solve())},LAY.Many.prototype.updateRows=function(){var a,n,o,s,l,c,h,u,d,p=this.level.attr2attrVal.rows.calcVal,f=(this.level.parentLevel,[]),g=[],v=this.id2level,A=this.id2row;if(p||(p=[]),this.isObjectified||t(p)){this.isObjectified=!0,p=e(p,this.id);var L=this.level.attr2attrVal.rows;L.calcVal=p}else if(this.isAutoId||r(p,this.id,this.level)){this.isAutoId=!0,p=i(p,this.id);var L=this.level.attr2attrVal.rows;L.calcVal=p}if(this.sort(p)){for(u=0,d=p.length;d>u;u++){if(a=p[u],n=a[this.id],A[n]=a,o=this.id2level[n]){if(o.isInitialized)for(s in a)l=a[s],c="row."+s,h=o.attr2attrVal[c],h?h.update(l):o.$createAttrVal(c,l)}else o=new LAY.Level(this.level.name+":"+n,this.partLson,this.level.parentLevel,!1,this,a,n),v[n]=o,A[n]=a,g.push(o);f.push(o)}for(n in v)o=v[n],o&&-1===f.indexOf(o)&&(o.$remove(),this.id2row[n]=void 0,this.id2level[n]=void 0);this.allLevelS=f}},LAY.Many.prototype.updateFilter=function(){for(var t,e,r=this.allLevelS,i=this.level.attr2attrVal.filter.calcVal||[],a=[],n=1,o=0,s=r.length;s>o;o++){if(e=r[o],!e.isInitialized)return!1;e.attr2attrVal.$i.update(o+1),e.attr2attrVal.$f.update(-1)}for(var l=this.id,o=0,s=i.length;s>o;o++)t=this.id2level[i[o][l]],t&&(a.push(t),t.attr2attrVal.$f.update(n++));return this.filteredLevelS=a,!0},LAY.Many.prototype.updateLayout=function(){LAY.$arrayUtils.pushUnique(LAY.$relayoutDirtyManyS,this)},LAY.Many.prototype.relayout=function(){var t,e=this.filteredLevelS,r=e[0],i=this.level.attr2attrVal,a=i.formation.calcVal,n=LAY.$formation2fargs[a],o={};for(var s in n)t=i["fargs."+a+"."+s],o[s]=t?t.calcVal:n[s];var l=LAY.$formation2fn[a];r&&r.$setFormationXY(void 0,void 0);for(var c,h,u=1,d=e.length;d>u;u++)c=e[u],h=l(u+1,c,e,o),c.$setFormationXY(h[0],h[1])},LAY.Many.prototype.sort=function(t){var e=this.level.attr2attrVal,r=e["$$num.sort"]?e["$$num.sort"].calcVal:0,i=[];if(r>0){for(var a=0;r>a;a++){var o="sort."+(a+1)+".",s=e[o+"key"],l=e[o+"ascending"];if(s.isRecalculateRequired||l.isRecalculateRequired)return!1;i.push({key:s.calcVal,ascending:l.calcVal})}t.sort(n(i))}return!0},LAY.Many.prototype.remove=function(){for(var t=this.allLevelS,e=0,r=t.length;r>e;e++)t[e].$remove();this.allLevelS=[],this.filteredLevelS=[],this.id2level={},this.id2row={}}}(),function(){"use strict";function t(t){return t+"px"}function e(t,e){LAY.$isBelowIE9?t.innerText=e:t.textContent=e}function r(t){for(var e,r="",i=0,a=t.length;a>i;i++)e=t[i],r+="<option value='"+e.value+"'"+(e.selected?" selected='true'":"")+(e.disabled?" disabled='true'":"")+">"+e.content+"</option>";return r}function i(t){return t.startsWith("input:")&&t.slice("input:".length)}function a(t){var e=t.attr2attrVal.display;return!e||e.calcVal}function n(t){return-1!==t.indexOf("<")&&-1!==t.indexOf(">")}function o(t,e){return void 0===t?e:"number"==typeof t?t+"px":t}function s(e,r){return 0===e?"normal":t(e,r)}function l(t,e){return void 0===t?e:"number"==typeof t?t+"em":t}function c(t,e){return o(t&&t.transCalcVal,e)}function h(t,e){return s(t&&t.transCalcVal,e)}function u(t,e){return l(t&&t.transCalcVal,e)}function d(t,e){var r=t&&t.transCalcVal;return void 0===r?e:r instanceof LAY.Color?r.stringify():r}var p,f,g,v,A,L,y,b,m,x,Y,$,k,w=240;p=window.getComputedStyle?Array.prototype.slice.call(window.getComputedStyle(document.body,null)).join("").match(/(-moz-|-webkit-|-ms-)/)[1]:"-ms-",LAY.$isBelowIE9=/MSIE\s/.test(navigator.userAgent)&&parseFloat(navigator.appVersion.split("MSIE")[1])<10,f=document.body.style,f[p+"transform"]="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)",window.getComputedStyle?LAY.$isGpuAccelerated=Boolean(window.getComputedStyle(document.body,null).getPropertyValue(p+"transform"))&&!LAY.$isBelowIE9:LAY.$isGpuAccelerated=!1,f=void 0,g="position:absolute;display:block;visibility:inherit;margin:0;padding:0;backface-visibility:hidden;contain:style;-webkit-backface-visibility: hidden;box-sizing:border-box;-moz-box-sizing:border-box;transform-style:preserve-3d;-webkit-transform-style:preserve-3d;-webkit-overflow-scrolling:touch;white-space:nowrap;outline:none;border:none;",v=g+"font-size:15px;font-family:sans-serif;color:black;text-decoration:none;text-align:left;direction:ltr;line-height:1.3em;-webkit-font-smoothing:antialiased;",A="left:-9999px;top:-9999px;visibility:hidden;",L=v+A+"height:auto;border:0px solid transparent;word-wrap:normal;",y={lines:"textarea",option:"select",options:"select"},b={none:"div",text:"div",html:"div",iframe:"iframe",canvas:"canvas",image:"img",video:"video",audio:"audio"},Y=["line","lines","password","option","options","file","files"];var V=document.createElement("audio");V.controls=!0,document.body.appendChild(V),$=V.offsetWidth,k=V.offsetHeight,document.body.removeChild(V),V=void 0,m=document.createElement("div"),m.style.cssText=L,document.body.appendChild(m),x=document.createElement("img"),x.style.cssText=g+A,document.body.appendChild(x),LAY.Part=function(t){this.level=t,this.node=void 0,this.type=void 0,this.inputType=void 0,this.isText=void 0,this.isInitiallyRendered=!1,this.normalRenderDirtyAttrValS=[],this.travelRenderDirtyAttrValS=[],this.whenEventType2fnMainHandler={},this.isImageLoaded=!1,this.isVideoLoaded=!1,this.isWrappedLink=!1,this.actingNode=void 0,this.formationX=void 0,this.formationY=void 0,this.init()},LAY.Part.prototype.init=function(){var t,e;if(e=this.inputType=i(this.level.lson.$type),this.type=this.inputType?"input":this.level.lson.$type,e&&-1===Y.indexOf(e)&&LAY.$error("Unsupported $type: input:"+e),"/"===this.level.pathName)this.node=document.body;else if(this.inputType)t=y[this.inputType],t?(this.node=document.createElement(t),"options"===e&&(this.node.multiple=!0)):(this.node=document.createElement("input"),this.node.type="line"===this.inputType?"text":"files"===this.inputType?"file":this.inputType,"password"===e?this.inputType="line":"files"===e&&(this.node.multiple=!0));else{var r=b[this.type];void 0!==this.level.lson.states.root.props.link?(this.node=document.createElement("a"),"div"!==r&&(this.isWrappedLink=!0,this.actingNode=document.createElement(r),this.actingNode.style.cssText=g,this.node.appendChild(this.actingNode))):this.node=document.createElement(r)}if(this.isWrappedLink||(this.actingNode=this.node),this.isText="input"===this.type||"text"===this.type||"html"===this.type,this.isText?this.node.style.cssText=v:this.node.style.cssText=g,"input"===this.type&&"lines"===this.inputType&&(this.node.style.whiteSpace="pre-wrap",this.node.style.resize="none"),"image"===this.type){var a=this;LAY.$eventUtils.add(this.actingNode,"load",function(){a.isImageLoaded=!0,a.updateNaturalWidth(),a.updateNaturalHeight(),LAY.$isNoTransition=!0,LAY.$solve()})}else if("video"===this.type){var a=this;LAY.$eventUtils.add(this.actingNode,"loadedmetadata",function(){a.isVideoLoaded=!0,a.updateNaturalWidth(),a.updateNaturalHeight(),LAY.$isNoTransition=!0,LAY.$solve()})}},LAY.Part.prototype.remove=function(){if("/"!==this.level.pathName){var t=this.level.parentLevel.part;t.updateNaturalWidth(),t.updateNaturalHeight(),this.node.parentNode===t.node&&t.node.removeChild(this.node),LAY.$arrayUtils.remove(LAY.$naturalWidthDirtyPartS,this),LAY.$arrayUtils.remove(LAY.$naturalHeightDirtyPartS,this),LAY.$arrayUtils.remove(LAY.$renderDirtyPartS,this)}},LAY.Part.prototype.add=function(){if("/"!==this.level.pathName){var t=this.level.parentLevel.part;t.updateNaturalWidth(),t.updateNaturalHeight(),this.level.parentLevel.part.node.appendChild(this.node)}},LAY.Part.prototype.findChildMaxOfAttr=function(t){for(var e,r,i=0,n=0,o=this.level.childLevelS,s=o.length;s>n;n++)e=o[n],e.isPart&&!e.isHelper&&e.isExist&&a(e)&&(r=e.attr2attrVal[t],void 0!==r&&r.calcVal&&r.calcVal>i&&(i=r.calcVal));return i},LAY.Part.prototype.getImmidiateReadonlyVal=function(t){switch(t){case"$naturalWidth":return this.calculateNaturalWidth();case"$naturalHeight":return this.calculateNaturalHeight();case"$scrolledX":return this.node.scrollLeft;case"$scrolledY":return this.node.scrollTop;case"$focused":return this.node===document.activeElement;case"$hash":return document.location.hash.substr(1);case"$pathname":return document.location.pathname;case"$href":return document.location.href;case"$host":return document.location.host;case"$input":if(this.inputType.startsWith("option")){for(var e=this.isInitiallyRendered?this.node.options:this.level.attr2attrVal.input.calcVal||[],r=[],i=0,a=e.length;a>i;i++)e[i].selected&&r.push(e[i].value);return e.length&&!r.length&&"option"===this.inputType&&r.push(e[0].value),"option"===this.inputType?r[0]:r}return this.inputType.startsWith("file")?"file"===this.inputType?this.node.files[0]:this.node.files:this.node.value}},LAY.Part.prototype.updateNaturalWidth=function(){var t=this.level.$getAttrVal("$naturalWidth");t&&LAY.$arrayUtils.pushUnique(LAY.$naturalWidthDirtyPartS,this)},LAY.Part.prototype.updateNaturalHeight=function(){var t=this.level.$getAttrVal("$naturalHeight");t&&LAY.$arrayUtils.pushUnique(LAY.$naturalHeightDirtyPartS,this)},LAY.Part.prototype.calculateNaturalWidth=function(){this.level.attr2attrVal;return this.isText?this.calculateTextNaturalDimesion(!0):"image"===this.type?this.calculateImageNaturalDimesion(!0):"video"===this.type?this.calculateVideoNaturalDimesion(!0):"audio"===this.type?this.calculateTextNaturalDimesion(!0):this.findChildMaxOfAttr("right")},LAY.Part.prototype.calculateNaturalHeight=function(){this.level.attr2attrVal;return this.isText?this.calculateTextNaturalDimesion(!1):"image"===this.type?this.calculateImageNaturalDimesion(!1):"video"===this.type?this.calculateVideoNaturalDimesion(!1):"audio"===this.type?this.calculateTextNaturalDimesion(!1):this.findChildMaxOfAttr("bottom")},LAY.Part.prototype.calculateImageNaturalDimesion=function(t){if(this.isImageLoaded){x.src=this.level.attr2attrVal.image.calcVal,x.style.width="auto",x.style.height="auto";var e=t?"height":"width",r=this.level.attr2attrVal[e],i=r&&void 0!==r.calcVal?r.calcVal:void 0;return t?"number"!=typeof i||0===i?x.width:x.width*(i/x.height):"number"!=typeof i||0===i?x.height:x.height*(i/x.width)}return 0},LAY.Part.prototype.calculateVideoNaturalDimesion=function(t){if(this.isVideoLoaded){var e=this.actingNode;e.style.visibility="hidden";var r=t?"height":"width",i=this.level.attr2attrVal[r],a=i&&void 0!==i.calcVal?i.calcVal:"auto";return e.height="auto",e.width="auto",t?(e.height=a,e.style.visibility="visible",e.offsetWidth):(e.width=a,e.style.visibility="visible",e.videoHeight)}return 0},LAY.Part.prototype.calculateAudioNaturalDimesion=function(t){var e=this.level.attr2attrVal.audioController&&this.level.attr2attrVal.audioController.calcVal;return t?e?$:0:e?k:0},LAY.Part.prototype.estimateTextNaturalHeight=function(t){if(-1!==["file","files"].indexOf(this.type)||"html"===this.type&&n(t))return-1;var e={textSize:15,textWrap:"nowrap",textPaddingTop:0,textPaddingBottom:0,borderTopWidth:0,borderBottomWidth:0,textLineHeight:1.3,textLetterSpacing:1,textWordSpacing:1,width:null},r={};for(var i in e){var a=this.level.attr2attrVal[i];r[i]=void 0===a||void 0===a.calcVal?e[i]:a.calcVal}""===t&&(r.textSize=0);var o=!1;return"nowrap"===r.textWrap?o=!0:!LAY.$isOkayToEstimateWhitespaceHeight||"normal"!==r.textWrap&&-1!==t.indexOf("\\")||1!==r.textLetterSpacing||1!==r.textWordSpacing||null===r.width||(0===r.textSize||t.length<.7*(r.width/r.textSize))&&(o=!0),o?r.textSize*r.textLineHeight+r.textPaddingTop+r.textPaddingBottom+r.borderTopWidth+r.borderBottomWidth:-1},LAY.Part.prototype.calculateTextNaturalDimesion=function(i){var a,n,c,h,u={textSize:o,textFamily:null,textWeight:null,textAlign:null,textStyle:null,textDirection:null,textTransform:null,textVariant:null,textLetterSpacing:s,textWordSpacing:s,textLineHeight:l,textOverflow:null,textIndent:t,textWrap:null,textWordBreak:null,textWordWrap:null,textRendering:null,textPaddingTop:t,textPaddingRight:t,textPaddingBottom:t,textPaddingLeft:t,borderTopWidth:t,borderRightWidth:t,borderBottomWidth:t,borderLeftWidth:t},d={textSize:"font-size",textFamily:"font-family",textWeight:"font-weight",textAlign:"text-align",textStyle:"font-style",textDirection:"direction",textTransform:"text-transform",textVariant:"font-variant",textLetterSpacing:"letter-spacing",textWordSpacing:"word-spacing",textLineHeight:"line-height",textOverflow:"text-overflow",textIndent:"text-indent",textWrap:"white-space",textWordBreak:"word-break",textWordWrap:"word-wrap",textRendering:"text-rendering",textPaddingTop:"padding-top",textPaddingRight:"padding-right",textPaddingBottom:"padding-bottom",textPaddingLeft:"padding-left",borderTopWidth:"border-top-width",borderRightWidth:"border-right-width",borderBottomWidth:"border-bottom-width",borderLeftWidth:"border-left-width"},p=this.level.attr2attrVal,f=L,g="input"===this.type&&"lines"===this.inputType,v=m;if(g&&(f+="white-space:pre-wrap;word-wrap:break-word;"),"input"===this.type)if(this.inputType.startsWith("option")){if(p.input.isRecalculateRequired)return 0;h="<select"+("multiple"===this.inputType?" multiple='true' ":"")+">"+r(p.input.calcVal)+"</select>"}else if(this.inputType.startsWith("file")){if(i)return w;h="<input type='file' "+("multiple"===this.inputType?" multiple='true' ":"")+"/>"}else h="line"===this.inputType?p.$input?p.$input.calcVal||"a":"a":p.$input.calcVal;else if("html"===this.type){if(p.html.isRecalculateRequired)return 0;h=p.html.calcVal}else{if(p.text.isRecalculateRequired)return 0;h=p.text.calcVal}if("string"!=typeof h&&(h=h.toString()),!i&&!g){var A=this.estimateTextNaturalHeight(h);if(-1!==A)return A}for(a in u)c=p[a],c&&void 0!==c.calcVal&&(n=u[a],f+=d[a]+":"+(null===n?c.calcVal:n(c.calcVal))+";");return g&&(h+="\r\n"),f+=i?"display:inline;width:auto;":"width:"+(p.width.calcVal||0)+"px;",v.style.cssText=f,"html"===this.type?v.innerHTML=h:e(m,h),i?v.offsetWidth:v.offsetHeight},LAY.Part.prototype.addNormalRenderDirtyAttrVal=function(t){LAY.$arrayUtils.remove(this.travelRenderDirtyAttrValS,t),LAY.$arrayUtils.pushUnique(this.normalRenderDirtyAttrValS,t),LAY.$arrayUtils.pushUnique(LAY.$renderDirtyPartS,this)},LAY.Part.prototype.addTravelRenderDirtyAttrVal=function(t){LAY.$arrayUtils.remove(this.normalRenderDirtyAttrValS,t),LAY.$arrayUtils.pushUnique(this.travelRenderDirtyAttrValS,t),LAY.$arrayUtils.pushUnique(LAY.$renderDirtyPartS,this)},LAY.Part.prototype.updateWhenEventType=function(t){var e,r=this.level.attr2attrVal["$$num.when."+t].val,i=this.level,a=this.node;LAY.$checkIsWindowEvent(t)&&"/"===this.level.pathName&&(a=window),void 0!==this.whenEventType2fnMainHandler[t]&&LAY.$eventUtils.remove(a,t,this.whenEventType2fnMainHandler[t]),0!==r?(e=function(e){var a,n;for(a=0;r>a;a++)n=i.attr2attrVal["when."+t+"."+(a+1)],void 0!==n&&n.calcVal.call(i,e)},LAY.$eventUtils.add(a,t,e),this.whenEventType2fnMainHandler[t]=e):this.whenEventType2fnMainHandler[t]=void 0},LAY.Part.prototype.checkIsPropInTransition=function(t){return void 0!==this.level.attr2attrVal["transition."+t+".type"]||void 0!==this.level.attr2attrVal["transition."+t+".delay"]},LAY.Part.prototype.updateTransitionProp=function(t){if(this.isInitiallyRendered&&!LAY.$isNoTransition){var e,r,i,a,n,o,s,l,c,h,u,d=this.level.attr2attrVal,p={};if(-1!==["centerX","right","centerY","bottom"].indexOf(t))return;if(!this.checkIsPropInTransition(t)){if(!this.checkIsPropInTransition("all"))return;u=t,t="all"}for(i="transition."+t+".",a=d[i+"type"]?d[i+"type"].calcVal:"linear",n=d[i+"duration"]?d[i+"duration"].calcVal:0,o=d[i+"delay"]?d[i+"delay"].calcVal:0,s=d[i+"done"]?d[i+"done"].calcVal:void 0,l=LAY.$transitionType2args[a]?LAY.$transitionType2args[a]:[],c=0,h=l.length;h>c;c++)p[l[c]]=d[i+"args."+l[c]]?d[i+"args."+l[c]].calcVal:void 0;if(u||"all"!==t)this.updateTransitionAttrVal(d[u||t],a,o,n,p,s);else for(e in d)r=d[e],r.renderCall&&!this.checkIsPropInTransition(r.attr)&&this.updateTransitionAttrVal(r,a,o,n,p,s)}},LAY.Part.prototype.updateTransitionAttrVal=function(t,e,r,i,a,n){void 0!==t&&(t.isDeltaTransitionable||!r&&!n?e&&void 0!==i&&void 0!==r&&void 0!==t&&t.isTransitionable?(t.startCalcVal=t.transCalcVal,t.transition=new LAY.Transition(e,r,i,a,n)):void 0!==t&&(t.transition=void 0):(t.startCalcVal=t.transCalcVal,t.transition=new LAY.Transition("none",r,0,{},n)))},LAY.Part.prototype.render=function(t){var i=this.level.attr2attrVal,a=this.isWrappedLink,n=this.actingNode,o=a&&this.node,s=this.node;switch(t){case"x":var l=i.left.transCalcVal+(void 0!==i.shiftX?i.shiftX.transCalcVal:0)+"px";a?o.style.left=l:n.style.left=l;break;case"y":var f=i.top.transCalcVal+(void 0!==i.shiftY?i.shiftY.transCalcVal:0)+"px";a?o.style.top=f:n.style.top=f;break;case"positionAndTransform":var g=("-moz-"===p?"":p)+"transform",v="translate("+(i.left.transCalcVal+(void 0!==i.shiftX?i.shiftX.transCalcVal:0)+"px, ")+(i.top.transCalcVal+(void 0!==i.shiftY?i.shiftY.transCalcVal:0)+"px) ")+(void 0!==i.z?"translateZ("+i.z.transCalcVal+"px) ":"")+(void 0!==i.scaleX?"scaleX("+i.scaleX.transCalcVal+") ":"")+(void 0!==i.scaleY?"scaleY("+i.scaleY.transCalcVal+") ":"")+(void 0!==i.scaleZ?"scaleZ("+i.scaleZ.transCalcVal+") ":"")+(void 0!==i.skewX?"skewX("+i.skewX.transCalcVal+"deg) ":"")+(void 0!==i.skewY?"skewY("+i.skewY.transCalcVal+"deg) ":"")+(void 0!==i.rotateX?"rotateX("+i.rotateX.transCalcVal+"deg) ":"")+(void 0!==i.rotateY?"rotateY("+i.rotateY.transCalcVal+"deg) ":"")+(void 0!==i.rotateZ?"rotateZ("+i.rotateZ.transCalcVal+"deg)":"");a?o.style[g]=v:n.style[g]=v;break;case"transform":var g=("-moz-"===p?"":p)+"transform",v=(void 0!==i.scaleX?"scaleX("+i.scaleX.transCalcVal+") ":"")+(void 0!==i.scaleY?"scaleY("+i.scaleY.transCalcVal+") ":"")+(void 0!==i.scaleZ?"scaleZ("+i.scaleZ.transCalcVal+") ":"")+(void 0!==i.skewX?"skewX("+i.skewX.transCalcVal+"deg) ":"")+(void 0!==i.skewY?"skewY("+i.skewY.transCalcVal+"deg) ":"")+(void 0!==i.rotateX?"rotateX("+i.rotateX.transCalcVal+"deg) ":"")+(void 0!==i.rotateY?"rotateY("+i.rotateY.transCalcVal+"deg) ":"")+(void 0!==i.rotateZ?"rotateZ("+i.rotateZ.transCalcVal+"deg)":"");a?o.style[g]=v:n.style[g]=v;break;case"width":("video"!==this.type||this.isVideoLoaded)&&(n.style.width=i.width.transCalcVal+"px",a&&(o.style.width=i.width.transCalcVal+"px"),-1!==["canvas","video","image","iframe"].indexOf(this.type)&&(n.width=i.width.transCalcVal));break;case"height":("video"!==this.type||this.isVideoLoaded)&&(n.style.height=i.height.transCalcVal+"px",a&&(o.style.height=i.height.transCalcVal+"px"),-1!==["canvas","video","image","iframe"].indexOf(this.type)&&(n.height=i.height.transCalcVal));break;case"origin":var g=p+"transform-origin",v=100*(void 0!==i.originX?i.originX.transCalcVal:.5)+"% "+100*(void 0!==i.originY?i.originY.transCalcVal:.5)+"% "+(void 0!==i.originZ?i.originZ.transCalcVal:0)+"px";a?o.style[g]=v:n.style[g]=v;break;case"perspective":a?o.style[p+"perspective"]=i.perspective.transCalcVal+"px":n.style[p+"perspective"]=i.perspective.transCalcVal+"px";break;case"perspectiveOrigin":var g=p+"perspective-origin",v=(i.perspectiveOriginX?100*i.perspectiveOriginX.transCalcVal:0)+"% "+(i.perspectiveOriginY?100*i.perspectiveOriginY.transCalcVal:0)+"%";a?o.style[g]=v:n.style[g]=v;break;case"backfaceVisibility":a?o.style[p+"backface-visibility"]=i.backfaceVisibility.transCalcVal:n.style[p+"backface-visibility"]=i.backfaceVisibility.transCalcVal;break;case"opacity":a?o.style.opacity=i.opacity.transCalcVal:n.style.opacity=i.opacity.transCalcVal;break;case"display":a?o.style.display=i.display.transCalcVal?"block":"none":n.style.display=i.display.transCalcVal?"block":"none";break;case"visible":a?o.style.visibility=i.visible.transCalcVal?"inherit":"hidden":n.style.visibility=i.visible.transCalcVal?"inherit":"hidden";break;case"zIndex":a?o.style.zIndex=i.zIndex.transCalcVal||"auto":n.style.zIndex=i.zIndex.transCalcVal||"auto";break;case"focus":i.focus.transCalcVal?n.focus():document.activeElement===n&&document.body.focus();break;case"scrollX":n.scrollLeft=i.scrollX.transCalcVal;break;case"scrollY":n.scrollTop=i.scrollY.transCalcVal;break;case"scrollElastic":n["-webkit-overflow-scrolling"]=i.scrollElastic.transCalcVal?"touch":"auto";break;case"overflowX":n.style.overflowX=i.overflowX.transCalcVal;break;case"overflowY":n.style.overflowY=i.overflowY.transCalcVal;break;case"cursor":n.style.cursor=i.cursor.transCalcVal;break;case"userSelect":"input"!==this.type&&(n.style[p+"user-select"]=i.userSelect.transCalcVal);break;case"title":n.title=i.title.transCalcVal;break;case"id":n.id=i.id.transCalcVal;case"tabindex":n.tabindex=i.tabindex.transCalcVal;break;case"backgroundColor":n.style.backgroundColor=i.backgroundColor.transCalcVal.stringify();break;case"backgroundImage":n.style.backgroundImage=i.backgroundImage.transCalcVal;break;case"backgroundAttachment":n.style.backgroundAttachment=i.backgroundAttachment.transCalcVal;break;case"backgroundRepeat":n.style.backgroundRepeat=i.backgroundRepeat.transCalcVal;break;case"backgroundSize":n.style.backgroundSize=c(i.backgroundSizeX,"auto")+" "+c(i.backgroundSizeY,"auto");break;case"backgroundPosition":n.style.backgroundPosition=c(i.backgroundPositionX,"0px")+" "+c(i.backgroundPositionX,"0px");break;case"boxShadows":if(!LAY.$isBelowIE9){for(var A="",L=1,y=i["$$max.boxShadows"].calcVal;y>=L;L++)A+=((void 0!==i["boxShadows"+L+"Inset"]?i["boxShadows"+L+"Inset"].transCalcVal:!1)?"inset ":"")+(i["boxShadows"+L+"X"].transCalcVal+"px ")+(i["boxShadows"+L+"Y"].transCalcVal+"px ")+((void 0!==i["boxShadows"+L+"Blur"]?i["boxShadows"+L+"Blur"].transCalcVal:0)+"px ")+((void 0!==i["boxShadows"+L+"Spread"]?i["boxShadows"+L+"Spread"].transCalcVal:0)+"px ")+i["boxShadows"+L+"Color"].transCalcVal.stringify(),L!==y&&(A+=",");n.style.boxShadow=A}break;case"filters":for(var A="",L=1,y=i["$$max.filters"].calcVal;y>=L;L++){var b=i["filters"+L+"Type"].calcVal,m=i["filters"+L+"Value"]&&i["filters"+L+"Value"].transCalcVal;switch(b){case"dropShadow":A+="drop-shadow("+(i["filters"+L+"X"].transCalcVal+"px ")+(i["filters"+L+"Y"].transCalcVal+"px ")+((i["filters"+L+"Blur"]?i["filters"+L+"Blur"].transCalcVal:0)+"px ")+i["filters"+L+"Color"].transCalcVal.stringify()+") ";break;case"blur":A+="blur("+m+"px) ";break;case"hueRotate":A+="hue-rotate("+m+"deg) ";break;case"url":A+="url("+m+") ";break;default:A+=b+"("+100*m+"%) "}}n.style[p+"filter"]=A;break;case"cornerRadiusTopLeft":n.style.borderTopLeftRadius=i.cornerRadiusTopLeft.transCalcVal+"px";break;case"cornerRadiusTopRight":n.style.borderTopRightRadius=i.cornerRadiusTopRight.transCalcVal+"px";break;case"cornerRadiusBottomRight":n.style.borderBottomRightRadius=i.cornerRadiusBottomRight.transCalcVal+"px";break;case"cornerRadiusBottomLeft":n.style.borderBottomLeftRadius=i.cornerRadiusBottomLeft.transCalcVal+"px";break;case"borderTopStyle":n.style.borderTopStyle=i.borderTopStyle.transCalcVal;break;case"borderRightStyle":n.style.borderRightStyle=i.borderRightStyle.transCalcVal;break;case"borderBottomStyle":n.style.borderBottomStyle=i.borderBottomStyle.transCalcVal;break;case"borderLeftStyle":n.style.borderLeftStyle=i.borderLeftStyle.transCalcVal;break;case"borderTopColor":n.style.borderTopColor=i.borderTopColor.transCalcVal.stringify();break;case"borderRightColor":n.style.borderRightColor=i.borderRightColor.transCalcVal.stringify();break;case"borderBottomColor":n.style.borderBottomColor=i.borderBottomColor.transCalcVal.stringify();break;case"borderLeftColor":n.style.borderLeftColor=i.borderLeftColor.transCalcVal.stringify();break;case"borderTopWidth":n.style.borderTopWidth=i.borderTopWidth.transCalcVal+"px";break;case"borderRightWidth":n.style.borderRightWidth=i.borderRightWidth.transCalcVal+"px";break;case"borderBottomWidth":n.style.borderBottomWidth=i.borderBottomWidth.transCalcVal+"px";break;case"borderLeftWidth":n.style.borderLeftWidth=i.borderLeftWidth.transCalcVal+"px";break;case"html":n.innerHTML=i.html.transCalcVal;break;case"text":e(n,i.text.transCalcVal);break;case"textSize":n.style.fontSize=c(i.textSize);break;case"textFamily":n.style.fontFamily=i.textFamily.transCalcVal;break;case"textWeight":n.style.fontWeight=i.textWeight.transCalcVal;break;case"textColor":n.style.color=d(i.textColor);break;case"textVariant":n.style.fontVariant=i.textVariant.transCalcVal;break;case"textTransform":n.style.textTransform=i.textTransform.transCalcVal;break;case"textStyle":n.style.fontStyle=i.textStyle.transCalcVal;break;case"textDecoration":n.style.textDecoration=i.textDecoration.transCalcVal;break;case"textLetterSpacing":n.style.letterSpacing=h(i.textLetterSpacing);break;case"textWordSpacing":n.style.wordSpacing=h(i.textWordSpacing);break;case"textAlign":n.style.textAlign=i.textAlign.transCalcVal;break;case"textDirection":n.style.direction=i.textDirection.transCalcVal;break;case"textLineHeight":n.style.lineHeight=u(i.textLineHeight);break;case"textOverflow":n.style.textOverflow=i.textOverflow.transCalcVal;break;case"textIndent":n.style.textIndent=i.textIndent.transCalcVal+"px";break;case"textWrap":n.style.whiteSpace=i.textWrap.transCalcVal;break;case"textWordBreak":n.style.wordBreak=i.textWordBreak.transCalcVal;break;case"textWordWrap":n.style.wordWrap=i.textWordWrap.transCalcVal;break;case"textSmoothing":n.style[p+"font-smoothing"]=i.textSmoothing.transCalcVal;break;case"textRendering":n.style.textRendering=i.textRendering.transCalcVal;break;case"textPaddingTop":n.style.paddingTop=i.textPaddingTop.transCalcVal+"px";break;case"textPaddingRight":n.style.paddingRight=i.textPaddingRight.transCalcVal+"px";break;case"textPaddingBottom":n.style.paddingBottom=i.textPaddingBottom.transCalcVal+"px";break;case"textPaddingLeft":n.style.paddingLeft=i.textPaddingLeft.transCalcVal+"px";break;case"textShadows":for(var A="",L=1,y=i["$$max.textShadows"].calcVal;y>=L;L++)A+=i["textShadows"+L+"Color"].transCalcVal.stringify()+" "+(i["textShadows"+L+"X"].transCalcVal+"px ")+(i["textShadows"+L+"Y"].transCalcVal+"px ")+(i["textShadows"+L+"Blur"].transCalcVal+"px"),L!==y&&(A+=",");n.style.textShadow=A;break;case"input":var x=i.input.transCalcVal;"option"===this.inputType||"options"===this.inputType?n.innerHTML=r(x):n.value=x;break;case"inputLabel":n.label=i.inputLabel.transCalcVal;break;case"inputAccept":n.accept=i.inputAccept.transCalcVal;break;case"inputPlaceholder":n.placeholder=i.inputPlaceholder.transCalcVal;break;case"inputAutocomplete":n.autocomplete=i.inputAutocomplete.transCalcVal;break;case"inputAutocorrect":n.autocorrect=i.inputAutocorrect.transCalcVal;break;case"inputDisabled":n.disabled=i.inputDisabled.transCalcVal;break;case"link":s.href=i.link.transCalcVal;break;case"linkRel":s.rel=i.linkRel.transCalcVal;break;case"linkDownload":s.download=i.linkDownload.transCalcVal;break;case"linkTarget":s.target=i.linkTarget.transCalcVal;break;case"image":n.src=i.image.transCalcVal;break;case"imageAlt":n.alt=i.imageAlt.transCalcVal;break;case"audio":n.src=i.audio.transCalcVal;break;case"audios":for(var Y,$=document.createDocumentFragment(),k=n.childNodes,L=0,y=k.length;y>=L;L++)Y=k[L],"SOURCE"===Y.tagName&&Y.parentNode.removeChild(Y);for(var L=1,y=i["$$max.audios"].calcVal;y>=L;L++)Y=document.createElement("source"),Y.type=i["audios"+L+"Type"].transCalcVal,Y.src=i["audios"+L+"Src"].transCalcVal,$.appendChild(Y);n.appendChild($);break;case"audioTracks":for(var Y,$=document.createDocumentFragment(),k=n.childNodes,L=0,y=k.length;y>=L;L++)Y=k[L],"TRACK"===Y.tagName&&Y.parentNode.removeChild(Y);for(var L=1,y=i["$$max.audioTracks"].calcVal;y>=L;L++)Y=document.createElement("track"),Y.type=i["audioTracks"+L+"Type"].transCalcVal,Y.src=i["audioTracks"+L+"Src"].transCalcVal,$.appendChild(Y);n.appendChild($);break;case"audioVolume":n.volume=i.audioVolume.transCalcVal;break;case"audioController":n.controls=i.audioController.transCalcVal;break;case"audioLoop":n.loop=i.audioLoop.transCalcVal;break;case"audioMuted":n.muted=i.audioMuted.transCalcVal;break;case"audioPreload":n.preload=i.audioPreload.transCalcVal;break;case"video":n.src=i.video.transCalcVal;break;case"videos":for(var Y,$=document.createDocumentFragment(),k=n.childNodes,L=0,y=k.length;y>=L;L++)Y=k[L],"SOURCE"===Y.tagName&&Y.parentNode.removeChild(Y);for(var L=1,y=i["$$max.videos"].calcVal;y>=L;L++)Y=document.createElement("source"),Y.type=i["videos"+L+"Type"].transCalcVal,Y.src=i["videos"+L+"Src"].transCalcVal,$.appendChild(Y);n.appendChild($);break;case"videoTracks":for(var Y,$=document.createDocumentFragment(),k=n.childNodes,L=0,y=k.length;y>=L;L++)Y=k[L],"TRACK"===Y.tagName&&Y.parentNode.removeChild(Y);for(var L=1,y=i["$$max.videoTracks"].calcVal;y>=L;L++)Y=document.createElement("track"),Y.type=i["videoTracks"+L+"Type"].transCalcVal,Y.src=i["videoTracks"+L+"Src"].transCalcVal,$.appendChild(Y);n.appendChild($);break;case"videoAutoplay":n.autoplay=i.videoAutoplay.transCalcVal;break;case"videoController":n.controls=i.videoController.transCalcVal;break;case"videoCrossorigin":n.crossorigin=i.videoCrossorigin.transCalcVal;break;case"videoLoop":n.loop=i.videoLoop.transCalcVal;break;case"videoMuted":n.muted=i.videoMuted.transCalcVal;break;case"videoPreload":n.preload=i.videoPreload.transCalcVal;break;case"videoPoster":n.poster=i.videoPoster.transCalcVal;break;case"iframe":n.src=i.iframe.transCalcVal;break;default:LAY.$error("Inexistent prop: '"+t+"'")}}}(),function(){"use strict";LAY.Query=function(t){this.rowS=t},LAY.Query.prototype.filterEq=function(t,e){return new LAY.Query(LAY.$filterUtils.eq(this.rowS,t,e))},LAY.Query.prototype.filterNeq=function(t,e){return new LAY.Query(LAY.$filterUtils.neq(this.rowS,t,e))},LAY.Query.prototype.filterGt=function(t,e){return new LAY.Query(LAY.$filterUtils.gt(this.rowS,t,e))},LAY.Query.prototype.filterGte=function(t,e){return new LAY.Query(LAY.$filterUtils.gte(this.rowS,t,e))},LAY.Query.prototype.filterLt=function(t,e){
return new LAY.Query(LAY.$filterUtils.lt(this.rowS,t,e))},LAY.Query.prototype.filterLte=function(t,e){return new LAY.Query(LAY.$filterUtils.lte(this.rowS,t,e))},LAY.Query.prototype.filterRegex=function(t,e){return new LAY.Query(LAY.$filterUtils.regex(this.rowS,t,e))},LAY.Query.prototype.filterContains=function(t,e){return new LAY.Query(LAY.$filterUtils.contains(this.rowS,t,e))},LAY.Query.prototype.filterWithin=function(t,e){return new LAY.Query(LAY.$filterUtils.within(this.rowS,t,e))},LAY.Query.prototype.filterFn=function(t){return new LAY.Query(LAY.$filterUtils.fn(this.rowS,t))},LAY.Query.prototype.foldMin=function(){return LAY.$foldUtils.min(this.rowS)},LAY.Query.prototype.foldMax=function(){return LAY.$foldUtils.max(this.rowS)},LAY.Query.prototype.foldSum=function(){return LAY.$foldUtils.sum(this.rowS)},LAY.Query.prototype.foldAvg=function(){return LAY.$foldUtils.avg(this.rowS)},LAY.Query.prototype.foldFn=function(t,e){return LAY.$foldUtils.fn(this.rowS,t,e)},LAY.Query.prototype.mapKey=function(t){return LAY.$mapUtils.key(this.rowS,t)},LAY.Query.prototype.mapFn=function(t){return LAY.$mapUtils.fn(this.rowS,t)},LAY.Query.prototype.index=function(t){return this.rowS[t]},LAY.Query.prototype.length=function(){return this.rowS.length},LAY.Query.prototype.finish=function(){return this.rowS}}(),function(){"use strict";LAY.RelPath=function(t){if(this.isMe=!1,this.isMany=!1,this.path="",this.isAbsolute=!1,this.jumpTo="",this.traverseArray=[],"~"===t&&(t="~/"),""===t||"."===t||"./"===t)this.isMe=!0;else{if("/"===t.charAt(0))this.isAbsolute=!0,this.path=t;else{if("^"===t.charAt(0)){for(var e=[t.indexOf("$"),t.indexOf("@"),t.indexOf("."),t.indexOf("~"),t.indexOf("/")],r=-1,i=0;i<e.length;i++){var a=e[i];-1!==a&&(-1===r||r>a)&&(r=a)}-1===a&&(a=t.length),this.jumpTo=t.slice(1,a),t=t.slice(a)}for(var i=0;i<t.length&&-1!==[".","~","#","@"].indexOf(t.charAt(i));)"../"===t.slice(i,i+3)?(this.traverseArray.push(0),i+=3):"~/"===t.slice(i,i+2)?(this.traverseArray.push(1),i+=2):"#"===t.charAt(i)?(this.traverseArray.push(2),i++):"@"===t.charAt(i)?(this.traverseArray.push(3),i++):LAY.$error("Error in Take path: "+t);this.path=t.slice(i)}var n=this.path.lastIndexOf("/many");(4===this.path.length&&"many"===this.path||-1!==n&&n===this.path.length-5)&&(this.isMany=!0,4===this.path.length?this.path="":this.path=this.path.slice(0,this.path.length-5))}},LAY.RelPath.prototype.resolve=function(t){if(this.isMe)return t;var e;if(this.isAbsolute)e=LAY.$pathName2level[this.path];else{if(e=t,""!==this.jumpTo){for(;void 0!==e&&e.name!==this.jumpTo;)e=e.parentLevel;void 0===e&&LAY.$error("No ^ (jump) level found from level "+t.pathName)}for(var r=this.traverseArray,i=0,a=r.length;a>i;i++)if(0===r[i])e=e.parentLevel;else if(1===r[i]){do e=e.parentLevel;while(!e.derivedMany)}else if(2===r[i]){do e=e.parentLevel,void 0===e&&LAY.$error("No View Found (#) from level "+t.pathName);while(!e.isView)}else do e=e.parentLevel,void 0===e&&LAY.$error("No Page Found (@) from level "+t.pathName);while(!e.isPage);e=""===this.path?e:LAY.$pathName2level[e.pathName+("/"===e.pathName?"":"/")+this.path]}return this.isMany?e.derivedMany.level:e}}(),function(){"use strict";LAY.Take=function(t,e){var r;if(void 0!==e){var i=new LAY.RelPath(t);r=[[i,e]],this.executable=function(){return i.resolve(this).$getAttrVal(e).calcVal}}else{r=[];var a=t;a instanceof LAY.Take?(this.executable=a.executable,r=a._relPath00attr_S):this.executable=function(){return a}}this._relPath00attr_S=r},LAY.Take.prototype.execute=function(t){return this.executable.call(t)},LAY.Take.prototype.$mergePathAndAttrs=function(t){for(var e=t._relPath00attr_S,r=0,i=e.length;i>r;r++)this._relPath00attr_S.push(e[r])},LAY.Take.prototype.add=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)+t.execute(this)}):this.executable=function(){return e.call(this)+t},this},LAY.Take.prototype.plus=LAY.Take.prototype.add,LAY.Take.prototype.subtract=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)-t.execute(this)}):this.executable=function(){return e.call(this)-t},this},LAY.Take.prototype.minus=LAY.Take.prototype.subtract,LAY.Take.prototype.divide=function(t){var e=this.executable;if(t instanceof LAY.Take)this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)/t.execute(this)};else{if(2===t)return this.half();this.executable=function(){return e.call(this)/t}}return this},LAY.Take.prototype.multiply=function(t){var e=this.executable;if(t instanceof LAY.Take)this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)*t.execute(this)};else{if(2===t)return this["double"]();this.executable=function(){return e.call(this)*t}}return this},LAY.Take.prototype.remainder=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)%t.execute(this)}):this.executable=function(){return e.call(this)%t},this},LAY.Take.prototype.mod=LAY.Take.prototype.remainder,LAY.Take.prototype.percent=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)*(t.execute(this)/100)}):this.executable=function(){return e.call(this)*(t/100)},this},LAY.Take.prototype.half=function(){var t=this.executable;return this.executable=function(){return t.call(this)/2},this},LAY.Take.prototype["double"]=function(){var t=this.executable;return this.executable=function(){return 2*t.call(this)},this},LAY.Take.prototype.contains=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return-1!==e.call(this).indexOf(t.execute(this))}):this.executable=function(){return-1!==e.call(this).indexOf(t)},this},LAY.Take.prototype.within=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return-1!==t.execute(this).indexOf(e.call(this))}):this.executable=function(){return-1!==t.indexOf(e.call(this))},this},LAY.Take.prototype.identical=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return LAY.identical(e.call(this),t.execute(this))}):this.executable=function(){return LAY.identical(e.call(this),t)},this},LAY.Take.prototype.eq=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)===t.execute(this)}):this.executable=function(){return e.call(this)===t},this},LAY.Take.prototype.neq=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)!==t.execute(this)}):this.executable=function(){return e.call(this)!==t},this},LAY.Take.prototype.gt=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)>t.execute(this)}):this.executable=function(){return e.call(this)>t},this},LAY.Take.prototype.gte=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)>=t.execute(this)}):this.executable=function(){return e.call(this)>=t},this},LAY.Take.prototype.lt=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)<t.execute(this)}):this.executable=function(){return e.call(this)<t},this},LAY.Take.prototype.lte=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)<=t.execute(this)}):this.executable=function(){return e.call(this)<=t},this},LAY.Take.prototype.or=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)||t.execute(this)}):this.executable=function(){return e.call(this)||t},this},LAY.Take.prototype.and=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)&&t.execute(this)}):this.executable=function(){return e.call(this)&&t},this},LAY.Take.prototype.not=function(){var t=this.executable;return this.executable=function(){return!t.call(this)},this},LAY.Take.prototype.negative=function(){var t=this.executable;return this.executable=function(){return-t.call(this)},this},LAY.Take.prototype.number=function(){var t=this.executable;return this.executable=function(){return parseInt(t.call(this))},this},LAY.Take.prototype.key=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)[t.execute(this)]}):this.executable=function(){return e.call(this)[t]},this},LAY.Take.prototype.index=LAY.Take.prototype.key,LAY.Take.prototype.length=function(t){var e=this.executable;return this.executable=function(){return e.call(this).length},this},LAY.Take.prototype.slice=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return r.call(this).slice(t.execute(this),e.execute(this))}):this.executable=function(){return r.call(this).slice(t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return r.call(this).slice(t,e.execute(this))}):this.executable=function(){return r.call(this).slice(t,e)},this},LAY.Take.prototype.min=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return Math.min(e.call(this),t.execute(this))}):this.executable=function(){return Math.min(e.call(this),t)},this},LAY.Take.prototype.max=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return Math.max(e.call(this),t.execute(this))}):this.executable=function(){return Math.max(e.call(this),t)},this},LAY.Take.prototype.ceil=function(){var t=this.executable;return this.executable=function(){return Math.ceil(t.call(this))},this},LAY.Take.prototype.floor=function(){var t=this.executable;return this.executable=function(){return Math.floor(t.call(this))},this},LAY.Take.prototype.round=function(){var t=this.executable;return this.executable=function(){return Math.round(t.call(this))},this},LAY.Take.prototype.trunc=function(){var t=this.executable;return this.executable=function(){return Math.trunc(t.call(this))},this},LAY.Take.prototype.abs=function(){var t=this.executable;return this.executable=function(){return Math.abs(t.call(this))},this},LAY.Take.prototype.pow=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return Math.pow(e.call(this),t.execute(this))}):this.executable=function(){return Math.pow(e.call(this),t)},this},LAY.Take.prototype.regexMatch=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).match(t.execute(this))}):this.executable=function(){return e.call(this).match(t)},this},LAY.Take.prototype.regexSearch=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).search(t.execute(this))}):this.executable=function(){return e.call(this).search(t)},this},LAY.Take.prototype.regexTest=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).test(t.execute(this))}):this.executable=function(){return e.call(this).test(t)},this},LAY.Take.prototype.regexExec=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).exec(t.execute(this))}):this.executable=function(){return e.call(this).exec(t)},this},LAY.Take.prototype.concat=LAY.Take.prototype.add,LAY.Take.prototype.startsWith=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).startsWith(t.execute(this))}):this.executable=function(){return e.call(this).startsWith(t)},this},LAY.Take.prototype.endsWith=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).endsWith(t.execute(this))}):this.executable=function(){return e.call(this).endsWith(t)},this},LAY.Take.prototype.indexOf=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).indexOf(t.execute(this))}):this.executable=function(){return e.call(this).indexOf(t)},this},LAY.Take.prototype.trim=function(){var t=this.executable;return this.executable=function(){return t.call(this).trim()()},this},LAY.Take.prototype.lowercase=function(){var t=this.executable;return this.executable=function(){return t.call(this).toLowerCase()},this},LAY.Take.prototype.uppercase=function(){var t=this.executable;return this.executable=function(){return t.call(this).toUpperCase()},this},LAY.Take.prototype.capitalize=function(){var t=this.executable;return this.executable=function(){var e=t.call(this);return e.charAt(0).toUpperCase()+e.slice(1)},this},LAY.Take.prototype.format=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);if(1===t.length&&"object"===LAY.$type(t[0])){var e=t[0];for(var r in e){var i=e[r];i instanceof LAY.Take&&this.$mergePathAndAttrs(i)}var a=this.executable;return this.executable=function(){var t={};for(var r in e){var i=e[r];t[r]=i instanceof LAY.Take?i.execute(this):i}return LAY.$format(a.call(this),t)},this}var n=new LAY.Take(LAY.$format);return t.unshift(this),n.fn.apply(n,t)},LAY.Take.prototype.i18nFormat=function(){function t(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);return t[0]=t[0][LAY.level("/").attr("data.lang")],void 0===t[0]&&LAY.$error("No language defined for i18nFormat"),LAY.$format.apply(void 0,t)}this._relPath00attr_S.push([new LAY.RelPath("/"),"data.lang"]);var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);if(1===e.length&&"object"===LAY.$type(e[0])){var r=e[0];for(var i in r){var a=r[i];a instanceof LAY.Take&&this.$mergePathAndAttrs(a)}var n=this.executable;return this.executable=function(){var t={},e=LAY.level("/").attr("data.lang");for(var i in r){var a=r[i];t[i]=a instanceof LAY.Take?a.execute(this):a}return LAY.$format(n.call(this)[e],t)},this}var o=new LAY.Take(t);return e.unshift(this),o.fn.apply(o,e)},LAY.Take.prototype.colorEquals=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).equals(t.execute(this))}):this.executable=function(){return e.call(this).equals(t)},this},LAY.Take.prototype.colorStringify=function(){var t=this.executable;return this.executable=function(){return t.call(this).copy().stringify()},this},LAY.Take.prototype.colorLighten=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().lighten(t.execute(this))}):this.executable=function(){return e.call(this).copy().lighten(t)},this},LAY.Take.prototype.colorDarken=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().darken(t.execute(this))}):this.executable=function(){return e.call(this).copy().darken(t)},this},LAY.Take.prototype.colorInvert=function(){var t=this.executable;return this.executable=function(){return t.call(this).copy().invert()},this},LAY.Take.prototype.colorSaturate=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().saturate(t.execute(this))}):this.executable=function(){return e.call(this).copy().saturate(t)},this},LAY.Take.prototype.colorDesaturate=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().desaturate(t.execute(this))}):this.executable=function(){return e.call(this).copy().desaturate(t)},this},LAY.Take.prototype.colorTransparentize=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().transparentize(t.execute(this))}):this.executable=function(){return e.call(this).copy().transparentize(t)},this},LAY.Take.prototype.colorMix=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().mix(t.execute(this))}):this.executable=function(){return e.call(this).copy().mix(t)},this},LAY.Take.prototype.filterEq=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.eq(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.eq(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.eq(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.eq(r.call(this),t,e)},this},LAY.Take.prototype.filterNeq=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.neq(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.neq(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.neq(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.neq(r.call(this),t,e)},this},LAY.Take.prototype.filterGt=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.gt(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.gt(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.gt(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.gt(r.call(this),t,e)},this},LAY.Take.prototype.filterGte=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.gte(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.gte(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.gte(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.gte(r.call(this),t,e)},this},LAY.Take.prototype.filterLt=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.lt(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.lt(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.lt(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.lt(r.call(this),t,e)},this},LAY.Take.prototype.filterLte=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.lte(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.lte(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.lte(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.lte(r.call(this),t,e)},this},LAY.Take.prototype.filterRegex=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.regex(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.regex(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.regex(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.regex(r.call(this),t,e)},this},LAY.Take.prototype.filterContains=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.contains(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.contains(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.contains(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.contains(r.call(this),t,e)},this},LAY.Take.prototype.filterWithin=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.within(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.within(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.within(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.within(r.call(this),t,e)},this},LAY.Take.prototype.filterFn=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return LAY.$filterUtils.fn(e.call(this),t.execute(this))}):this.executable=function(){return LAY.$filterUtils.fn(e.call(this),t)},this},LAY.Take.prototype.mapFn=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return LAY.$mapUtils.fn(e.call(this),t.execute(this))}):this.executable=function(){return LAY.$mapUtils.fn(e.call(this),t)},this},LAY.Take.prototype.mapKey=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return LAY.$mapUtils.key(e.call(this),t.execute(this))}):this.executable=function(){return LAY.$mapUtils.key(e.call(this),t)},this},LAY.Take.prototype.foldMin=function(){var t=this.executable;return this.executable=function(){return LAY.$foldUtils.min(t.call(this))},this},LAY.Take.prototype.foldMax=function(){var t=this.executable;return this.executable=function(){return LAY.$foldUtils.max(t.call(this))},this},LAY.Take.prototype.foldSum=function(){var t=this.executable;return this.executable=function(){return LAY.$foldUtils.sum(t.call(this))},this},LAY.Take.prototype.foldFn=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$foldUtils.fn(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$foldUtils.fn(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$foldUtils.fn(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$foldUtils.fn(r.call(this),t,ac)},this},LAY.Take.prototype.fn=function(){var t=this.executable;if(0===arguments.length)this.executable=function(){return t.call(this).call(this)};else if(1===arguments.length){var e=arguments[0];e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return t.call(this).call(this,e.execute(this))}):this.executable=function(){return t.call(this).call(this,e)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];r instanceof LAY.Take?(this.$mergePathAndAttrs(r),i instanceof LAY.Take?(this.$mergePathAndAttrs(i),this.executable=function(){return t.call(this).call(this,r.execute(this),i.execute(this))}):this.executable=function(){return t.call(this).call(this,r.execute(this),i)}):i instanceof LAY.Take?(this.$mergePathAndAttrs(i),this.executable=function(){return t.call(this).call(this,r,i.execute(this))}):this.executable=function(){return t.call(this).call(this,r,i)}}else{for(var a=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),n=0,o=a.length;o>n;n++){var s=arguments[n];s instanceof LAY.Take&&this.$mergePathAndAttrs(s)}this.executable=function(){for(var e=new Array(a.length),r=0,i=a.length;i>r;r++){var n=a[r];e[r]=n instanceof LAY.Take?n.execute(this):n}return t.call(this).apply(this,e)}}return this}}(),function(){"use strict";function t(t,e){this.curTime=0,this.duration=t}function e(t,e){}function r(t,e){this.curTime=0,this.duration=t,this.cx=3*e.a,this.bx=3*(e.c-e.a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e.b,this.by=3*(e.d-e.b)-this.cy,this.ay=1-this.cy-this.by}var i,a=1e-6;LAY.Transition=function(t,e,r,a,n){this.done=n,this.delay=e,this.transition=i[t](r,a)},LAY.Transition.prototype.generateNext=function(t){return this.transition.generateNext(t)},LAY.Transition.prototype.checkIsComplete=function(){return this.transition.checkIsComplete()},t.prototype.generateNext=function(t){return(this.curTime+=t)/this.duration},t.prototype.checkIsComplete=function(){return this.curTime>=this.duration},e.prototype.generateNext=function(t){return 1},e.prototype.checkIsComplete=function(){return!0},r.prototype.generateNext=function(t){return this.sampleCurveY(this.solveCurveX((this.curTime+=t)/this.duration))},r.prototype.checkIsComplete=function(){return this.curTime>=this.duration},r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t){var e,r,i,n,o,s;for(i=t,s=0;8>s;s++){if(n=this.sampleCurveX(i)-t,Math.abs(n)<a)return i;if(o=this.sampleCurveDerivativeX(i),Math.abs(o)<1e-6)break;i-=n/o}if(e=0,r=1,i=t,e>i)return e;if(i>r)return r;for(;r>e;){if(n=this.sampleCurveX(i),Math.abs(n-t)<a)return i;t>n?e=i:r=i,i=.5*(r-e)+e}return i},i={none:function(t,r){return new e(t,r)},linear:function(e,r){return new t(e,r)},spring:function(t,e){return new LAY.$springTransition(t,e)},"cubic-bezier":function(t,e){return new r(t,e)},ease:function(t,e){return new r(t,{a:.25,b:.1,c:.25,d:1})},"ease-in":function(t,e){return new r(t,{a:.42,b:0,c:1,d:1})},"ease-out":function(t,e){return new r(t,{a:0,b:0,c:.58,d:1})},"ease-in-out":function(t,e){return new r(t,{a:.42,b:0,c:.58,d:1})}}}(),function(){"use strict";LAY.clog=function(){LAY.$numClog++}}(),function(){"use strict";function t(t){return LAY.color(t)}var e=/(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,?\s*((\d+\.\d+)|(\d+))?/;LAY.color=function(i){if(i instanceof LAY.Take)return new LAY.Take(t).fn(i);i=i.toLowerCase();var a=r[i];if(void 0!==a)return new LAY.Color("rgb",a,1);if(i.match(/(rgb)|(hsl)/)){var n=i.match(e);if(n){var o=parseInt(n[1]),s=parseInt(n[2]),l=parseInt(n[3]),c=void 0===n[4]?1:parseFloat(n[4]);return-1!==i.indexOf("rgb")?LAY.rgba(o,s,l,c):LAY.hsla(o,s,l,c)}}LAY.$error("Color name: "+i+" not found.")};var r={aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},aqua:{r:0,g:255,b:255},aquamarine:{r:127,g:255,b:212},azure:{r:240,g:255,b:255},beige:{r:245,g:245,b:220},bisque:{r:255,g:228,b:196},black:{r:0,g:0,b:0},blanchedalmond:{r:255,g:235,b:205},blue:{r:0,g:0,b:255},blueviolet:{r:138,g:43,b:226},brown:{r:165,g:42,b:42},burlywood:{r:222,g:184,b:135},cadetblue:{r:95,g:158,b:160},chartreuse:{r:127,g:255,b:0},chocolate:{r:210,g:105,b:30},coral:{r:255,g:127,b:80},cornflowerblue:{r:100,g:149,b:237},cornsilk:{r:255,g:248,b:220},crimson:{r:220,g:20,b:60},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgoldenrod:{r:184,g:134,b:11},darkgray:{r:169,g:169,b:169},darkgreen:{r:0,g:100,b:0},darkgrey:{r:169,g:169,b:169},darkkhaki:{r:189,g:183,b:107},darkmagenta:{r:139,g:0,b:139},darkolivegreen:{r:85,g:107,b:47},darkorange:{r:255,g:140,b:0},darkorchid:{r:153,g:50,b:204},darkred:{r:139,g:0,b:0},darksalmon:{r:233,g:150,b:122},darkseagreen:{r:143,g:188,b:143},darkslateblue:{r:72,g:61,b:139},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},darkturquoise:{r:0,g:206,b:209},darkviolet:{r:148,g:0,b:211},deeppink:{r:255,g:20,b:147},deepskyblue:{r:0,g:191,b:255},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},dodgerblue:{r:30,g:144,b:255},firebrick:{r:178,g:34,b:34},floralwhite:{r:255,g:250,b:240},forestgreen:{r:34,g:139,b:34},fuchsia:{r:255,g:0,b:255},gainsboro:{r:220,g:220,b:220},ghostwhite:{r:248,g:248,b:255},gold:{r:255,g:215,b:0},goldenrod:{r:218,g:165,b:32},gray:{r:128,g:128,b:128},green:{r:0,g:128,b:0},greenyellow:{r:173,g:255,b:47},grey:{r:128,g:128,b:128},honeydew:{r:240,g:255,b:240},hotpink:{r:255,g:105,b:180},indianred:{r:205,g:92,b:92},indigo:{r:75,g:0,b:130},ivory:{r:255,g:255,b:240},khaki:{r:240,g:230,b:140},lavender:{r:230,g:230,b:250},lavenderblush:{r:255,g:240,b:245},lawngreen:{r:124,g:252,b:0},lemonchiffon:{r:255,g:250,b:205},lightblue:{r:173,g:216,b:230},lightcoral:{r:240,g:128,b:128},lightcyan:{r:224,g:255,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},lightgray:{r:211,g:211,b:211},lightgreen:{r:144,g:238,b:144},lightgrey:{r:211,g:211,b:211},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightseagreen:{r:32,g:178,b:170},lightskyblue:{r:135,g:206,b:250},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},lightsteelblue:{r:176,g:196,b:222},lightyellow:{r:255,g:255,b:224},lime:{r:0,g:255,b:0},limegreen:{r:50,g:205,b:50},linen:{r:250,g:240,b:230},magenta:{r:255,g:0,b:255},maroon:{r:128,g:0,b:0},mediumaquamarine:{r:102,g:205,b:170},mediumblue:{r:0,g:0,b:205},mediumorchid:{r:186,g:85,b:211},mediumpurple:{r:147,g:112,b:219},mediumseagreen:{r:60,g:179,b:113},mediumslateblue:{r:123,g:104,b:238},mediumspringgreen:{r:0,g:250,b:154},mediumturquoise:{r:72,g:209,b:204},mediumvioletred:{r:199,g:21,b:133},midnightblue:{r:25,g:25,b:112},mintcream:{r:245,g:255,b:250},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},navy:{r:0,g:0,b:128},oldlace:{r:253,g:245,b:230},olive:{r:128,g:128,b:0},olivedrab:{r:107,g:142,b:35},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},orchid:{r:218,g:112,b:214},palegoldenrod:{r:238,g:232,b:170},palegreen:{r:152,g:251,b:152},paleturquoise:{r:175,g:238,b:238},palevioletred:{r:219,g:112,b:147},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},peru:{r:205,g:133,b:63},pink:{r:255,g:192,b:203},plum:{r:221,g:160,b:221},powderblue:{r:176,g:224,b:230},purple:{r:128,g:0,b:128},red:{r:255,g:0,b:0},rosybrown:{r:188,g:143,b:143},royalblue:{r:65,g:105,b:225},saddlebrown:{r:139,g:69,b:19},salmon:{r:250,g:128,b:114},sandybrown:{r:244,g:164,b:96},seagreen:{r:46,g:139,b:87},seashell:{r:255,g:245,b:238},sienna:{r:160,g:82,b:45},silver:{r:192,g:192,b:192},skyblue:{r:135,g:206,b:235},slateblue:{r:106,g:90,b:205},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},snow:{r:255,g:250,b:250},springgreen:{r:0,g:255,b:127},steelblue:{r:70,g:130,b:180},tan:{r:210,g:180,b:140},teal:{r:0,g:128,b:128},thistle:{r:216,g:191,b:216},tomato:{r:255,g:99,b:71},turquoise:{r:64,g:224,b:208},violet:{
r:238,g:130,b:238},wheat:{r:245,g:222,b:179},white:{r:255,g:255,b:255},whitesmoke:{r:245,g:245,b:245},yellow:{r:255,g:255,b:0},yellowgreen:{r:154,g:205,b:50}}}(),function(){"use strict";LAY.formation=function(t,e,r){LAY.$formation2fargs[t]=e,LAY.$formation2fn[t]=r}}(),function(){"use strict";function t(t){return LAY.hex(t)}function e(t){return{r:t>>16&255,g:t>>8&255,b:255&t}}LAY.hex=function(r){return r instanceof LAY.Take?new LAY.Take(t).fn(r):new LAY.Color("rgb",e(r),1)}}(),function(){"use strict";LAY.hsl=function(t,e,r){return LAY.hsla(t,e,r,1)}}(),function(){"use strict";function t(t,e,r,i){new LAY.Color("hsl",{h:t,s:e,l:r},i)}LAY.hsla=function(e,r,i,a){return e instanceof LAY.Take||r instanceof LAY.Take||i instanceof LAY.Take||a instanceof LAY.Take?new LAY.Take(t).fn(e,r,i,a):new LAY.Color("hsl",{h:e,s:r,l:i},a)}}(),function(){"use strict";function t(t){return LAY.$type(t)}function e(e,l,c){var h=t(e),d=t(l);return r(e,l)?!0:"color"===h?a(e,l):"level"===h?n(e,l):"take"===h||"take"===d?!1:"date"===h?i(e,l):"regexp"===h?o(e,l):"arguments"===h?s(e,l,c):"object"!==h&&"object"!==d&&"array"!==h&&"array"!==d?r(e,l):u(e,l,c)}function r(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function i(e,i){return"date"!==t(i)?!1:r(e.getTime(),i.getTime())}function a(e,r){return"color"===t(r)&&e.equals(r)}function n(e,r){return"level"===t(r)&&e.pathName===r.pathName}function o(e,i){return"regexp"!==t(i)?!1:r(e.toString(),i.toString())}function s(r,i,a){return"arguments"!==t(i)?!1:(r=[].slice.call(r),i=[].slice.call(i),e(r,i,a))}function l(t){var e=[];for(var r in t)e.push(r);return e}function c(t,e){if(t.length!==e.length)return!1;for(var r=0,i=!0;r<t.length;r++)if(t[r]!==e[r]){i=!1;break}return i}function h(t){return null!==t&&void 0!==t}function u(t,r,i){if(!h(t)||!h(r))return!1;if(t.prototype!==r.prototype)return!1;var a;if(i){for(a=0;a<i.length;a++)if(i[a][0]===t&&i[a][1]===r||i[a][0]===r&&i[a][1]===t)return!0}else i=[];try{var n=l(t),o=l(r)}catch(s){return!1}if(n.sort(),o.sort(),!c(n,o))return!1;i.push([t,r]);var u;for(a=n.length-1;a>=0;a--)if(u=n[a],!e(t[u],r[u],i))return!1;return!0}/*!
* source: chai.js (https://github.com/chaijs/deep-eql)
* deep-eql
* Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
* MIT Licensed
*/
LAY.identical=function(t,r){return e(t,r,void 0)}}(),function(){"use strict";LAY.level=function(t,e){var r=LAY.$pathName2level[t];return void 0===e?r:void 0!==r?r.attr(e):void 0}}(),function(){"use strict";function t(t){this.tokens=[],this.tokens.links={},this.options=t||c.defaults,this.rules=h.normal,this.options.gfm&&(this.options.tables?this.rules=h.tables:this.rules=h.gfm)}function e(t,e){if(this.options=e||c.defaults,this.links=t,this.rules=u.normal,this.renderer=this.options.renderer||new r,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=u.breaks:this.rules=u.gfm:this.options.pedantic&&(this.rules=u.pedantic)}function r(t){this.options=t||{}}function i(t){this.tokens=[],this.token=null,this.options=t||c.defaults,this.options.renderer=this.options.renderer||new r,this.renderer=this.options.renderer,this.renderer.options=this.options}function a(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function n(t){return t.replace(/&([#\w]+);/g,function(t,e){return e=e.toLowerCase(),"colon"===e?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}function o(t,e){return t=t.source,e=e||"",function r(i,a){return i?(a=a.source||a,a=a.replace(/(^|[^\[])\^/g,"$1"),t=t.replace(i,a),r):new RegExp(t,e)}}function s(){}function l(t){for(var e,r,i=1;i<arguments.length;i++){e=arguments[i];for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}function c(e,r,n){if(n||"function"==typeof r){n||(n=r,r=null),r=l({},c.defaults,r||{});var o,s,h=r.highlight,u=0;try{o=t.lex(e,r)}catch(d){return n(d)}s=o.length;var p=function(t){if(t)return r.highlight=h,n(t);var e;try{e=i.parse(o,r)}catch(a){t=a}return r.highlight=h,t?n(t):n(null,e)};if(!h||h.length<3)return p();if(delete r.highlight,!s)return p();for(;u<o.length;u++)!function(t){return"code"!==t.type?--s||p():h(t.text,t.lang,function(e,r){return e?p(e):null==r||r===t.text?--s||p():(t.text=r,t.escaped=!0,void(--s||p()))})}(o[u])}else try{return r&&(r=l({},c.defaults,r)),i.parse(t.lex(e,r),r)}catch(d){if(d.message+="\nPlease report this to https://github.com/chjj/marked.",(r||c.defaults).silent)return"<p>An error occured:</p><pre>"+a(d.message+"",!0)+"</pre>";throw d}}/**
 * marked - a markdown parser
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 */
var h={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:s,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:s,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:s,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};h.bullet=/(?:[*+-]|\d+\.)/,h.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,h.item=o(h.item,"gm")(/bull/g,h.bullet)(),h.list=o(h.list)(/bull/g,h.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+h.def.source+")")(),h.blockquote=o(h.blockquote)("def",h.def)(),h._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",h.html=o(h.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,h._tag)(),h.paragraph=o(h.paragraph)("hr",h.hr)("heading",h.heading)("lheading",h.lheading)("blockquote",h.blockquote)("tag","<"+h._tag)("def",h.def)(),h.normal=l({},h),h.gfm=l({},h.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),h.gfm.paragraph=o(h.paragraph)("(?!","(?!"+h.gfm.fences.source.replace("\\1","\\2")+"|"+h.list.source.replace("\\1","\\3")+"|")(),h.tables=l({},h.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=h,t.lex=function(e,r){var i=new t(r);return i.lex(e)},t.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},t.prototype.token=function(t,e,r){for(var i,a,n,o,s,l,c,u,d,t=t.replace(/^ +$/gm,"");t;)if((n=this.rules.newline.exec(t))&&(t=t.substring(n[0].length),n[0].length>1&&this.tokens.push({type:"space"})),n=this.rules.code.exec(t))t=t.substring(n[0].length),n=n[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?n:n.replace(/\n+$/,"")});else if(n=this.rules.fences.exec(t))t=t.substring(n[0].length),this.tokens.push({type:"code",lang:n[2],text:n[3]||""});else if(n=this.rules.heading.exec(t))t=t.substring(n[0].length),this.tokens.push({type:"heading",depth:n[1].length,text:n[2]});else if(e&&(n=this.rules.nptable.exec(t))){for(t=t.substring(n[0].length),l={type:"table",header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3].replace(/\n$/,"").split("\n")},u=0;u<l.align.length;u++)/^ *-+: *$/.test(l.align[u])?l.align[u]="right":/^ *:-+: *$/.test(l.align[u])?l.align[u]="center":/^ *:-+ *$/.test(l.align[u])?l.align[u]="left":l.align[u]=null;for(u=0;u<l.cells.length;u++)l.cells[u]=l.cells[u].split(/ *\| */);this.tokens.push(l)}else if(n=this.rules.lheading.exec(t))t=t.substring(n[0].length),this.tokens.push({type:"heading",depth:"="===n[2]?1:2,text:n[1]});else if(n=this.rules.hr.exec(t))t=t.substring(n[0].length),this.tokens.push({type:"hr"});else if(n=this.rules.blockquote.exec(t))t=t.substring(n[0].length),this.tokens.push({type:"blockquote_start"}),n=n[0].replace(/^ *> ?/gm,""),this.token(n,e,!0),this.tokens.push({type:"blockquote_end"});else if(n=this.rules.list.exec(t)){for(t=t.substring(n[0].length),o=n[2],this.tokens.push({type:"list_start",ordered:o.length>1}),n=n[0].match(this.rules.item),i=!1,d=n.length,u=0;d>u;u++)l=n[u],c=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),~l.indexOf("\n ")&&(c-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&u!==d-1&&(s=h.bullet.exec(n[u+1])[0],o===s||o.length>1&&s.length>1||(t=n.slice(u+1).join("\n")+t,u=d-1)),a=i||/\n\n(?!\s*$)/.test(l),u!==d-1&&(i="\n"===l.charAt(l.length-1),a||(a=i)),this.tokens.push({type:a?"loose_item_start":"list_item_start"}),this.token(l,!1,r),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(n=this.rules.html.exec(t))t=t.substring(n[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===n[1]||"script"===n[1]||"style"===n[1]),text:n[0]});else if(!r&&e&&(n=this.rules.def.exec(t)))t=t.substring(n[0].length),this.tokens.links[n[1].toLowerCase()]={href:n[2],title:n[3]};else if(e&&(n=this.rules.table.exec(t))){for(t=t.substring(n[0].length),l={type:"table",header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3].replace(/(?: *\| *)?\n$/,"").split("\n")},u=0;u<l.align.length;u++)/^ *-+: *$/.test(l.align[u])?l.align[u]="right":/^ *:-+: *$/.test(l.align[u])?l.align[u]="center":/^ *:-+ *$/.test(l.align[u])?l.align[u]="left":l.align[u]=null;for(u=0;u<l.cells.length;u++)l.cells[u]=l.cells[u].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(e&&(n=this.rules.paragraph.exec(t)))t=t.substring(n[0].length),this.tokens.push({type:"paragraph",text:"\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1]});else if(n=this.rules.text.exec(t))t=t.substring(n[0].length),this.tokens.push({type:"text",text:n[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var u={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:s,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:s,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};u._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,u._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,u.link=o(u.link)("inside",u._inside)("href",u._href)(),u.reflink=o(u.reflink)("inside",u._inside)(),u.normal=l({},u),u.pedantic=l({},u.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),u.gfm=l({},u.normal,{escape:o(u.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:o(u.text)("]|","~]|")("|","|https?://|")()}),u.breaks=l({},u.gfm,{br:o(u.br)("{2,}","*")(),text:o(u.gfm.text)("{2,}","*")()}),e.rules=u,e.output=function(t,r,i){var a=new e(r,i);return a.output(t)},e.prototype.output=function(t){for(var e,r,i,n,o="";t;)if(n=this.rules.escape.exec(t))t=t.substring(n[0].length),o+=n[1];else if(n=this.rules.autolink.exec(t))t=t.substring(n[0].length),"@"===n[2]?(r=":"===n[1].charAt(6)?this.mangle(n[1].substring(7)):this.mangle(n[1]),i=this.mangle("mailto:")+r):(r=a(n[1]),i=r),o+=this.renderer.link(i,null,r);else if(this.inLink||!(n=this.rules.url.exec(t))){if(n=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(n[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(n[0])&&(this.inLink=!1),t=t.substring(n[0].length),o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):a(n[0]):n[0];else if(n=this.rules.link.exec(t))t=t.substring(n[0].length),this.inLink=!0,o+=this.outputLink(n,{href:n[2],title:n[3]}),this.inLink=!1;else if((n=this.rules.reflink.exec(t))||(n=this.rules.nolink.exec(t))){if(t=t.substring(n[0].length),e=(n[2]||n[1]).replace(/\s+/g," "),e=this.links[e.toLowerCase()],!e||!e.href){o+=n[0].charAt(0),t=n[0].substring(1)+t;continue}this.inLink=!0,o+=this.outputLink(n,e),this.inLink=!1}else if(n=this.rules.strong.exec(t))t=t.substring(n[0].length),o+=this.renderer.strong(this.output(n[2]||n[1]));else if(n=this.rules.em.exec(t))t=t.substring(n[0].length),o+=this.renderer.em(this.output(n[2]||n[1]));else if(n=this.rules.code.exec(t))t=t.substring(n[0].length),o+=this.renderer.codespan(a(n[2],!0));else if(n=this.rules.br.exec(t))t=t.substring(n[0].length),o+=this.renderer.br();else if(n=this.rules.del.exec(t))t=t.substring(n[0].length),o+=this.renderer.del(this.output(n[1]));else if(n=this.rules.text.exec(t))t=t.substring(n[0].length),o+=this.renderer.text(a(this.smartypants(n[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else t=t.substring(n[0].length),r=a(n[1]),i=r,o+=this.renderer.link(i,null,r);return o},e.prototype.outputLink=function(t,e){var r=a(e.href),i=e.title?a(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(r,i,this.output(t[1])):this.renderer.image(r,i,a(t[1]))},e.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):t},e.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,r="",i=t.length,a=0;i>a;a++)e=t.charCodeAt(a),Math.random()>.5&&(e="x"+e.toString(16)),r+="&#"+e+";";return r},r.prototype.code=function(t,e,r){if(this.options.highlight){var i=this.options.highlight(t,e);null!=i&&i!==t&&(r=!0,t=i)}return e?'<pre><code class="'+this.options.langPrefix+a(e,!0)+'">'+(r?t:a(t,!0))+"\n</code></pre>\n":"<pre><code>"+(r?t:a(t,!0))+"\n</code></pre>"},r.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},r.prototype.html=function(t){return t},r.prototype.heading=function(t,e,r){return"<h"+e+' id="'+this.options.headerPrefix+r.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},r.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},r.prototype.list=function(t,e){var r=e?"ol":"ul";return"<"+r+">\n"+t+"</"+r+">\n"},r.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},r.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},r.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},r.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},r.prototype.tablecell=function(t,e){var r=e.header?"th":"td",i=e.align?"<"+r+' style="text-align:'+e.align+'">':"<"+r+">";return i+t+"</"+r+">\n"},r.prototype.strong=function(t){return"<strong>"+t+"</strong>"},r.prototype.em=function(t){return"<em>"+t+"</em>"},r.prototype.codespan=function(t){return"<code>"+t+"</code>"},r.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},r.prototype.del=function(t){return"<del>"+t+"</del>"},r.prototype.link=function(t,e,r){if(this.options.sanitize){try{var i=decodeURIComponent(n(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(a){return""}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:"))return""}var o='<a href="'+t+'"';return e&&(o+=' title="'+e+'"'),o+=">"+r+"</a>"},r.prototype.image=function(t,e,r){var i='<img src="'+t+'" alt="'+r+'"';return e&&(i+=' title="'+e+'"'),i+=this.options.xhtml?"/>":">"},r.prototype.text=function(t){return t},i.parse=function(t,e,r){var a=new i(e,r);return a.parse(t)},i.prototype.parse=function(t){this.inline=new e(t.links,this.options,this.renderer),this.tokens=t.reverse();for(var r="";this.next();)r+=this.tok();return r},i.prototype.next=function(){return this.token=this.tokens.pop()},i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},i.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,r,i,a,n="",o="";for(r="",t=0;t<this.token.header.length;t++)i={header:!0,align:this.token.align[t]},r+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(n+=this.renderer.tablerow(r),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],r="",a=0;a<e.length;a++)r+=this.renderer.tablecell(this.inline.output(e[a]),{header:!1,align:this.token.align[a]});o+=this.renderer.tablerow(r)}return this.renderer.table(n,o);case"blockquote_start":for(var o="";"blockquote_end"!==this.next().type;)o+=this.tok();return this.renderer.blockquote(o);case"list_start":for(var o="",s=this.token.ordered;"list_end"!==this.next().type;)o+=this.tok();return this.renderer.list(o,s);case"list_item_start":for(var o="";"list_item_end"!==this.next().type;)o+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(o);case"loose_item_start":for(var o="";"list_item_end"!==this.next().type;)o+=this.tok();return this.renderer.listitem(o);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},s.exec=s,c.options=c.setOptions=function(t){return l(c.defaults,t),c},c.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new r,xhtml:!1},c.Parser=i,c.parser=i.parse,c.Renderer=r,c.Lexer=t,c.lexer=t.lex,c.InlineLexer=e,c.inlineLexer=e.output,c.parse=c,LAY.markdown=c}(),function(){"use strict";LAY.prop=function(t,e,r){}}(),function(){"use strict";LAY.rgb=function(t,e,r){return LAY.rgba(t,e,r,1)}}(),function(){"use strict";function t(t,e,r,i){return new LAY.Color("rgb",{r:t,g:e,b:r},i)}LAY.rgba=function(e,r,i,a){return e instanceof LAY.Take||r instanceof LAY.Take||i instanceof LAY.Take||a instanceof LAY.Take?new LAY.Take(t).fn(e,r,i,a):new LAY.Color("rgb",{r:e,g:r,b:i},a)}}(),function(){"use strict";function t(){var t=LAY.take("","width").half(),e=LAY.take("","height").half();LAY.$miscPosAttr2take={centerX:LAY.take("","left").add(t),centerY:LAY.take("","top").add(e),$midpointX:t,$midpointY:e,$absoluteLeft:LAY.take("../","$absoluteLeft").add(LAY.take("","left")),$absoluteTop:LAY.take("../","$absoluteTop").add(LAY.take("","top"))},LAY.$essentialPosAttr2take={right:LAY.take("","left").add(LAY.take("","width")),bottom:LAY.take("","top").add(LAY.take("","height"))},LAY.$emptyAttrVal=new LAY.AttrVal("",void 0),LAY.$formationDisplayNoneState={onlyif:LAY.take("","$f").eq(-1),props:{display:!1}}}function e(){var t=LAY.$pathName2level["/"];t.$changeAttrVal("$windowWidth",window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth),t.$changeAttrVal("$windowHeight",window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)}LAY.run=function(r){LAY.$normalize(r),t(),new LAY.Level("",r,void 0),LAY.$solve(),window.onresize=e}}(),function(){"use strict";LAY.take=function(t,e){return void 0!==e&&LAY.$checkIsValidUtils.checkIsAttrExpandable(e)?void LAY.$error("takes using expander props such as '"+t+"' are not permitted."):new LAY.Take(t,e)}}(),function(){"use strict";LAY.transparent=function(){return new LAY.Color("rgb",{r:0,g:0,b:0},0)}}(),function(){"use strict";LAY.unclog=function(){0===--LAY.$numClog&&LAY.$solve()}}(),function(){"use strict";LAY.$arrayUtils={pushUnique:function(t,e){return-1===t.indexOf(e)?(t.push(e),!0):!1},prependUnique:function(t,e){LAY.$arrayUtils.remove(t,e),t.unshift(e)},remove:function(t,e){var r=t.indexOf(e);return-1!==r?(t.splice(r,1),!0):!1},removeAtIndex:function(t,e){t.splice(e,1)},cloneSingleLevel:function(t){return t.slice(0)},swap:function(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}}}(),function(){"use strict";LAY.$capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}(),function(){"use strict";var t=["$hovering","$clicking"];LAY.$checkIfDoingReadonly=function(e){return-1!==t.indexOf(e)}}(),function(){"use strict";var t=["$naturalWidth","$naturalHeight","$scrolledX","$scrolledY","$focused","$input","$hash","$pathname","$host","$href"];LAY.$checkIfImmidiateReadonly=function(e){return-1!==t.indexOf(e)}}(),function(){"use strict";function t(t){var e=["data","when","transition"],r=t.indexOf(".");if(-1===r)return t;var i=t.slice(0,r);return-1!==e.indexOf(i)?t:t.slice(r+1)}function e(t){return!/\.|\/|\~|\:|\@|\#|\^/.test(t)}var r=["root","transition","data","when","onlyif","states","exist","css","","many","formation","formationDisplayNone","sort","fargs","rows","row","filter","args","view","page","extfonts","type","obdurate"];LAY.$checkIsValidUtils={levelName:function(t){return e(t)&&-1===r.indexOf(t)},stateName:function(t){return e(t)&&(-1===r.indexOf(t)||"root"===t)},checkIsAttrExpandable:function(t){return this.checkIsNonPropAttrExpandable(t)||this.checkIsPropAttrExpandable(t)},checkIsNonPropAttrExpandable:function(e){var r=["data","when","transition","states","fargs","sort"],i=/(^sort\.\d+$)|(^fargs\.[a-zA-Z]+$)|(^transition\.[a-zA-Z]+$)|(^transition\.[a-zA-Z]+\.args$)|(^when\.[a-zA-Z]+$)/,a=t(e);return-1!==r.indexOf(a)||i.test(a)},checkIsPropAttrExpandable:function(e){var r=["border","background","boxShadows","textShadows","videos","audios","videoTracks","audioTracks","filters","borderTop","borderRight","borderBottom","borderLeft"],i=/(^boxShadows\d+$)|(^textShadows\d+$)|(^videos\d+$)|(^audios\d+$)|(^videoTracks\d+$)|(^audioTracks\d+$)|(^filters\d+$)|(^filters\d+DropShadow$)/,a=t(e);return-1!==r.indexOf(a)||i.test(a)},propAttr:function(t){return-1===t.indexOf(".")&&"$"!==t.charAt(0)&&-1===r.indexOf(t)},nan:function(t){return"number"==typeof val&&val!==+val}}}(),function(){"use strict";LAY.$checkIsWindowEvent=function(t){return-1!==["beforeunload","blur","error","focus","focusin","focusout","hashchange","load","message","offline","online","orientationchange","pagehide","pageshow","popstate","resize","scroll","storage","unload","webkitmouseforcechanged","webkitmouseforcedown","webkitmouseforceup","webkitmouseforcewillbegin","webkitwillrevealbottom","webkitwillrevealleft","webkitwillrevealright","webkitwillrevealtop"].indexOf(t)}}(),function(){"use strict";LAY.$clearDataTravellingAttrVals=function(){var t,e,r,i,a,n,o=LAY.$renderDirtyPartS;for(t=0;t<o.length;t++)for(i=o[t],a=i.travelRenderDirtyAttrValS,e=0,r=a.length;r>e;e++)n=a[0],n.renderCall?(n.startCalcVal=n.transCalcVal,i.addNormalRenderDirtyAttrVal(n)):LAY.$arrayUtils.remove(a,n)}}(),function(){"use strict";function t(t){return Object.prototype.toString.call(t)}var e={isArray:function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===t(e)},isDate:function(e){return"object"==typeof e&&"[object Date]"===t(e)},isRegExp:function(e){return"object"==typeof e&&"[object RegExp]"===t(e)},getRegExpFlags:function(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}};LAY.$clone=function(t){function r(t,o){if(null===t)return null;if(0===o)return t;var s,l;if("object"!=typeof t||t instanceof LAY.Level||t instanceof LAY.Take)return t;if(t instanceof LAY.Color)return t.copy();if(e.isArray(t)?s=[]:e.isRegExp(t)?(s=new RegExp(t.source,e.getRegExpFlags(t)),t.lastIndex&&(s.lastIndex=t.lastIndex)):e.isDate(t)?s=new Date(t.getTime()):(l=Object.getPrototypeOf(t),s=Object.create(l)),n){var c=i.indexOf(t);if(-1!=c)return a[c];i.push(t),a.push(s)}for(var h in t){var u;l&&(u=Object.getOwnPropertyDescriptor(l,h)),u&&null===u.set||(s[h]=r(t[h],o-1))}return s}if("object"!=typeof t||t instanceof LAY.Level||t instanceof LAY.Take||t instanceof Node)return t;var i=[],a=[],n=!0,o=1/0;return r(t,o)}}(),function(){"use strict";LAY.$customPropUtils={create:function(t,e,r){},checkIsAssociatedWithCustomProp:function(t){},getFnOfCustomProp:function(t){}}}(),function(){"use strict";var t;LAY.$defaultizeManyLson=function(e){var r,i=e.states.root;e.rows=e.rows||[];for(r in t)void 0===i[r]&&(i[r]=t[r])},t={filter:new LAY.Take("","rows"),sort:[],formation:"vertical",fargs:{}}}(),function(){"use strict";LAY.$defaultizePartLson=function(t,e){var r,i,a,n,o,s,l,c,h,u,d,p,f=t.states.root,g=f.props,v=f.when,A=f.transition,L=t.states,y=void 0===e,b=LAY.take("","$windowWidth"),m=LAY.take("","$windowHeight"),x=LAY.take("","$naturalWidth"),Y=LAY.take("","$naturalHeight");LAY.take("../","width");for(i in L){a=L[i],r=a.props,o=a.when,s=a.transition,l=a.$$max;for(n in r)y&&(r.top||r.left||r.width||r.height)&&LAY.$error("Cannot set top/left/width/height of root Level"),void 0===g[n]&&(d=LAY.$getLazyPropVal(n,y,"input:lines"===t.$type),void 0!==d&&(g[n]=d))}for(c in l)t.$$max=t.$$max||{},t.$$max[c]||(t.$$max[l]=l[c]);for(h in o)v[h]||(v[h]=[]);for(u in A)A[u]||(A[u]={});if(!y){p=e.lson.states.root.props;for(n in p)void 0===g[n]&&-1!==LAY.$inheritablePropS.indexOf(n)&&(g[n]=LAY.$getLazyPropVal(n))}void 0===g.text||void 0!==t.$type&&"none"!==t.$type?void 0!==g.html?t.$type="html":void 0!==g.image?t.$type="image":void 0!==g.video||void 0!==g.videos?t.$type="video":void 0!==g.audio||void 0!==g.audios?t.$type="audio":void 0!==g.iframe?t.$type="iframe":void 0===t.$type&&(t.$type="none"):t.$type="text",void 0===g.left&&(g.left=0),void 0===g.top&&(g.top=0),y?(g.width=b,g.height=m):(void 0===g.width&&(g.width=x),void 0===g.height&&(g.height=Y))}}(),function(){"use strict";LAY.$error=function(t){throw t="LAY ERROR: "+t,alert(t),t}}(),function(){"use strict";var t={$hovering:{mouseover:function(){this.$changeAttrVal("$hovering",!0)},mouseout:function(){this.$changeAttrVal("$hovering",!1)}},$clicking:{mousedown:function(){this.$changeAttrVal("$clicking",!0)},touchdown:function(){this.$changeAttrVal("$clicking",!0)},mouseup:function(){this.$changeAttrVal("$clicking",!1)},mouseleave:function(){this.$changeAttrVal("$clicking",!1)},touchup:function(){this.$changeAttrVal("$clicking",!1)}},$focused:{focus:function(){this.$requestRecalculation("$focused")},blur:function(){this.$requestRecalculation("$focused")}},$scrolledX:{scroll:function(){this.$requestRecalculation("$scrolledX")}},$scrolledY:{scroll:function(){this.$requestRecalculation("$scrolledY")}},$cursorX:{mousemove:function(t){this.$changeAttrVal("$cursorX",t.clientX)}},$cursorY:{mousemove:function(t){this.$changeAttrVal("$cursorY",t.clientY)}},$hash:{hashchange:function(){this.$requestRecalculation("$hash")}},$pathname:{popstate:function(){this.$requestRecalculation("$pathname")}},$href:{popstate:function(){this.$requestRecalculation("$href")}},$host:{popstate:function(){this.$requestRecalculation("$host")}},$input:{click:function(){("lines"===this.part.inputType||"line"===this.part.inputType)&&this.$requestRecalculation("$input")},change:function(){this.$requestRecalculation("$input")},keyup:function(){("lines"===this.part.inputType||"line"===this.part.inputType)&&this.$requestRecalculation("$input")}}};LAY.$eventReadonlyUtils={checkIsEventReadonlyAttr:function(e){return void 0!==t[e]},getEventType2fnHandler:function(e){return t[e]}}}(),function(){"use strict";function t(t){var r=!0;t=t||e(((this.ownerDocument||this.document||this).parentWindow||window).event);for(var i=this.events[t.type],a=0,n=i.length;n>a;a++)this.$$handleEvent=i[a],this.$$handleEvent(t)===!1&&(r=!1);return r}function e(t){return t.preventDefault=r,t.stopPropagation=i,t}function r(){this.returnValue=!1}function i(){this.cancelBubble=!0}LAY.$eventUtils={add:function(e,r,i){if(e.addEventListener)e.addEventListener(r,i,!1);else{e.events||(e.events={});var a=e.events[r];a||(a=e.events[r]=[],e["on"+r]&&a.push(e["on"+r])),a.push(i),e["on"+r]=t}},remove:function(t,e,r){if(t.removeEventListener)t.removeEventListener(e,r,!1);else if(t.events&&t.events[e]){var i=t.events[e];LAY.$arrayUtils.remove(i,r)}}}}(),function(){"use strict";function t(t,e){for(var r,i=[],a=0,n=e.length;n>a;a++)r=e[a],t(r)&&i.push(r);return i}LAY.$filterUtils={eq:function(e,r,i){return t(function(t){return t[r]===i},e)},neq:function(e,r,i){return t(function(t){return t[r]!==i},e)},gt:function(e,r,i){return t(function(t){return t[r]>i},e)},gte:function(e,r,i){return t(function(t){return t[r]>=i},e)},lt:function(e,r,i){return t(function(t){return t[r]<i},e)},lte:function(e,r,i){return t(function(t){return t[r]<=i},e)},regex:function(e,r,i){return t(function(t){return i.test(t[r])},e)},contains:function(e,r,i){return t(function(t){return-1!==t[r].indexOf(i)},e)},within:function(e,r,i){return t(function(t){return-1!==i.indexOf(t[r])},e)},fn:function(e,r){return t(r,e)}}}(),function(){"use strict";var t=/^([a-zA-Z]+)(\d+)/;LAY.$findMultipleTypePropMatchDetails=function(e){return e.match(t)}}(),function(){"use strict";var t={z:"transform",scaleX:"transform",scaleY:"transform",scaleZ:"transform",rotateX:"transform",rotateY:"transform",rotateZ:"transform",skewX:"transform",skewY:"transform",left:"x",shiftX:"x",top:"y",shiftY:"y",originX:"origin",originY:"origin",originZ:"origin",overflowX:"overflow",overflowY:"overflow",backgroundSizeX:"backgroundPosition",backgroundSizeY:"backgroundSize"};LAY.$findRenderCall=function(e,r){if(r.isHelper)return"";if(LAY.$checkIsValidUtils.propAttr(e)&&-1===["centerX","right","centerY","bottom"].indexOf(e)&&!LAY.$shorthandPropsUtils.checkIsDecentralizedShorthandProp(e)){var i=LAY.$findMultipleTypePropMatchDetails(e);if(i)return i[1];var a=t[e];if(void 0!==a)return!r.isGpu||"x"!==a&&"y"!==a&&"transform"!==a?a:"positionAndTransform";if(!e.startsWith("text")||r.part&&"none"!==r.part.type)return e}}}(),function(){"use strict";function t(t,e,r){for(var i=0,a=r.length;a>i;i++)e=t(r[i],e);return e}LAY.$foldUtils={min:function(e){return t(function(t,e){return void 0===e||e>t?t:e},void 0,e)},max:function(e){return t(function(t,e){return void 0===e||t>e?t:e},void 0,e)},sum:function(e){return t(function(t,e){return e+t},0,e)},fn:function(e,r,i){return t(r,i,e)}}}(),function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}var e=function(){var e=function(e){var r=function(t){return new Array(t)};switch(!0){case/^#\{(\w+)\}*$/.test(e):this.formatter=function(t,e){return t.replace("#{"+RegExp.$1+"}",e[RegExp.$1])};break;case/^([ds])$/.test(e):this.formatter=function(r,i){if("d"===RegExp.$1&&!t(i))throw new TypeError;return r.replace("%"+e,i)};break;case/^(o)$/.test(e):this.formatter=function(r,i){if(!t(i))throw new TypeError;return r.replace("%"+e,parseInt(i).toString(8))};break;case/^(b)$/.test(e):this.formatter=function(r,i){if(!t(i))throw new TypeError;return r.replace("%"+e,parseInt(i).toString(2))};break;case/^([xX])$/.test(e):this.formatter=function(r,i){if(!t(i))throw new TypeError;var a=parseInt(i).toString(16);return"X"===e&&(a=a.toUpperCase()),r.replace("%"+e,a)};break;case/^(c)$/.test(e):this.formatter=function(r,i){if(!t(i))throw new TypeError;return r.replace("%"+e,String.fromCharCode(i))};break;case/^(u)$/.test(e):this.formatter=function(r,i){if(!t(i))throw new TypeError;return r.replace("%"+e,parseInt(i,10)>>>0)};break;case/^(-?)(\d*).?(\d?)(e)$/.test(e):this.formatter=function(i,a){if(!t(a))throw new TypeError;var n,o,s,l="-"===RegExp.$1,c=RegExp.$2,h=""!==RegExp.$3?RegExp.$3:void 0,u=a.toExponential(h);return""!==c&&(void 0!==h?(s=c-u.length,s>=0&&(u=l?u+r(s+1).join(" "):r(s+1).join(" ")+u)):(n=u.split("e")[0],o="e"+u.split("e")[1],s=c-(n.length+o.length),u=s>=0?n+r(s+1).join("0")+o:n.slice(0,s)+o)),i.replace("%"+e,u)};break;case/^(-?)(\d*).?(\d?)(f)$/.test(e):this.formatter=function(i,a){if(!t(a))throw new TypeError;var n,o,s="-"===RegExp.$1,l=RegExp.$2,c=RegExp.$3,h=".".length,u=a>0?Math.floor(a):Math.ceil(a),d=parseFloat(a).toFixed(""!==c?c:6);return""!==l&&(""!==c?(n=u.toString().length+h+parseInt(c,10),o=l-n,d=s?parseFloat(a).toFixed(c)+r(o+1).join(" "):r(o+1).join(" ")+parseFloat(a).toFixed(c)):d=parseFloat(a).toFixed(l-(u.toString().length+h))),i.replace("%"+e,d)};break;case/^([0\-]?)(\d+)d$/.test(e):this.formatter=function(i,a){if(!t(a))throw new TypeError;var n=RegExp.$2-a.toString().length,o="";switch(0>n&&(n=0),RegExp.$1){case"":o=(r(n+1).join(" ")+a).slice(-RegExp.$2);break;case"-":o=(a+r(n+1).join(" ")).slice(-RegExp.$2);break;case"0":o=(r(n+1).join("0")+a).slice(-RegExp.$2)}return i.replace("%"+e,o)};break;case/^(-?)(\d)s$/.test(e):this.formatter=function(t,i){var a=RegExp.$2-i.toString().length,n="";switch(0>a&&(a=0),RegExp.$1){case"":n=(r(a+1).join(" ")+i).slice(-RegExp.$2);break;case"-":n=(i+r(a+1).join(" ")).slice(-RegExp.$2)}return t.replace("%"+e,n)};break;case/^(-?\d?)\.(\d)s$/.test(e):this.formatter=function(t,i){var a,n,o="";return""===RegExp.$1?o=i.slice(0,RegExp.$2):(i=i.slice(0,RegExp.$2),a=Math.abs(RegExp.$1),n=a-i.toString().length,o=-1!==RegExp.$1.indexOf("-")?(i+r(n+1).join(" ")).slice(-a):(r(n+1).join(" ")+i).slice(-a)),t.replace("%"+e,o)};break;default:this.formatter=function(t,e){return t}}};return e.prototype={format:function(t,e){return this.formatter.call(this,t,e)}},e}();LAY.$format=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),r=t[0];if(2===t.length&&"object"===LAY.$type(t[1])){var i=t[1];for(var a in i){var n=i[a];i[a]=n instanceof LAY.Color?n.stringify():n}for(var a in i){var n=i[a];r.match(/(#\{\w+\})/)&&(r=new e(RegExp.$1).format(r,i))}}else for(var o=1;o<t.length;o++){var n=t[o];r.match(/%([.#0-9\-]*[bcdefosuxX])/)&&(n=n instanceof LAY.Color?n.stringify():n,r=new e(RegExp.$1).format(r,n))}return r}}(),function(){"use strict";LAY.$formation2fargs={vertical:{gap:0},horizontal:{gap:0},grid:{columns:null,hgap:0,vgap:0},none:{},circular:{radius:null}}}(),function(){"use strict";LAY.$formation2fn={none:function(t,e,r,i){return[void 0,void 0]},vertical:function(t,e,r,i){return[void 0,0===i.gap?LAY.take(r[t-2].path(),"bottom"):LAY.take(r[t-2].path(),"bottom").add(i.gap)]},horizontal:function(t,e,r,i){return[0===i.gap?LAY.take(r[t-2].path(),"right"):LAY.take(r[t-2].path(),"right").add(i.gap),void 0]},grid:function(t,e,r,i){var a,n,o=i.columns,s=i.vgap,l=i.hgap;return a=t>o&&(t%o===1||1===o)?LAY.take(r[0].path(),"left"):LAY.take(r[t-2].path(),"right").add(l),n=o>=t?void 0:LAY.take(r[t-o-1].path(),"bottom").add(s),[a,n]},circular:function(t,e,r,i){var a=(t-1)*(360/r.length)-90,n=r[0].path(),o=LAY.take(n,"centerX"),s=LAY.take(n,"centerY").add(i.radius),l=Math.PI/180,c=i.radius*Math.cos(a*l),h=i.radius*Math.sin(a*l);return[o.add(c).minus(LAY.take("","width").half()),s.add(h).minus(LAY.take("","height").half())]}}}(),function(){"use strict";LAY.$generateColorMix=function(t,e,r){var i=t.getRgba(),a=e.getRgba();return new LAY.Color("rgb",{r:Math.round(i.r+r*(a.r-i.r)),g:Math.round(i.g+r*(a.g-i.g)),b:Math.round(i.b+r*(a.b-i.b))},i.a+r*(a.a-i.a))}}(),function(){"use strict";var t={userSelect:"auto",cursor:"auto",textSize:15,textFamily:"sans-serif",textWeight:"normal",textColor:LAY.color("black"),textVariant:"normal",textTransform:"none",textStyle:"normal",textLetterSpacing:0,textWordSpacing:0,textAlign:"left",textDirection:"ltr",textLineHeight:1.3,textIndent:0,textWrap:"nowrap",textWordBreak:"normal",textWordWrap:"normal",textSmoothing:"antialiased",textRendering:"auto"},e={userSelect:LAY.take("../","userSelect"),cursor:LAY.take("../","cursor"),textSize:LAY.take("../","textSize"),textFamily:LAY.take("../","textFamily"),textWeight:LAY.take("../","textWeight"),textColor:LAY.take("../","textColor"),textVariant:LAY.take("../","textVariant"),textTransform:LAY.take("../","textTransform"),textStyle:LAY.take("../","textStyle"),textLetterSpacing:LAY.take("../","textLetterSpacing"),textWordSpacing:LAY.take("../","textWordSpacing"),textAlign:LAY.take("../","textAlign"),textDirection:LAY.take("../","textDirection"),textLineHeight:LAY.take("../","textLineHeight"),textIndent:LAY.take("../","textIndent"),textWrap:LAY.take("../","textWrap"),textWordBreak:LAY.take("../","textWordBreak"),textWordWrap:LAY.take("../","textWordWrap"),textSmoothing:LAY.take("../","textSmoothing"),textRendering:LAY.take("../","textRendering")},r={display:!0,visible:!0,z:0,shiftX:0,shiftY:0,rotateX:0,rotateY:0,rotateZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,originX:.5,originY:.5,originZ:0,
perspective:0,perspectiveOriginX:.5,perspectiveOriginY:.5,backfaceVisibility:!1,opacity:1,zIndex:"auto",scrollX:0,scrollY:0,focus:!1,scrollElastic:!0,title:null,backgroundColor:LAY.transparent(),backgroundImage:"none",backgroundAttachment:"scroll",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,backgroundSizeX:"auto",backgroundSizeY:"auto",cornerRadiusTopLeft:0,cornerRadiusTopRight:0,cornerRadiusBottomLeft:0,cornerRadiusBottomRight:0,borderTopStyle:"none",borderBottomStyle:"none",borderRightStyle:"none",borderLeftStyle:"none",borderTopWidth:0,borderBottomWidth:0,borderRightWidth:0,borderLeftWidth:0,borderTopColor:LAY.transparent(),borderBottomColor:LAY.transparent(),borderRightColor:LAY.transparent(),borderLeftColor:LAY.transparent(),html:"",text:"",textOverflow:"clip",textDecoration:"none",textPaddingTop:0,textPaddingRight:0,textPaddingBottom:0,textPaddingLeft:0,input:"",inputLabel:"",inputPlaceholder:"",inputAccept:"",inputAutocomplete:!1,inputAutocorrect:!0,inputDisabled:!1,image:null,imageAlt:null,link:null,iframe:null,videoAutoplay:!1,videoController:!0,videoCrossorigin:"anonymous",videoLoop:!1,videoMuted:!1,videoPreload:"auto",videoPoster:null,audioController:!0,audioLoop:!1,audioMuted:!1,audioPreload:"auto",audioVolume:1};LAY.$getLazyPropVal=function(i,a,n){if(n&&"textWrap"===i)return"pre-wrap";var o=r[i];return void 0!==o?o:a?t[i]:e[i]}}(),function(){"use strict";function t(t,e,r,i){var a,n,o,s=e[i],l=t[r];if(void 0!==s&&(void 0===l&&(l=t[r]={}),l.type=s.type||l.type,l.duration=s.duration||l.duration,l.delay=s.delay||l.delay,l.done=s.done||l.done,a=s.args,n=l.args,void 0!==a)){void 0===n&&(n=l.args={});for(o in a)n[o]=a[o]}}function e(t){return"object"==typeof t}function r(t,r,i,a){var n,o,s,l;n=r[i],o=t[i],void 0===o&&(o=t[i]={});for(s in n)l=n[s],o[s]=a&&e(l)?LAY.$clone(l):l}function i(t,e,r){var i=t[r],a=e[r];a&&(i||(i=t[r]=[]),t[r]=i.concat(a))}LAY.$inherit=function(t,e,r,i,n){if(r)n||(t.onlyif=e.onlyif||t.onlyif,t.install=e.install||t.install,t.uninstall=e.uninstall||t.uninstall),i?(t.formation=e.formation||t.formation,t.filter=e.filter||t.filter,a.fargs(t,e),t.sort=e.sort||t.sort,a.$load(t,e)):(void 0!==e.props&&a.props(t,e),void 0!==e.when&&a.when(t,e),void 0!==e.transition&&a.transition(t,e),void 0!==e.$$max&&a.$$max(t,e));else for(var o in e)e[o]&&(a[o]?a[o](t,e,i):t[o]=e[o])};var a={$load:function(t,e){i(t,e,"$load")},$extfonts:function(){i(intoLson,fromLson,"$extfonts")},data:function(t,e){r(t,e,"data")},props:function(t,e){r(t,e,"props")},transition:function(e,r){var i,a,n=r.transition,o=e.transition,s={};if(void 0===o&&(o=e.transition={}),n.all)for(a in o)"all"!==o&&t(o,n,a,"all");for(i in n)t(o,n,i,i);if(o.all)for(a in o)"all"!==a&&(s[a]={},t(s,o,a,"all"),t(s,o,a,a),o[a]=s[a])},many:function(t,e){void 0===t.many&&(t.many={}),LAY.$inherit(t.many,e.many,!1,!0,!1)},rows:function(t,r){var i,a=t.rows,n=r.rows;if(n)if(n instanceof LAY.Take)t.rows=n;else{t.rows=new Array(n.length),a=t.rows;for(var o=0,s=n.length;s>o;o++)i=n[o],a[o]=e(i)?LAY.$clone(i):i}},fargs:function(t,e){var i,a=t.fargs,n=e.fargs;if(n){a||(a=t.fargs={});for(i in n)a[i]||(a[i]={}),r(a,n,i)}},children:function(t,e){var r,i;r=e.children,i=t.children,void 0===i&&(i=t.children={});for(var a in r)void 0===i[a]&&(i[a]={}),LAY.$inherit(i[a],r[a],!1,!1,!1)},states:function(t,e,r){var i=e.states,a=t.states;void 0===a&&(a=t.states={});for(var n in i)a[n]||(a[n]={}),LAY.$inherit(a[n],i[n],!0,r,!1)},when:function(t,e){var r,i,a,n=e.when,o=t.when;void 0===o&&(o=t.when={});for(a in n)r=n[a],i=o[a],void 0===i?o[a]=LAY.$arrayUtils.cloneSingleLevel(r):o[a]=i.concat(r),LAY.$meta.set(t,"num","when."+a,o[a].length)},$$max:function(t,e){LAY.$meta.inherit.$$max(t,e)}}}(),function(){"use strict";LAY.$inheritablePropS=["textSize","textFamily","textWeight","textColor","textVariant","textTransform","textStyle","textLetterSpacing","textWordSpacing","textAlign","textDirection","textLineHeight","textIndent","textWrap","textWordBreak","textWordWrap","textSmoothing","textRendering","cursor","userSelect"]}(),function(){"use strict";LAY.$insertCSS=function(t,e){var r=document.createElement("style");r.setAttribute("type","text/css"),"textContent"in r?r.textContent=t:r.styleSheet.cssText=t;var i=document.getElementsByTagName("head")[0];e&&e.prepend?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}(),function(){"use strict";function t(t){var e=document.createElement("div");return e.style.position="absolute",e.style.visibility="hidden",e.style.top="-9999px",e.style.left="-9999px",e.style.fontFamily="'"+t+"', "+l,e.style.whiteSpace="nowrap",e.style.fontSize="32px",e.innerHTML=s,document.body.appendChild(e),e}function e(t){return t.offsetWidth}function r(t){document.body.removeChild(t)}function i(e){this.name=e,this.attempts=0,this.node=t(e),this["try"]()}function a(t,e){var r=t.childLevelS;if(r.length>0)for(var i=0;i<r.length;i++)a(r[i],e);else if(t&&t.part&&t.part.isText){var n=t.attr2attrVal.textFamily;n&&n.calcVal&&-1!==n.calcVal.indexOf(e)&&(t.part.updateNaturalWidth(),t.part.updateNaturalHeight(),LAY.$isNoTransition=!0,LAY.$solve())}}function n(){var t=LAY.$pathName2level;for(var e in t){var r=t[e];if(r&&r.part&&r.part.isText){var i=r.attr2attrVal.textFamily;if(i&&i.calcVal)for(var a=i.calcVal,n=0;n<u.length;n++)if(-1!==a.indexOf(u[n])){r.part.updateNaturalWidth(),r.part.updateNaturalHeight(),LAY.$isNoTransition=!0,LAY.$solve();break}}}}function o(){setTimeout(function(){n(),o()},20*Math.pow(2,h++))}var s="abcdefghijklmnopqrstuvwxyz1234567890 &#100;",l="serif,verdana,sans-serif",c=function(){var i=t(l),a=e(i);return r(i),a}();i.prototype["try"]=function(){var t=e(this.node);if(t!==c)r(this.node),a(LAY.level("/"),this.name,!1);else{var i=this;setTimeout(function(){i["try"]()},20*Math.pow(2,++this.attempts))}};var h=0,u=[];o(),LAY.$loadFonts=function(t){for(var e=0;e<t.length;e++){var r=t[e];LAY.$arrayUtils.pushUnique(u,r)}}}(),function(){"use strict";LAY.$mapUtils={key:function(t,e){for(var r=new Array(t.length),i=0,a=t.length;a>i;i++)r[i]=t[i][e];return r},fn:function(t,e){for(var r=new Array(t.length),i=0,a=t.length;a>i;i++)r[i]=e(t[i]);return r}}}(),function(){"use strict";LAY.$meta={set:function(t,e,r,i){var a="$$"+e;void 0===t[a]&&(t[a]={}),t[a][r]=i},get:function(t,e,r){var i="$$"+e;return void 0===t[i]?void 0:t[i][r]},inherit:{$$max:function(t,e){var r,i=e.$$max,a=t.$$max;void 0===a&&(a=t.$$max={});for(r in i)void 0===a[r]?a[r]=i[r]:a[r]=Math.max(a[r],i[r])}}}}(),function(){"use strict";function t(t){var e="";t.inherits||t.$inherits?LAY.$error("Did you mean '$inherit'?"):t.load?e="load":t.inherit?e="inherit":t.gpu?e="gpu":t.obdurate?e="obdurate":t.type?e="type":t.view?e="view":t.extfonts&&(e="extfonts"),e&&LAY.$error("Prefix readonly '"+e+"' with '$'")}function e(t){t.children=t.children||{};for(var e in t)d[e]||(t.children[e]=t[e],t[e]=void 0)}function r(t,e){e instanceof LAY.Take&&LAY.$error("takes for special/expander props such as '"+t+"' are not permitted.")}function i(t,e,a,n){var o,s,l;if(o=e[a],s=LAY.$type(o),"array"===s&&"input"!==a){for(var c=0,h=o.length;h>c;c++)l=n+(c+1),i(t,o,c,l);e[a]=void 0}else if("object"===s)for(var u in o)l=n+LAY.$capitalize(u),i(t,o,u,l),e[a]=void 0;else LAY.$checkIsValidUtils.checkIsPropAttrExpandable(n)&&r(n,o),t[n]=o}var a,n,o,s,l,c,h,u,d;a=function(t,e,r){return r/2+(t-e/2)},n=function(t,e,r){return r-(t+e)},o=new LAY.Take("","width"),s=new LAY.Take("","height"),l=new LAY.take("../","width"),c=new LAY.take("../","height"),h=new LAY.take("../","width").half().minus(new LAY.take("","width").half()),u=new LAY.take("../","height").half().minus(new LAY.take("","height").half()),LAY.$normalize=function(r){if(!r.$$normalized){r.states||(r.states={}),r.states.root&&LAY.$error("State name 'root' is reserved."),t(r),e(r),r.states.root={props:r.props,when:r.when,transition:r.transition};for(var i in r)r[i]&&"$$max"!==i&&(d[i]||LAY.$error("LSON key: '"+i+"' not found"),d[i](r));r.props=void 0,r.when=void 0,r.transition=void 0,r.$$normalized=!0}},d={$type:function(t){r("$type",t.$type)},$view:function(t){r("$view",t.$view)},$page:function(t){r("$page",t.$page)},$extfonts:function(t){r("$extfonts",t.$extfonts)},$inherit:function(t){t.$inherit instanceof Array||(t.$inherit=[t.$inherit]),r("$inherit",t.$inherit),void 0!==t.$inherit&&"array"!==LAY.$type(t.$inherit)&&(t.$inherit=[t.$inherit])},$obdurate:function(t){r("$obdurate",t.$obdurate)},$load:function(t){r("$load",t.$load),t.$load instanceof Array||(t.$load=[t.$load])},$gpu:function(t){r("$gpu",t.$gpu)},data:function(t){r("data",t.data)},exist:function(t){},css:function(t){},props:function(t){var e,d,p,f,g,v,A,L,y=t.props;void 0===t.props&&(y=t.props={}),r("props",t.props),void 0!==y.centerX&&(0===y.centerX?y.left=h:y.left=new LAY.Take(a).fn(y.centerX,o,l),y.centerX=void 0),void 0!==y.right&&(y.left=new LAY.Take(n).fn(y.right,o,l),y.right=void 0),void 0!==y.centerY&&(0===y.centerY?y.top=u:y.top=new LAY.Take(a).fn(y.centerY,s,c),y.centerY=void 0),void 0!==y.bottom&&(y.top=new LAY.Take(n).fn(y.bottom,s,c),y.bottom=void 0);for(e in y)i(y,y,e,e);for(e in y)if(d=LAY.$shorthandPropsUtils.getLonghandPropsDecenteralized(e),void 0!==d)for(f=y[e],A=0,L=d.length;L>A;A++)p=d[A],y[p]=void 0!==y[p]?y[p]:f;for(e in y)-1!==e.lastIndexOf("Color")&&"string"==typeof y[e]&&LAY.$error(e+"' must be LAY.color()/LAY.rgb()/LAY.rgba()/LAY.hsl()/LAY.hsla()"),g=LAY.$findMultipleTypePropMatchDetails(e),null!==g&&(v=LAY.$meta.get(t,"max",g[1]),(void 0===v||v<parseInt(g[2]))&&LAY.$meta.set(t,"max",g[1],parseInt(g[2])))},when:function(t){if(void 0===t.when)t.when={};else{r("when",t.when);var e=t.when;for(var i in e){var a=e[i];a instanceof Array||(a=e[i]=[a]),r("when."+i,a)}}},transition:function(t){if(void 0===t.transition)t.transition={};else{var e,i,a,n,o,s=t.transition;if(void 0!==s){r("transition",t.transition),void 0!==s.centerX&&(s.left=s.centerX),void 0!==s.right&&(s.left=s.right),void 0!==s.centerY&&(s.top=s.centerY),void 0!==s.bottom&&(s.top=s.bottom);for(e in s)if(-1!==e.indexOf(",")){for(var l=e.split(","),n=0,o=l.length;o>n;n++){var c=l[n].trim();s[c]=s[e]}s[e]=void 0}for(e in s)LAY.$checkIsValidUtils.checkIsPropAttrExpandable(e)&&LAY.$error("Transitions for special/expander props such as '"+name+"' are not permitted."),i=s[e],r("transition."+e,i),a=i.args,void 0!==a&&r("transition."+e+".args",a)}}},states:function(t,e){if(void 0!==t.states){var i,a=t.states;r("states",a);for(var n in a)LAY.$checkIsValidUtils.stateName(n)||LAY.$error("Invalid state name: "+n),i=a[n],r("states."+n,i),e?(d.fargs(i),d.sort(i)):(d.props(i),d.when(i),d.transition(i))}},children:function(t){if(void 0!==t.children){var e=t.children;r("children",e);for(var i in e)LAY.$normalize(e[i])}},many:function(t){if(void 0!==t.many){var e=t.many;r("many",e),e.states||(e.states={}),e.states.root={formation:e.formation,sort:e.sort,filter:e.filter,fargs:e.fargs},e.formation=void 0,e.sort=void 0,e.filter=void 0,e.fargs=void 0,d.states(e,!0),e.$load&&d.$load(e)}},fargs:function(t){if(t.fargs){var e,i=t.fargs;r("fargs",i);for(e in i)r("fargs."+e,i[e])}},sort:function(t){if(t.sort){var e,i,a=t.sort;for(r("sort",a),e=0,i=a.length;i>e;e++)r("sort."+e,a[e]),void 0===a[e].ascending&&(a[e].ascending=!0)}}}}(),function(){"use strict";void 0===Function.prototype.bind&&(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),r=this,i=function(){},a=function(){return r.apply(this instanceof i&&t?this:t,e.concat(1===arguments.length?[arguments[0]]:Array.apply(null,arguments)))};return i.prototype=this.prototype,a.prototype=new i,a})}(),function(){"use strict";void 0===window.console&&(window.console={error:function(){},log:function(){},info:function(){}})}(),function(){"use strict";if(void 0===window.performance&&(window.performance={}),void 0===window.performance.now){void 0===Date.now&&(Date.now=function(){return(new Date).getTime()});var t=Date.now();void 0!==performance.timing&&void 0!==performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-t}}}(),/*
http://paulirish.com/2011/requestanimationframe-for-smart-animating/
http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
requestAnimationFrame polyfill by Erik Mller. fixes from Paul Irish and Tino Zijdel
MIT license*/
function(){"use strict";for(var t=0,e=["ms","moz","webkit","o"],r=0;r<e.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[e[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[r]+"CancelAnimationFrame"]||window[e[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,r){var i=(new Date).getTime(),a=Math.max(0,16-(i-t)),n=window.setTimeout(function(){e(i+a)},a);return t=i+a,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(){"use strict";void 0===String.prototype.startWith&&(String.prototype.startsWith=function(t){return 0===this.indexOf(t)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var r=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>r.length)&&(e=r.length),e-=t.length;var i=r.indexOf(t,e);return-1!==i&&i===e})}(),function(){"use strict";function t(){var t,a,n,o,s,l,c,h,u,d,p,f,g,v=performance.now(),A=v-LAY.$prevTimeFrame,L=(LAY.$isDataTravelling,LAY.$dataTravelDelta),y=LAY.$renderDirtyPartS,b=[],m=!0;for(LAY.$isRendering=!0,t=0;t<y.length;t++){for(s=y[t],l=s.travelRenderDirtyAttrValS,h=s.normalRenderDirtyAttrValS,p=[],a=0;a<l.length;a++)c=l[a],c.isTransitionable&&(e(c,L),LAY.$arrayUtils.pushUnique(p,c.renderCall));for(a=0;a<h.length;a++)u=h[a],f=!0,void 0!==u.calcVal&&LAY.$arrayUtils.pushUnique(p,u.renderCall),d=u.transition,void 0!==d&&(d.delay&&d.delay>0?(d.delay-=A,f=!1,m=!1):u.isDeltaTransitionable?d.checkIsComplete()?(void 0!==d.done&&d.done.call(s.level),u.transition=void 0):(m=!1,f=!1,e(u,d.generateNext(A))):(u.transCalcVal=u.calcVal,void 0!==d.done&&d.done.call(s.level),u.transition=void 0)),f&&(u.transCalcVal=u.calcVal,LAY.$arrayUtils.removeAtIndex(h,a),a--);for(LAY.$arrayUtils.remove(p,"scrollX")&&p.push("scrollX"),LAY.$arrayUtils.remove(p,"scrollY")&&p.push("scrollY"),n=0,o=p.length;o>n;n++)s.render(p[n]);0===h.length&&0===l.length&&(LAY.$arrayUtils.removeAtIndex(LAY.$renderDirtyPartS,t),t--),s.isInitiallyRendered||-1!==LAY.$renderDirtyPartS.indexOf(s)||LAY.$arrayUtils.pushUnique(b,s.level)}for(n=0,o=b.length;o>n;n++){g=b[n],g.part.isInitiallyRendered=!0;var x=g.lson.$load;if(x)for(var Y=0;Y<x.length;Y++)x[Y].call(g)}r(),i(),LAY.$isRendering=!1,LAY.$isSolveRequiredOnRenderFinish?(LAY.$isSolveRequiredOnRenderFinish=!1,LAY.$solve()):m||LAY.$render(v)}function e(t,e){t.calcVal instanceof LAY.Color?t.transCalcVal=LAY.$generateColorMix(t.startCalcVal,t.calcVal,e):t.transCalcVal=t.startCalcVal+e*(t.calcVal-t.startCalcVal)}function r(){for(var t=LAY.$newManyS;t.length;){var e=t[0];t.shift(),e.isLoaded=!0;var r=e.level.lson.$load;if(e.level.isExist&&r)for(;r.length;){var i=r[0];r.shift(),i.call(e.level)}}}function i(){for(var t=LAY.$newlyInstalledStateLevelS,e=LAY.$newlyUninstalledStateLevelS;t.length;){var r=t[0];t.shift();var i=r.newlyInstalledStateS;if(r.isExist)for(;i.length;){var a=i[0];i.shift();var n=r.attr2attrVal[a+".install"];n&&"function"===LAY.$type(n.calcVal)&&n.calcVal.call(r)}}for(;e.length;){var o=e[0];e.shift();var s=o.newlyUninstalledStateS;if(o.isExist)for(;s.length;){var l=s[0];s.shift();var c=o.attr2attrVal[l+".uninstall"];c&&"function"===LAY.$type(c.calcVal)&&c.calcVal.call(o)}}}LAY.$render=function(e){(0!==LAY.$renderDirtyPartS.length||LAY.isDataTravelling)&&(e?(LAY.$prevTimeFrame=e,window.requestAnimationFrame(t)):(LAY.$prevTimeFrame=performance.now()-16.7,t()))}}(),function(){"use strict";var t,e,r;t={transform:["z","scaleX","scaleY","scaleZ","rotateX","rotateY","rotateZ","skewX","skewY"],x:["left","shiftX"],y:["top","shiftY"],origin:["originX","originY","originZ"],overflow:["overflowX","overflowY"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],backgroundSize:["backgroundSizeX","backgroundSizeY"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],textPadding:["textPaddingTop","textPaddingRight","textPaddingBottom","textPaddingLeft"],cornerRadius:["cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomRight","cornerRadiusBottomLeft"]},r=["transform","x","y","origin","backgroundPosition","backgroundSize"],e=function(){var e,r=[];for(e in t)r=r.concat(t[e]);return r}(),LAY.$shorthandPropsUtils={getLonghandProps:function(e){return t[e]},getLonghandPropsDecenteralized:function(e){return-1===r.indexOf(e)?t[e]:void 0},getShorthandProp:function(r){var i;if(-1!==e.indexOf(r))for(i in t)if(-1!==t[i].indexOf(r))return i},getShorthandPropCenteralized:function(t){var e=LAY.$shorthandPropsUtils.getShorthandProp(t);return void 0!==e&&-1!==r.indexOf(e)?e:void 0},checkIsDecentralizedShorthandProp:function(e){return void 0!==t[e]&&-1===r.indexOf(e)}}}(),function(){"use strict";function t(){for(var t=LAY.$relayoutDirtyManyS,e=0,r=t.length;r>e;e++){var i=t[e];i.level.isExist&&i.relayout()}LAY.$relayoutDirtyManyS=[]}function e(){var t,e,r=LAY.$naturalWidthDirtyPartS,i=LAY.$naturalHeightDirtyPartS;for(t=r.length-1;t>=0;t--)e=r[t].level.attr2attrVal.$naturalWidth,e&&e.level.isExist&&e.requestRecalculation();for(t=i.length-1;t>=0;t--)e=i[t].level.attr2attrVal.$naturalHeight,e&&e.level.isExist&&e.requestRecalculation();LAY.$naturalWidthDirtyPartS=[],LAY.$naturalHeightDirtyPartS=[]}LAY.$solve=function(){if(LAY.$isRendering)LAY.$isSolveRequiredOnRenderFinish=!0;else if(!LAY.$isSolving&&0===LAY.$numClog){var r,i,a,n,o=!1;LAY.$isSolving=!0;do if(n=!1,i=!1,a=!1,r=LAY.$solveForNew(),2>r&&(n=!0),r=LAY.$solveForRecalculation(),2>r&&(n=!0),a=0===LAY.$recalculateDirtyAttrValS.length,i=0===LAY.$newLevelS.length,n)o=!1;else{if(o)break;o=!0}while(!i||!a);if(!i||!a){var s="Circular/Undefined Reference Encountered [";if(i){var l=LAY.$recalculateDirtyAttrValS[0];s+="level: "+l.level.pathName+", attr:"+l.attr}else s+="Uninheritable Level: "+LAY.$newLevelS[0].pathName;s+="]",LAY.$error(s)}t(),e(),LAY.$isSolving=!1,LAY.$recalculateDirtyAttrValS.length?LAY.$solve():LAY.$render()}LAY.$isNoTransition=!1}}(),function(){"use strict";LAY.$solveForNew=function(){var t,e,r,i,a=!1,n=LAY.$newLevelS,o=[];if(!n.length)return 3;do for(r=!1,t=0;t<n.length;t++)i=n[t],i.$inherit()&&(i.$identify(),r=!0,a=!0,o.push(i),LAY.$arrayUtils.removeAtIndex(n,t),t--);while(0!==n.length&&r);for(t=0,e=o.length;e>t;t++)o[t].$decideExistence();return 0===n.length?0:a?1:2}}(),function(){"use strict";LAY.$solveForRecalculation=function(){var t,e,r,i=!1,a=LAY.$recalculateDirtyAttrValS;if(!a.length)return 3;do for(e=!1,t=0;t<a.length;t++)a[t].isRemoved?(LAY.$arrayUtils.removeAtIndex(a,t),t--):(r=a[t].recalculate(),r&&(e=!0,i=!0,LAY.$arrayUtils.removeAtIndex(a,t),t--));while(0!==a.length&&e);return 0===a.length?0:i?1:2}}(),function(){"use strict";function t(t){return-t.tension*t.x-t.friction*t.v}function e(e){var r;return r={},r.dx=e.v,r.dv=t(e),r}function r(e,r,i){var a,n;return n={},n.x=e.x+i.dx*r,n.v=e.v+i.dv*r,n.tension=e.tension,n.friction=e.friction,a={},a.dx=n.v,a.dv=t(n),a}function i(t,i){var a,n,o,s,l,c;return a=e(t),n=r(t,.5*i,a),o=r(t,.5*i,n),s=r(t,i,o),c=1/6*(a.dx+2*(n.dx+o.dx)+s.dx),l=1/6*(a.dv+2*(n.dv+o.dv)+s.dv),t.x=t.x+c*i,t.v=t.v+l*i,t}LAY.$springTransition=function(t,e){this.curTime=0,this.value=0,this.friction=parseFloat(e.friction||20),this.tension=parseFloat(e.tension||300),this.velocity=parseFloat(e.velocity||0),this.threshold=parseFloat(e.threshold||.001),this.isComplete=!1},LAY.$springTransition.prototype.generateNext=function(t){var e,r,a,n,o,s,l;return t/=1e3,this.curTime+=t,l={},s={},l.x=this.value-1,l.v=this.velocity,l.tension=this.tension,l.friction=this.friction,s=i(l,t),this.value=1+s.x,e=s.v,a=s.x,r=s.v,n=Math.abs(a)<this.threshold,o=Math.abs(r)<this.threshold,this.isComplete=n&&o,this.velocity=e,this.value},LAY.$springTransition.prototype.checkIsComplete=function(){return this.isComplete}}(),function(){"use strict";LAY.$transitionType2args={linear:[],"cubic-bezier":["a","b","c","d"],spring:["velocity","tension","friction","threshold"]}}(),function(){"use strict";var t={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error"};LAY.$type=function(e){return null===e?e+"":e instanceof LAY.Color?"color":e instanceof LAY.Take?"take":e instanceof LAY.Level?"level":"object"==typeof e||"function"==typeof e?t[Object.prototype.toString.call(e)]||"object":typeof e}}(),function(){"use strict";LAY.$warning=function(t){console.error("LAY WARNING: "+t)}}();