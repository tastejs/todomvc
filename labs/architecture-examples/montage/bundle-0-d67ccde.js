BUNDLE=[["bundle-1-0-ff282ac.js","bundle-1-1-67d5b5c.js","bundle-1-2-1e5edb8.js","bundle-1-3-0070936.js"]],typeof window!="undefined"&&(document._montageTiming={},document._montageTiming.loadStartTime=Date.now(),window.addEventListener("DOMContentLoaded",function(){var a=1e3;document._montageStartBootstrappingTimeout=setTimeout(function(){document._montageStartBootstrappingTimeout=null;var a=document.documentElement;a.classList?a.classList.add("montage-app-bootstrapping"):a.className=a.className+" montage-app-bootstrapping",document._montageTiming.bootstrappingStartTime=Date.now()},a)})),function(a){typeof require!="undefined"?a(require,exports,module):a({},{},{})}(function(a,b,c){var d=(new Function("return this"))();b.initMontage=function(){var a=b.getPlatform();a.bootstrap(function(c,e,f,g){var h=a.getParams(),j=a.getConfig(),k=f.resolve(c.getLocation(),h.montageLocation);j.makeLoader=function(a){return b.ReelLoader(a,c.makeLoader(a))},j.makeCompiler=function(a){return b.SerializationCompiler(a,b.TemplateCompiler(a,c.makeCompiler(a)))};var l=f.resolve(j.location,h["package"]||"."),m=h.applicationHash;if(typeof BUNDLE=="object"){var n={},o=function(a){return n[a]=n[a]||e.Promise.defer()};d.bundleLoaded=function(a){o(a).resolve()};var p=e.Promise.defer();j.preloaded=p.promise;var q=e.Promise.resolve();BUNDLE.forEach(function(a){q=q.then(function(){return e.Promise.all(a.map(function(a){return i.load(a),o(a).promise}))})}),p.resolve(q.then(function(){delete BUNDLE,delete bundleLoaded}))}c.loadPackage({location:k,hash:h.montageHash},j).then(function(b){b.inject("core/promise",e),b.inject("core/next-tick",g),b.inject("core/mini-url",f),j.lint=function(a){b.async("core/jshint").then(function(b){b.JSHINT(a.text)||(console.warn("JSHint Error: "+a.location),b.JSHINT.errors.forEach(function(a){a&&(console.warn("Problem at line "+a.line+" character "+a.character+": "+a.reason),a.evidence&&console.warn("    "+a.evidence))}))})},"autoPackage"in h&&b.injectPackageDescription(l,{dependencies:{montage:"*"}});if(l.slice(l.length-5)===".json"){var c=l;l=f.resolve(l,"."),b.injectPackageDescriptionLocation(l,c)}return b.loadPackage({location:l,hash:m}).then(function(c){d.require=c,d.montageRequire=b,a.initMontage(b,c,h)})}).end()})};var e=/((.*)\.reel)\/\2$/,f=function(a,b){return b};b.SerializationCompiler=function(a,b){return function(a){b(a);if(!a.factory)return;var c=a.factory;return a.factory=function(a,b,d){c.call(this,a,b,d);for(var g in b){var h=b[g];if(h instanceof Object)if(h.hasOwnProperty("_montage_metadata")&&!h._montage_metadata.isInstance)h._montage_metadata.aliases.push(g),h._montage_metadata.objectName=g;else if(!Object.isSealed(h)){var i=d.id.replace(e,f);Object.defineProperty(h,"_montage_metadata",{value:{require:a,module:i,moduleId:i,property:g,objectName:g,aliases:[g],isInstance:!1}})}}},a}};var g=/([^\/]+)\.reel$/;b.ReelLoader=function(a,b){return function(a,c){var d=g.exec(a);return d?(c.redirect=a+"/"+d[1],c):b(a,c)}},b.TemplateCompiler=function(a,b){return function(a){if(!a.location)return;var c=a.location.match(/(.*\/)?(?=[^\/]+\.html(?:\.load\.js)?$)/);if(c)return a.dependencies=a.dependencies||[],a.exports={directory:c[1],content:a.text},Object.defineProperty(a.exports,"root",{get:function(){return typeof console=="object"&&console.warn("'root' property is deprecated on template modules.  Use 'directory' instead of root[1]"),c}}),a;b(a)}},b.getPlatform=function(){if(typeof window!="undefined"&&window&&window.document)return i;if(typeof process!="undefined")return a("./node.js");throw new Error("Platform not supported.")};var h=function(a,b){var c=document.querySelector("base"),d=c;d||(c=document.createElement("base"),c.href="");var e=document.querySelector("head"),f=document.createElement("a");b.resolve=function(a,b){d||e.appendChild(c),a=String(a);if(!/^[\w\-]+:/.test(a))throw new Error("Can't resolve from a relative location: "+JSON.stringify(a)+" "+JSON.stringify(b));var g=c.href;c.href=a,f.href=b;var h=f.href;return c.href=g,d||e.removeChild(c),h}},i={load:function(a){var b=document.createElement("script");b.src=a,b.onload=function(){b.parentNode.removeChild(b)},document.getElementsByTagName("head")[0].appendChild(b)},getConfig:function(){return{location:""+window.location}},getParams:function(){var a,b,c,d,e,f,g;if(!this._params){this._params={};var h=document.getElementsByTagName("script");for(a=0;a<h.length;a++){d=h[a],e=!1,d.src&&(c=d.src.match(/^(.*)montage.js(?:[\?\.]|$)/i))&&(this._params.montageLocation=c[1],e=!0),d.hasAttribute("data-montage")&&(this._params.montageLocation=d.getAttribute("data-montage"),e=!0);if(e){if(d.dataset)for(g in d.dataset)this._params[g]=d.dataset[g];else if(d.attributes)for(b=0;b<d.attributes.length;b++)f=d.attributes[b],c=f.name.match(/^data-(.*)$/),c&&(this._params[c[1]]=f.value);d.parentNode.removeChild(d);break}}}return this._params},bootstrap:function(a){function b(){document.removeEventListener("DOMContentLoaded",b,!0),k=!0,f()}function c(a){if(!r[a]&&q[a]){var b=r[a]={};q[a](c,b)}return r[a]}function e(){n=c("core/next-tick"),l=c("core/promise"),m=c("core/mini-url"),j=c("require/require"),delete d.bootstrap,f()}function f(){k&&j&&a(j,l,m,n)}var g,j,k,l,m,n,o=this.getParams();document.readyState==="complete"?b():document.addEventListener("DOMContentLoaded",b,!0);var p=["require/require","require/browser","core/promise","core/next-tick"];typeof BUNDLE=="undefined"&&p.forEach(function(a){i.load(o.montageLocation+a+".js")});var q={};d.bootstrap=function(a,b){q[a]=b;var c=p.indexOf(a);c!==-1&&p.splice(c,1),p.length===0&&e()},d.bootstrap("core/mini-url",h);var r={}},initMontage:function(a,b,c){var e=["core/event/event-manager","core/deserializer"];typeof window!="undefined"&&e.push("core/event/binding");var f=a("core/promise").Promise;return f.all(e.map(a.deepLoad)).then(function(){e.forEach(a);var f=a("core/event/event-manager").EventManager,g=a("core/deserializer").Deserializer,h,i;h=f.create().initWithWindow(window),typeof d.montageWillLoad=="function"&&d.montageWillLoad();var j=b.packageDescription.applicationPrototype,k,l;return j?(k=g.parseForModuleAndName(j),l=b.async(k.module)):l=a.async("ui/application"),l.then(function(a){i=a[k?k.name:"Application"].create(),window.document.application=i,h.application=i,i.eventManager=h,i._load(b,function(){c.module&&b.async(c.module).end()})})}).end()}};typeof window!="undefined"?d.__MONTAGE_LOADED__?console.warn("Montage already loaded!"):(d.__MONTAGE_LOADED__=!0,b.initMontage()):b.getPlatform()}),function(a){if(typeof bootstrap!="undefined")typeof window!="undefined"?bootstrap("require/require",function(b,c){var d=b("core/promise").Promise,e=b("core/mini-url"),f=b("core/next-tick").nextTick;a(c,d,e,f),b("require/browser")}):bootstrap("require/require",function(b,c){var d=b("core/promise").Promise,e=b("core/url"),f=b("core/next-tick").nextTick;a(c,d,e,f)});else{if(typeof process=="undefined")throw new Error("Can't support require on this platform");var b=require("../core/promise").Promise,c=require("../core/url");a(exports,b,c,process.nextTick),require("./node"),require.main==module&&exports.main()}}(function(Require,Promise,URL,nextTick){function normalizeDependency(a,b,c){b=b||{},typeof a=="string"&&(a={location:a}),a.name!==void 0&&b.registry!==void 0&&b.registry[a.name]&&(a.location=b.registry[a.name]);if(a.location===void 0){if(b.packagesDirectory===void 0||a.name===void 0)throw new Error("name or location required for dependency: "+JSON.stringify(a)+" from "+b.location+" unless already found by name.");a.location=URL.resolve(b.packagesDirectory,a.name+"/")}/\/$/.test(a.location)||(a.location+="/");if(!Require.isAbsolute(a.location)){if(b.location===void 0)throw new Error("Dependency locations must be fully qualified: "+JSON.stringify(a));a.location=URL.resolve(b.location,a.location)}return a.name!==void 0&&(b.registry[a.name]=a.location),a}function configurePackage(a,b,c){/\/$/.test(a)||(a+="/");var d=Object.create(c);d.name=b.name,d.location=a||Require.getLocation(),d.packageDescription=b,d.define=b.define;var e=d.modules=d.modules||{},f=d.registry;d.name!==void 0&&!f[d.name]&&(f[d.name]=d.location);var g=b.overlay||{},h;Require.overlays.forEach(function(a){if(g[a]){var c=g[a];for(var d in c)b[d]=c[d]}}),delete b.overlay,b.directories=b.directories||{},b.directories.lib=b.directories.lib===void 0?".":b.directories.lib;var i=b.directories.lib;d.lib=URL.resolve(a,"./"+i);var j=b.directories.packages||"node_modules";j=URL.resolve(a,j+"/"),d.packagesDirectory=j,b.main!==void 0&&(e[""]={id:"",redirect:b.main,location:d.location},e[b.name]={id:b.name,redirect:"",location:URL.resolve(a,b.name)});var k=b.mappings||{},l=b.dependencies||{};return Object.keys(l).forEach(function(b){k[b]?typeof console=="object"&&console.warn("Dependency for "+JSON.stringify(b)+" "+"overriden by mapping in "+JSON.stringify(a)):k[b]={name:b,version:l[b]}}),Object.keys(k).forEach(function(a){var b=k[a]=normalizeDependency(k[a],d,a)}),d.mappings=k,d}function has(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function resolve(a,b){a=String(a);var c=a.split("/"),d=[];if(c.length&&c[0]==="."||c[0]===".."){var e=b.split("/");e.pop(),c.unshift.apply(c,e)}for(var f=0,g=c.length;f<g;f++){var h=c[f];h!==""&&h!=="."&&(h===".."?d.length&&d.pop():d.push(h))}return d.join("/")}if(!this)throw new Error("Require does not work in strict mode.");var globalEval=eval;Require.makeRequire=function(a){function b(b){return has(i,b)||(i[b]={id:b,display:a.location+"#"+b,require:h}),i[b]}function c(c,d){var e=b(c);e.exports=d,e.location=URL.resolve(a.location,c),e.directory=URL.resolve(e.location,".")}function d(a,c,e){var f=b(a);e=e||{};if(has(e,a))return;return e[a]=!0,j(a,c).then(function(){return Promise.all(f.dependencies.map(function(c){c=resolve(c,a);var f=b(c),g=f.dependees=f.dependees||{};return g[a]=!0,d(c,a,e)}))})}function e(a,c){var d=b(a);if(d.redirect!==void 0)return e(d.redirect,c);if(d.mappingRedirect!==void 0)return d.mappingRequire(d.mappingRedirect,c);if(d.exports!==void 0)return d.exports;if(d.factory===void 0)throw new Error("Can't require module "+JSON.stringify(a)+" via "+JSON.stringify(c));d.directory=URL.resolve(d.location,"."),d.exports={};var f=d.factory.call(void 0,g(a),d.exports,d);return f!==void 0&&console.warn("require: module "+JSON.stringify(a)+" returned a value."),Require.progress.initializedModules.push(d.display),d.exports}function f(b,c,d){if(c.location===a.location)return b;var e={};for(var f in a.mappings){var g=a.mappings[f],h=g.location,i=a.getPackage(h),j=i.identify(b,c,!0);if(j===null)continue;return j===""?f:f+"/"+j}if(d)return null;throw new Error("Can't identify "+b+" from "+c.location)}function g(g){var h=function(a){var b=resolve(a,g);return e(b,g)};return h.async=function(a,c){var e=resolve(a,g),f=b(a);return d(e,g).then(function(){return h(e)},function(a,b){return nextTick(function(){throw b}),h(e)}).then(function(a){return c&&nextTick(function(){c(a)}),a},function(a,b,d){return c&&nextTick(function(){throw b}),d})},h.resolve=function(a){return resolve(a,g)},h.getModule=b,h.getModuleDescriptor=b,h.load=j,h.deepLoad=d,h.loadPackage=function(b,c){return c?Require.loadPackage(b,c):a.loadPackage(b,a)},h.getPackage=function(b){return a.getPackage(b,a)},h.injectPackageDescription=function(b,c){Require.injectPackageDescription(b,c,a)},h.injectPackageDescriptionLocation=function(b,c){Require.injectPackageDescriptionLocation(b,c,a)},h.identify=f,h.inject=c,h.progress=Require.progress,a.exposedConfigs.forEach(function(b){h[b]=a[b]}),h.config=a,h.read=Require.read,h}var h;a=a||{},a.location=URL.resolve(a.location||Require.getLocation(),"."),a.lib=URL.resolve(a.location,a.lib||"."),a.paths=a.paths||[a.lib],a.mappings=a.mappings||{},a.exposedConfigs=a.exposedConfigs||Require.exposedConfigs,a.makeLoader=a.makeLoader||Require.makeLoader,a.load=a.load||a.makeLoader(a),a.makeCompiler=a.makeCompiler||Require.makeCompiler,a.compile=a.compile||a.makeCompiler(a);var i=a.modules=a.modules||{},j=memoize(function(c,d){var e=b(c);return Promise.call(function(){if(e.factory===void 0&&e.exports===void 0&&e.redirect===void 0)return Require.progress.requiredModules.push(e.display),Promise.call(a.load,null,c,e).then(function(){Require.progress.loadedModules.push(e.display)})}).then(function(){a.compile(e);var b=e.dependencies=e.dependencies||[];e.redirect!==void 0&&b.push(e.redirect),e.extraDependencies!==void 0&&Array.prototype.push.apply(e.dependencies,e.extraDependencies)})});return h=g(""),h},Require.progress={requiredModules:[],loadedModules:[],initializedModules:[]},Require.injectPackageDescription=function(a,b,c){var d=c.descriptions=c.descriptions||{};d[a]=Promise.call(function(){return b})},Require.injectPackageDescriptionLocation=function(a,b,c){var d=c.descriptionLocations=c.descriptionLocations||{};d[a]=b},Require.loadPackageDescription=function(a,b){var c=a.location,d=b.descriptions=b.descriptions||{};if(d[c]===void 0){var e=b.descriptionLocations=b.descriptionLocations||{},f;e[c]?f=e[c]:f=URL.resolve(c,"package.json"),d[c]=Require.read(f).then(function(a){try{return JSON.parse(a)}catch(b){throw new SyntaxError("in "+JSON.stringify(f)+": "+b.message)}})}return d[c]},Require.loadPackage=function(a,b){a=normalizeDependency(a,b);var c=a.location;b=b||{};var d=b.loadingPackages=b.loadingPackages||{},e=b.packages={},f=b.registry=b.registry||Object.create(null);b.getPackage=function(a){a=normalizeDependency(a,b);var c=a.location;if(!e[c])throw new Error("Dependency is not loaded: "+JSON.stringify(c));return e[c]},b.loadPackage=function(a,c){a=normalizeDependency(a,c);var f=a.location;return d[f]||(d[f]=Require.loadPackageDescription(a,b).then(function(a){var c=configurePackage(f,a,b),d=Require.makeRequire(c);return e[f]=d,d})),d[f]};var g=b.loadPackage(a);return g.location=c,g.async=function(a,b){return g.then(function(c){return c.async(a,b)})},g},Require.resolve=resolve,Require.base=function(a){return String(a).replace(/(.+?)\/+$/,"$1").match(/([^\/]+$|^\/$|^$)/)[1]},Require.isAbsolute=function(a){return/^[\w\-]+:/.test(a)},Require.parseDependencies=function(a){var b={};return String(a).replace(/(?:^|[^\w\$_.])require\s*\(\s*["']([^"']*)["']\s*\)/g,function(a,c){b[c]=!0}),Object.keys(b)},Require.DependenciesCompiler=function(a,b){return function(a){return!a.dependencies&&a.text!==void 0&&(a.dependencies=Require.parseDependencies(a.text)),b(a),a&&!a.dependencies&&(a.text||a.factory?a.dependencies=Require.parseDependencies(a.text||a.factory):a.dependencies=[]),a}},Require.ShebangCompiler=function(a,b){return function(a){a.text&&(a.text=a.text.replace(/^#!/,"//#!")),b(a)}},Require.LintCompiler=function(a,b){return a.lint?function(c){try{b(c)}catch(d){throw a.lint(c),d}}:b},Require.exposedConfigs=["paths","mappings","location","packageDescription","packages","modules"],Require.makeCompiler=function(a){return Require.JsonCompiler(a,Require.ShebangCompiler(a,Require.DependenciesCompiler(a,Require.LintCompiler(a,Require.Compiler(a)))))},Require.JsonCompiler=function(a,b){return function(a){var c=a.id.match(/\.json$/);return c?(a.exports=JSON.parse(a.text),a):b(a)}},Require.MappingsLoader=function(a,b){a.mappings=a.mappings||{},a.name=a.name||"";var c=a.mappings,d=Object.keys(c),e=d.length;return function(f,g){if(Require.isAbsolute(f))return b(f,g);f.indexOf(a.name)===0&&f.charAt(a.name.length)==="/"&&console.warn("Package reflexive module ignored:",f);var h,i;for(h=0;h<e;h++){i=d[h];if(f===i||f.indexOf(i)===0&&f.charAt(i.length)==="/"){var j=c[i],k=f.slice(i.length+1);return a.loadPackage(j,a).then(function(b){return g.mappingRedirect=k,g.mappingRequire=b,b.deepLoad(k,a.location)})}}return b(f,g)}},Require.ExtensionsLoader=function(a,b){var c=a.extensions||["js"],d=c.reduceRight(function(a,c){return function(d,e){return b(d+"."+c,e).fail(function(b,c,f){return/^Can't find /.test(b)?a(d,e):f})}},function(b,d){throw new Error("Can't find "+JSON.stringify(b)+" with extensions "+JSON.stringify(c)+" in package at "+JSON.stringify(a.location))});return function(a,c){return Require.base(a).indexOf(".")!==-1?b(a,c):d(a,c)}},Require.PathsLoader=function(a,b){var c=a.paths.reduceRight(function(a,c){return function(d,e){var f=URL.resolve(c,d);return b(f,e).fail(function(b,c,f){return/^Can't find /.test(b)?a(d,e):f})}},function(b,c){throw new Error("Can't find "+JSON.stringify(b)+" from paths "+JSON.stringify(a.paths)+" in package at "+JSON.stringify(a.location))});return function(a,d){return Require.isAbsolute(a)?b(a,d):c(a,d)}},Require.MemoizedLoader=function(a,b){var c=a.cache=a.cache||{};return memoize(b,c)};var memoize=function(a,b){return b=b||{},function(c,d){return has(b,c)||(b[c]=Promise.call(a,null,c,d)),b[c]}}}),bootstrap("require/browser",function(require){function xhrSuccess(a){return a.status===200||a.status===0&&a.responseText}var Require=require("require/require"),Promise=require("core/promise").Promise,URL=require("core/mini-url"),GET="GET",APPLICATION_JAVASCRIPT_MIMETYPE="application/javascript",FILE_PROTOCOL="file:",global=typeof global!="undefined"?global:window;Require.getLocation=function(){return URL.resolve(window.location,".")},Require.overlays=["window","browser","montage"],Require.read=function(a){function b(){xhrSuccess(d)?e.resolve(d.responseText):c()}function c(){e.reject("Can't XHR "+JSON.stringify(a))}if(URL.resolve(window.location,a).indexOf(FILE_PROTOCOL)===0)throw new Error("XHR does not function for file: protocol");var d=new XMLHttpRequest,e=Promise.defer();try{d.open(GET,a,!0),d.overrideMimeType&&d.overrideMimeType(APPLICATION_JAVASCRIPT_MIMETYPE),d.onreadystatechange=function(){d.readyState===4&&b()},d.onload=d.load=b,d.onerror=d.error=c}catch(f){e.reject(f.message,f)}return d.send(),e.promise};var globalEval=eval;global.navigator&&global.navigator.userAgent.indexOf("Firefox")>=0&&(globalEval=new Function("_","return eval(_)"));var __FILE__String="__FILE__",DoubleUnderscoreString="__",globalEvalConstantA="(function ",globalEvalConstantB="(require, exports, module) {",globalEvalConstantC="//*/\n})\n//@ sourceURL=";Require.Compiler=function(a){return function(b){if(b.exports||b.factory||b.text===void 0)return b;if(a.define)throw new Error("Can't use eval to compile "+JSON.stringify(b.id));var c=__FILE__String+b.location.replace(/\.\w+$|\W/g,DoubleUnderscoreString);try{b.factory=globalEval(globalEvalConstantA+c+globalEvalConstantB+b.text+globalEvalConstantC+b.location)}catch(d){throw new SyntaxError("in "+b.location+": "+d.message)}b.factory.displayName=c}},Require.XhrLoader=function(a){return function(a,b){return Require.read(a).then(function(c){b.type="javascript",b.text=c,b.location=a})}};var definitions={},getDefinition=function(a,b){return definitions[a]=definitions[a]||{},definitions[a][b]=definitions[a][b]||Promise.defer(),definitions[a][b]};define=function(a,b,c){getDefinition(a,b).resolve(c)},Require.ScriptLoader=function(a){var b=a.packageDescription.hash,c=a.preloaded=a.preloaded||Promise.resolve();return function(a,d){return c.then(function(){if(definitions[b]&&definitions[b][d.id])return definitions[b][d.id].promise;/\.js$/.test(a)?a=a.replace(/\.js/,".load.js"):a+=".load.js";var c=document.createElement("script");return c.onload=function(){c.parentNode.removeChild(c)},c.onerror=function(a){c.parentNode.removeChild(c)},c.src=a,c.defer=!0,document.getElementsByTagName("head")[0].appendChild(c),getDefinition(b,d.id).promise}).then(function(c){delete definitions[b][d.id];for(var e in c)d[e]=c[e];d.location=a,d.directory=URL.resolve(a,".")})}},Require.loadPackageDescription=function(a){return function(b,c){return definitions[b.hash]&&definitions[b.hash]["package.json"]?definitions[b.hash]["package.json"].promise.get("exports"):a(b,c)}}(Require.loadPackageDescription),Require.makeLoader=function(a){return a.packageDescription.define?Loader=Require.ScriptLoader:Loader=Require.XhrLoader,Require.MappingsLoader(a,Require.ExtensionsLoader(a,Require.PathsLoader(a,Require.MemoizedLoader(a,Loader(a)))))}}),function(a){typeof bootstrap!="undefined"?bootstrap("core/promise",a):typeof require!="undefined"?a(require,exports,module):(Q={},a(function(){},Q))}(function(a,b,c){function d(a){if(a&&typeof a.sendPromise!="undefined")return a;if(a&&typeof a.then!="undefined"){var b=r.defer();return a.then(function(a){b.resolve(a)},function(a,c,d){d?b.resolve(d):b.reject(a,c)}),b.promise}return r.fulfill(a)}"use strict";var e="get",f="put",g="delete",h="post",i="apply",j="keys",k="then",l;try{l=a("core/next-tick")}catch(m){l=a("./next-tick")}var n=l.nextTick,o=Object.create(Object.prototype,{create:{value:function(a){for(var b in a){var c=a[b];!c.set&&!c.get&&(c.writable=!0),c.configurable=!0}return Object.create(this,a)},writable:!0,configurable:!0}}),p=o.create({sendPromise:{value:function(a,b){var c;try{c=(this._handlers[b]||this._fallback).apply(this,arguments)}catch(d){c=this.Promise.reject(d&&d.message,d)}a(c)}},toSource:{value:function(){return this.toString()}}}),q=o.create({create:{value:function(a,b){var c=Object.create(this);return c.AbstractPromise=this.AbstractPromise.create(b),c.DeferredPromise=this.DeferredPromise.create(b),c.FulfilledPromise=this.FulfilledPromise.create(b),c.RejectedPromise=this.RejectedPromise.create(b),a&&Object.defineProperties(c,a),b&&Object.keys(b).forEach(function(a){c[a]=function(b){var c=Array.prototype.slice.call(arguments,1),d=this.ref(b);return d[a].apply(d,c)}}),c}},isPromise:{value:function(a){return a&&typeof a.sendPromise!="undefined"}},ref:{get:function(){return this.resolve}},resolve:{value:function(a){if(a&&typeof a.sendPromise=="function"){var b=this.defer();return b.resolve(a),b.promise}if(a&&typeof a.then=="function"){var b=this.defer();return a.then(function(a){b.resolve(a)},function(a,c,d){d?b.resolve(d):b.reject(a,c)}),b.promise}return this.fulfill(a)}},fulfill:{value:function(a){var b=Object.create(this.FulfilledPromise);return b._value=a,b.Promise=this,b}},FulfilledPromise:{value:p.create({_handlers:{value:{then:function(a,b){return this._value},get:function(a,b,c){return this._value[c]},put:function(a,b,c,d){return this._value[c]=d},"delete":function(a,b,c){return delete this._value[c]},post:function(a,b,c,d){return this._value[c].apply(this._value,d)},apply:function(a,b,c,d){return this._value.apply(c,d)},keys:function(a,b){return Object.keys(this._value)}}},_fallback:{value:function(a,b){return this.Promise.reject("Promise does not support operation: "+b)}},valueOf:{value:function(){return this._value}},toString:{value:function(){return"[object FulfilledPromise]"}}})},reject:{value:function(a,b){var c=Object.create(this.RejectedPromise);return c._reason=a,c._error=b,c.Promise=this,s.push(c),t.push(b?b.stack?b.stack:b:a),v(),c}},RejectedPromise:{value:p.create({_handlers:{value:{then:function(a,b,c){if(c){var d=s.indexOf(this);d!==-1&&(s.splice(d,1),t.splice(d,1))}return c?c(this._reason,this._error,this):this}}},_fallback:{value:function(){return this}},valueOf:{value:function(){return this}},toString:{value:function(){return"[object RejectedPromise]"}},promiseRejected:{value:!0}})},defer:{value:function(){var a,b=Object.create(this.DeferredPromise);return b._pending=[],b.Promise=this,a=Object.create(this.Deferred),a.promise=b,a.Promise=this,b._deferred=a,a}},Deferred:{value:o.create({resolve:{value:function(a){if(!this.promise._pending)return;return this.promise._value=a=d(a),this.promise._pending.forEach(function(b){n(function(){a.sendPromise.apply(a,b)})}),this.promise._pending=undefined,a}},reject:{value:function(a,b,c){return this.resolve(c||this.Promise.reject(a,b))}}})},DeferredPromise:{value:p.create({sendPromise:{value:function(a,b,c){if(this._pending)this._pending.push(arguments);else{var d=arguments,e=this._value;n(function(){e.sendPromise.apply(e,d)})}}},valueOf:{value:function(){return this._pending?this:this._value.valueOf()}},toString:{value:function(){return"[object Promise]"}}})},AbstractPromise:{value:p}}),r=q.create({},{when:{value:function(a,b){return this.then(a,b)}},spread:{value:function(a,b){return this.all().then(function(b){return a.apply(void 0,b)},b)}},then:{value:function(a,b){function c(b){try{g.resolve(a?a(b):b)}catch(c){console.error(c.stack||c,a),g.reject(c.message,c)}}function e(a,c,d){try{g.resolve(b?b(a,c,d):d||r.reject(a,c))}catch(c){g.reject(c.message,c)}}var f=this,g=this.Promise.defer(),h=!1;return n(function(){f.sendPromise(function(a){if(h)return;h=!0,d(a).sendPromise(c,k,e)},k,function(a,b,c){if(h)return;h=!0,e(a,b,c)})}),g.promise}},send:{value:function(a,b){var c=r.defer(),d=this;return n(function(){d.sendPromise.apply(d,[function(a){c.resolve(a)},a].concat(Array.prototype.slice.call(b)))}),c.promise}},get:{value:function(){return this.send(e,arguments)}},put:{value:function(){return this.send(f,arguments)}},"delete":{value:function(){return this.send(g,arguments)}},post:{value:function(){return this.send(h,arguments)}},invoke:{value:function(a){var b=Array.prototype.slice.call(arguments,1);return this.send(h,[a,b])}},apply:{value:function(){return this.send(i,arguments)}},call:{value:function(a){var b=Array.prototype.slice.call(arguments,1);return this.send(i,[a,b])}},keys:{value:function(){return this.send(j,[])}},all:{value:function(){var a=this;return a.then(function(b){var c=b.length,e=[];if(c===0)return d(e);var f=a.Promise.defer();return b.forEach(function(a,b){d(a).then(function(a){e[b]=a,--c===0&&f.resolve(e)},function(a,b,c){f.reject(a,b,c)})}),f.promise})}},delay:{value:function(a){var b=this,c;return arguments.length===0?a=this:c=this,r.ref(a).then(function(a){var d=b.Promise.defer();return setTimeout(function(){d.resolve(c)},a),d.promise})}},timeout:{value:function(a){var b=this.Promise.defer();this.then(function(a){clearTimeout(c),b.resolve(a)},function(a,d,e){clearTimeout(c),b.resolve(e)}).end();var c=setTimeout(function(){b.reject("Timed out",new Error("Timed out"))},a);return b.promise}},fail:{value:function(a){return this.then(void 0,a)}},fin:{value:function(a){return this.then(function(b){return r.call(a).then(function(){return b})},function(b,c,d){return r.call(a).then(function(){return d})}).to(this.Promise)}},end:{value:function(a,b){this.then(function(b){a&&n(function(){a(b)})},function(a,c){b?n(function(){b(c||a)}):n(function(){throw c})})}},isResolved:{value:function(){return this.isFulfilled()||this.isRejected()}},isFulfilled:{value:function(){return!r.isPromise(this.valueOf())&&!this.isRejected()}},isRejected:{value:function(){var a=this.valueOf();return!!a&&!!a.promiseRejected}},to:{value:function(a){return a.ref(this)}}}),s=[],t=[],u=!1,v=function(){!u&&typeof window!="undefined"&&!window.Touch&&typeof console=="object"&&(console.log("Should be empty:",t),u=!0)};b.Promise=r}),function(a){typeof bootstrap!="undefined"?bootstrap("core/next-tick",a):typeof require!="undefined"?a(require,exports,module):a({},{},{})}(function(a,b,c){var d;if(typeof process!="undefined")d=process.nextTick;else{var e={},f=e;d=function(a){var b=e.next;f=f.next={task:a},b||h(g,0)};var g=function(){try{while(e.next)e=e.next,e.task()}finally{e.next&&h(g,0)}},h;if(typeof setImmediate!="undefined")h=setImmediate;else if(typeof MessageChannel!="undefined"){var i=new MessageChannel;i.port1.onmessage=g,h=function(a,b){i.port2.postMessage(0)}}else h=setTimeout}b.nextTick=d}),define("4763f06","package.json",{exports:{name:"montage",version:"0.10.0",hash:"4763f06",main:"core/core",mappings:{},define:!0}}),define("1156f40","package.json",{exports:{name:"montage-todomvc",version:"0.0.0",hash:"1156f40",mappings:{montage:{hash:"4763f06",location:"packages/montage@4763f06"}},define:!0}}),define("4763f06","core/event/event-manager",{dependencies:["montage","core/uuid","core/event/mutable-event","core/serializer","core/deserializer"],factory:function(a,b,c){var d=a("montage").Montage,e=a("core/uuid"),f=a("core/event/mutable-event").MutableEvent,g=a("core/serializer").Serializer,h=a("core/deserializer").Deserializer,i;if(typeof window!="undefined"){typeof window.Touch=="undefined"&&"ontouchstart"in window&&(window.Touch=function(){},function(){var a;document.addEventListener("touchstart",a=function(b){window.Touch=b.touches[0].constructor,document.nativeRemoveEventListener?document.nativeRemoveEventListener("touchstart",a,!0):document.removeEventListener("touchstart",a,!0),i&&i.isStoringPointerEvents&&(i.isStoringPointerEvents=!1,i.isStoringPointerEvents=!0)},!0)}()),d.defineProperty(Element.prototype,"eventHandlerUUID",{value:undefined,enumerable:!1}),d.defineProperty(Element.prototype,"controller",{get:function(){return i._elementEventHandlerByUUID[this.eventHandlerUUID]},enumerable:!1}),d.defineProperty(Object.prototype,"addEventListener",{value:function(a,b,c){b&&(this.dispatchChangeEvent=!0,i.registerEventListener(this,a,b,c))}}),d.defineProperty(Object.prototype,"removeEventListener",{value:function(a,b,c){b&&(this.dispatchChangeEvent=!0,i.unregisterEventListener(this,a,b,c))}}),d.defineProperty(Object.prototype,"dispatchEvent",{value:function(a){var b=a;f.isPrototypeOf(a)||(b=f.fromEvent(a)),b.target=this,i.handleEvent(b)},enumerable:!1}),d.defineProperty(Object.prototype,"dispatchEventNamed",{value:function(a,b,c,d){var e=f.fromType(a,b,c,d);e.target=this,i.handleEvent(e)}});var j=d.create(d,{type:{value:null},listener:{value:null},capture:{value:null}});g.defineSerializationUnit("listeners",function(a,b){var c=i,d=a.uuid,e=[],f,g,h;for(var j in c.registeredEventListeners){f=c.registeredEventListeners[j],g=f&&f[d];if(g)for(var k in g.listeners)h=g.listeners[k],e.push({type:j,listener:b.addObjectReference(h.listener),capture:h.capture})}if(e.length>0)return e}),h.defineDeserializationUnit("listeners",function(a,b){for(var c=0,d;d=b[c];c++)a.addEventListener(d.type,d.listener,d.capture)});var k=Event.NONE,l=Event.CAPTURING_PHASE,m=Event.AT_TARGET,n=Event.BUBBLING_PHASE,o="function",p=b.EventManager=d.create(d,{eventDefinitions:{value:{abort:{bubbles:!1,cancelable:!1},beforeunload:{bubbles:!1},blur:{bubbles:!1,cancelable:!1},change:{bubbles:!0,cancelable:!1},click:{bubbles:!0,cancelable:!0},close:{bubbles:!1,cancelable:!1},compositionend:{bubbles:!0,cancelable:!1},compositionstart:{bubbles:!0,cancelable:!0},compositionupdate:{bubbles:!0,cancelable:!1},contextmenu:{bubbles:!0,cancelable:!0},copy:{bubbles:!0,cancelable:!0},cut:{bubbles:!0,cancelable:!0},dblclick:{bubbles:!0,cancelable:!1},DOMActivate:{bubbles:!0,cancelable:!0,deprecated:!0},DOMMouseScroll:{bubbles:!0},drag:{bubbles:!0,cancelable:!0},dragend:{bubbles:!0,cancelable:!1},dragenter:{bubbles:!0,cancelable:!0},dragleave:{bubbles:!0,cancelable:!1},dragover:{bubbles:!0,cancelable:!0},dragstart:{bubbles:!0,cancelable:!0},drop:{bubbles:!0,cancelable:!0},error:{bubbles:function(a){return!(XMLHttpRequest.prototype.isPrototypeOf(a)||a.tagName&&"VIDEO"===a.tagName.toUpperCase()||a.tagName&&"AUDIO"===a.tagName.toUpperCase())},cancelable:!1},focus:{bubbles:!1,cancelable:!1},focusin:{bubbles:!0,cancelable:!1},focusout:{bubbles:!0,cancelable:!1},input:{bubbles:!0,cancelable:!1},keydown:{bubbles:!0,cancelable:!1},keypress:{bubbles:!0,cancelable:!1},keyup:{bubbles:!0,cancelable:!1},load:{bubbles:!1,cancelable:!1},loadend:{bubbles:!1,cancelable:!1},loadstart:{bubbles:!1,cancelable:!1},message:{bubbles:!1,cancelable:!1},mousedown:{bubbles:!0,cancelable:!0},mouseenter:{bubbles:!1,cancelable:!1},mouseleave:{bubbles:!1,cancelable:!1},mousemove:{bubbles:!0,cancelable:!0},mouseout:{bubbles:!0,cancelable:!0},mouseover:{bubbles:!0,cancelable:!0},mouseup:{bubbles:!0,cancelable:!0},mousewheel:{bubbles:!0},orientationchange:{bubbles:!1},paste:{bubbles:!0,cancelable:!0},progress:{bubbles:!1,cancelable:!1},reset:{bubbles:!0,cancelable:!1},resize:{bubbles:!1,cancelable:!1},scroll:{bubbles:function(a){return!!a.defaultView},cancelable:!1},select:{bubbles:!0,cancelable:!1},submit:{bubbles:!0,cancelable:!0},touchcancel:{bubbles:!0,cancelable:!1},touchend:{bubbles:!0,cancelable:!0},touchmove:{bubbles:!0,cancelable:!0},touchstart:{bubbles:!0,cancelable:!0},unload:{bubbles:!1,cancelable:!1},wheel:{bubbles:!0,cancelable:!0}}},_DOMPasteboardElement:{value:null,enumerable:!1},_delegate:{value:null,enumerable:!1},delegate:{enumerable:!1,get:function(){return this._delegate},set:function(a){this._delegate=a}},_application:{value:null,enumerable:!1},application:{enumerable:!1,get:function(){return this._application},set:function(a){this._application=a}},_registeredWindows:{value:null,enumerable:!1},_windowsAwaitingFinalRegistration:{value:{},enumerable:!1},initWithWindow:{enumerable:!1,value:function(a){if(!this._registeredWindows)return this.registerWindow(a),this;throw"EventManager has already been initialized"}},registerWindow:{enumerable:!1,value:function(a){if(a.defaultEventManager&&a.defaultEventManager!==this)throw"EventManager cannot register a window already registered to another EventManager";if(this._registeredWindows&&this._registeredWindows.indexOf(a)>=0)throw"EventManager cannot register a window more than once";this._registeredWindows||(this._registeredWindows=[]);if(!a.uuid||a.uuid.length===0)a.uuid=e.generate();if(this._windowsAwaitingFinalRegistration[a.uuid]===a)return;a.Element.prototype.nativeAddEventListener=a.Element.prototype.addEventListener,Object.defineProperty(a,"nativeAddEventListener",{enumerable:!1,value:a.addEventListener}),Object.getPrototypeOf(a.document).nativeAddEventListener=a.document.addEventListener,a.XMLHttpRequest.prototype.nativeAddEventListener=a.XMLHttpRequest.prototype.addEventListener,Worker&&(Worker.prototype.nativeAddEventListener=Worker.prototype.addEventListener),a.Element.prototype.nativeRemoveEventListener=a.Element.prototype.removeEventListener,Object.defineProperty(a,"nativeRemoveEventListener",{enumerable:!1,value:a.removeEventListener}),Object.getPrototypeOf(a.document).nativeRemoveEventListener=a.document.removeEventListener,a.XMLHttpRequest.prototype.nativeRemoveEventListener=a.XMLHttpRequest.prototype.removeEventListener,Worker&&(Worker.prototype.nativeRemoveEventListener=Worker.prototype.removeEventListener),Object.defineProperty(a,"addEventListener",{enumerable:!1,value:a.XMLHttpRequest.prototype.addEventListener=a.Element.prototype.addEventListener=Object.getPrototypeOf(a.document).addEventListener=function(b,c,d){return a.defaultEventManager.registerEventListener(this,b,c,!!d)}}),Worker&&(Worker.prototype.addEventListener=a.addEventListener),Object.defineProperty(a,"removeEventListener",{enumerable:!1,value:a.XMLHttpRequest.prototype.removeEventListener=a.Element.prototype.removeEventListener=Object.getPrototypeOf(a.document).removeEventListener=function(b,c,d){return a.defaultEventManager.unregisterEventListener(this,b,c,!!d)}}),Worker&&(Worker.prototype.removeEventListener=a.removeEventListener);if(a.HTMLDivElement.prototype.addEventListener!==a.Element.prototype.nativeAddEventListener&&a.HTMLElement&&"addEventListener"in a.HTMLElement.prototype&&a.Components&&a.Components.interfaces){var c,d;for(c in Components.interfaces)if(c.match(/^nsIDOMHTML\w*Element$/)){c=c.replace(/^nsIDOM/,"");if(c=window[c])d=c.prototype,d.nativeAddEventListener=d.addEventListener,d.addEventListener=a.Element.prototype.addEventListener,d.nativeRemoveEventListener=d.removeEventListener,d.removeEventListener=a.Element.prototype.removeEventListener}}i=a.defaultEventManager=b.defaultEventManager=this,this._registeredWindows.push(a),this._windowsAwaitingFinalRegistration[a.uuid]=a,/loaded|complete|interactive/.test(a.document.readyState)?this._finalizeWindowRegistration(a):a.document.addEventListener("DOMContentLoaded",this,!0)}},_finalizeWindowRegistration:{enumerable:!1,value:function(a){if(this._windowsAwaitingFinalRegistration[a.uuid]!==a)throw"EventManager wasn't expecting to register this window";delete this._windowsAwaitingFinalRegistration[a.uuid],this._listenToWindow(a)}},unregisterWindow:{enumerable:!1,value:function(a){if(this._registeredWindows.indexOf(a)<0)throw"EventManager cannot unregister an unregistered window";var b=function(b){return a!==b};this._registeredWindows=this._registeredWindows.filter(b),this._stopListeningToWindow(a)}},unregisterWindows:{enumerable:!1,value:function(){this._registeredWindows.forEach(this.unregisterWindow)}},registeredEventListeners:{enumerable:!1,value:{}},registeredEventListenersForEventType_:{value:function(a){var b=this.registeredEventListeners[a],c,d,e,f;if(!b)return null;f={};for(c in b){d=b[c].listeners;for(e in d)f[e]=d[e]}return f}},registeredEventListenersForEventType_onTarget_:{enumerable:!1,value:function(a,b,c){var d,e;return b===c?d=c.eventManager.registeredEventListeners[a]:d=this.registeredEventListeners[a],d?(e=d[b.uuid],e?e.listeners:null):null}},registeredEventListenersOnTarget_:{value:function(a){var b,c,d=[];for(b in this.registeredEventListeners)c=this.registeredEventListeners[b],a.uuid in c&&d.push(c);return d}},registerEventListener:{enumerable:!1,value:function(a,b,c,d){var e=this.registeredEventListeners[b],f,g,h,i=!1,j=!1;if(typeof a.uuid=="undefined"){if(Array.isCanvasPixelArray(a))return;throw"EventManager cannot observe a target without a uuid"}return e?((f=e[a.uuid])||(f=e[a.uuid]={target:a,listeners:{}},i=!0),g=f.listeners[c.uuid],h=d?"capture":"bubble",g?(g[h]=!0,j=!0):(g={listener:c,capture:d,bubble:!d},f.listeners[c.uuid]=g,j=!0)):(e=this.registeredEventListeners[b]={},e[a.uuid]={target:a,listeners:{}},e[a.uuid].listeners[c.uuid]={listener:c,capture:d,bubble:!d},i=!0,j=!0),i&&typeof a.nativeAddEventListener=="function"&&this._observeTarget_forEventType_(a,b),j}},unregisterEventListener:{enumerable:!1,value:function(a,b,c,d){var e=this.registeredEventListeners[b],f,g,h,i,j;if(!e)return;f=e[a.uuid];if(!f)return;g=f.listeners[c.uuid];if(!g){for(i in f.listeners){j=f.listeners[i].listener;if(j.originalListener&&j.originalListener.uuid===c.uuid){g=f.listeners[i],c=j;break}}if(!g)return}h=d?"capture":"bubble",g[h]=!1,!g.bubble&&!g.capture&&(delete f.listeners[c.uuid],Object.keys(f.listeners).length===0&&(delete e[a.uuid],Object.keys(e).length===0&&(delete this.registeredEventListeners[b],this._stopObservingTarget_forEventType_(a,b))))}},actualDOMTargetForEventTypeOnTarget:{value:function(a,b){if(!b.nativeAddEventListener)return null;if(!b.defaultView){var c=this.eventDefinitions[a],d;return c?(d=typeof c.bubbles===o?c.bubbles(b):c.bubbles,d?b.screen?b.document:b.ownerDocument:b):b}return b}},_observedTarget_byEventType_:{value:{}},_observeTarget_forEventType_:{enumerable:!1,value:function(a,b){var c;(c=this.actualDOMTargetForEventTypeOnTarget(b,a))&&(!this._observedTarget_byEventType_[b]||!this._observedTarget_byEventType_[b][c.uuid])&&(this._observedTarget_byEventType_[b]||(this._observedTarget_byEventType_[b]={}),this._observedTarget_byEventType_[b][c.uuid]=this,c.nativeAddEventListener(b,this,!0))}},_stopObservingTarget_forEventType_:{enumerable:!1,value:function(a,b){var c;c=this.actualDOMTargetForEventTypeOnTarget(b,a),c&&(delete this._observedTarget_byEventType_[b][c.uuid],c.nativeRemoveEventListener(b,this,!0))}},_activationHandler:{enumerable:!0,value:null},_listenToWindow:{enumerable:!1,value:function(a){if(!this._activationHandler){var b=this;this._activationHandler=function(a){var c=a.type;b.registeredEventListeners[c]||b.handleEvent(a)}}a.Touch?a.document.nativeAddEventListener("touchstart",this._activationHandler,!0):a.document.nativeAddEventListener("mousedown",this._activationHandler,!0);if(this.application){var c=this.registeredEventListenersOnTarget_(this.application),d;for(d in c)this._observeTarget_forEventType_(a,d)}}},_stopListeningToWindow:{enumerable:!1,value:function(a){var b=this.registeredEventListenersOnTarget_(this.application),c=this.registeredEventListenersOnTarget_(a),d;for(d in b)this._stopObservingTarget_forEventType_(a,d);for(d in c)this._stopObservingTarget_forEventType_(a,d)}},reset:{enumerable:!1,value:function(){var a,b,c,d;for(a in this.registeredEventListeners){b=this.registeredEventListeners[a];for(c in b.targets)d=b.targets[c],this._stopObservingTarget_forEventType_(d.target,a)}this.registeredEventListeners={},this._claimedPointers={}}},unload:{enumerable:!1,value:function(){this._stopListening()}},methodNameForBubblePhaseOfEventType:{enumerable:!1,value:function(a){return function(b,c){var d=c?b+"+"+c:b;return a[d]||(a[d]="handle"+(c?c.toCapitalized():"")+b.toCapitalized())}}({})},_methodNameForCapturePhaseByEventType_:{value:{}},methodNameForCapturePhaseOfEventType:{enumerable:!1,value:function(a){return function(b,c){var d=c?b+"+"+c:b;return a[d]||(a[d]="capture"+(c?c.toCapitalized():"")+b.toCapitalized())}}({})},_claimedPointers:{enumerable:!1,distinct:!0,value:{}},componentClaimingPointer:{value:function(a){return this._claimedPointers[a]}},isPointerClaimedByComponent:{value:function(a,b){if(!b)throw"Must specify a valid component to see if it claims the specified pointer, '"+b+"' is not valid.";return this._claimedPointers[a]===b}},claimPointer:{value:function(a,b){if(!a&&a!==0)throw"Must specify a valid pointer to claim, '"+a+"' is not valid.";if(!b)throw"Must specify a valid component to claim a pointer, '"+b+"' is not valid.";var c=this._claimedPointers[a];return c===b?!0:c?c.surrenderPointer(a,b)?(this._claimedPointers[a]=b,!0):!1:(this._claimedPointers[a]=b,!0)}},forfeitPointer:{value:function(a,b){if(b===this._claimedPointers[a])delete this._claimedPointers[a];else throw"Not allowed to forfeit pointer '"+a+"' claimed by another component"}},forfeitAllPointers:{value:function(a){var b,c;for(b in this._claimedPointers)c=this._claimedPointers[b],a===c&&delete this._claimedPointers[b]}},_isStoringPointerEvents:{enumerable:!1,value:!1},isStoringPointerEvents:{enumerable:!0,get:function(){return this._isStoringPointerEvents},set:function(a){a===!0?this._isStoringPointerEvents||(this._isStoringPointerEvents=!0,window.Touch&&Object.defineProperty(Touch.prototype,"velocity",{get:function(){return i.pointerMotion(this.identifier).velocity},set:function(){}})):(this._isStoringPointerEvents=!1,this._pointerStorage.memory={},this._isMouseDragging=!1)}},_isStoringMouseEventsWhileDraggingOnly:{enumerable:!1,value:!0},isStoringMouseEventsWhileDraggingOnly:{enumerable:!0,get:function(){return this._isStoringMouseEventsWhileDraggingOnly},set:function(a){this._isStoringMouseEventsWhileDraggingOnly=a===!0?!0:!1}},_isMouseDragging:{enumerable:!1,value:!1},_pointerStorage:{enumerable:!1,value:{memory:{},add:function(a,b){this.memory[a]||(this.memory[a]={data:new Array(32),size:0,pos:0}),this.memory[a].data[this.memory[a].pos]=b,this.memory[a].size<this.memory[a].data.length&&this.memory[a].size++,this.memory[a].pos=(this.memory[a].pos+1)%this.memory[a].data.length},remove:function(a){delete this.memory[a]},clear:function(a){this.memory[a]&&(this.memory[a].size=0)},getMemory:function(a){return this.memory[a]},isStored:function(a){return this.memory[a]&&this.memory[a].size>0},storeEvent:function(a){var b;switch(a.type){case"mousedown":i._isMouseDragging=!0;case"mousemove":i._isStoringMouseEventsWhileDraggingOnly?i._isMouseDragging&&(this.add("mouse",{clientX:a.clientX,clientY:a.clientY,timeStamp:a.timeStamp}),Object.defineProperty(a,"velocity",{get:function(){return i.pointerMotion("mouse").velocity},set:function(){}})):(this.add("mouse",{clientX:a.clientX,clientY:a.clientY,timeStamp:a.timeStamp}),Object.defineProperty(a,"velocity",{get:function(){return i.pointerMotion("mouse").velocity},set:function(){}}));break;case"mouseup":this.add("mouse",{clientX:a.clientX,clientY:a.clientY,timeStamp:a.timeStamp}),Object.defineProperty(a,"velocity",{get:function(){return i.pointerMotion("mouse").velocity},set:function(){}});break;case"touchstart":case"touchmove":for(b=0;b<a.touches.length;b++)this.add(a.touches[b].identifier,{clientX:a.touches[b].clientX,clientY:a.touches[b].clientY,timeStamp:a.timeStamp});break;case"touchend":for(b=0;b<a.changedTouches.length;b++)this.add(a.changedTouches[b].identifier,{clientX:a.changedTouches[b].clientX,clientY:a.changedTouches[b].clientY,timeStamp:a.timeStamp})}},removeEvent:function(a){var b;switch(a.type){case"mouseup":i._isMouseDragging=!1,i._isStoringMouseEventsWhileDraggingOnly&&this.clear("mouse");break;case"touchend":for(b=0;b<a.changedTouches.length;b++)this.remove(a.changedTouches[b].identifier)}}}},_getPointerVelocityData:{enumerable:!1,value:function(a){var b=0,c,d,e,f,g,h,j,k,l,m=0,n=!0,o={x:[],y:[],time:[]};c=i._pointerStorage.getMemory(a),d=c.data.length,e=c.data[(c.pos-1+d)%d],f=g=h=e.timeStamp,j=e.clientX,k=e.clientY;while(n&&g>f-350&&b<c.size)e=c.data[(c.pos-b-1+d)%d],g=e.timeStamp,l=j*j+k*k,l>2&&h-g<=50?(o.x.push(e.clientX),o.y.push(e.clientY),o.time.push(g),h=g,j=e.clientX,k=e.clientY,b++):n=!1;return o}},_fitPointerCurve:{enumerable:!1,value:function(a,b){var c,d,e,f,g,h=1e-4,i=b.length,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q;do{p=0,q=0,r=0,s=0,t=0,u=0,w=0,x=0,y=0,z=0,A=0,B=0,D=0,E=0,F=0,G=0,H=0,I=0,K=0,L=0,M=0,N=0,O=0,P=0;for(o=0;o<i;o++)j=b[o],k=j.t,m=k*k,n=m*k,l=j.v,v=h*(6*(m-k)-n+2),C=h*6*(n-2*m+k),J=h*6*(m-n),Q=h*2*n,u+=v*v,B+=C*C,I+=J*J,P+=Q*Q,p+=l*v,w+=l*C,D+=l*J,K+=l*Q,r-=v,y-=C,F-=J,M-=Q,q-=v*k,x-=C*k,E-=J*k,L-=Q*k,s-=v*m,z-=C*m,G-=J*m,N-=Q*m,t-=v*n,A-=C*n,H-=J*n,O-=Q*n;h*=2}while(u===0||B===0||I===0||P===0);k=h/u,p*=k,q*=k*3,r*=k,s*=k*3,t*=k,k=h/B,w*=k,x*=k*3,y*=k,z*=k*3,A*=k,k=h/I,D*=k,E*=k*3,F*=k,G*=k*3,H*=k,k=h/P,K*=k,L*=k*3,M*=k,N*=k*3,O*=k,u=a[0],B=a[1],I=a[2],P=a[3],d=(B-I)*3+P-u,e=u+I-2*B,f=B-u,g=u;for(o=0;o<20;o++)k=p+g*r+f*q+e*s+d*t,u+=k,g+=k,d-=k,e+=k,f-=k,k=w+g*y+f*x+e*z+d*A,B+=k,d+=k*3,e-=k+k,f+=k,k=D+g*F+f*E+e*G+d*H,I+=k,d-=k*3,e+=k,k=K+g*M+f*L+e*N+d*O,P+=k,d+=k;a[0]=u,a[1]=B,a[2]=I,a[3]=P}},_pointerBezierValue:{enumerable:!1,value:function(a,b){var c=1-a;return c*c*c*b[0]+3*c*c*a*b[1]+3*c*a*a*b[2]+a*a*a*b[3]}},_calculatePointerVelocity:{enumerable:!1,value:function(a,b){var c=a.length,d=a[0],e=a[0],f,g=0,h;for(h=1;h<c;h++)a[h]<d&&(d=a[h],g=h);f=e-d;if(f){if(c>5){var i,j,k,l=[];for(h=0;h<c;h++)l[h]={v:b[h],t:(a[h]-d)/f};return i=l[g].v,j=l[0].v,k=[i,(i*2+j)/3,(i+j*2)/3,j],this._fitPointerCurve(k,l),(this._pointerBezierValue(.8,k)-this._pointerBezierValue(.6,k))*5e3/f}return c>1?(b[0]-b[g])*1e3/f:0}return 0}},pointerMotion:{value:function(a){if(i._pointerStorage.isStored(a)){var b={};return Object.defineProperties(b,{_data:{enumerable:!1,writable:!0,value:null},_x:{enumerable:!1,writable:!0,value:null},_y:{enumerable:!1,writable:!0,value:null},_speed:{enumerable:!1,writable:!0,value:null},_angle:{enumerable:!1,writable:!0,value:null},x:{get:function(){return this._x===null&&(this._data===null&&(this._data=i._getPointerVelocityData(a)),this._x=i._calculatePointerVelocity(this._data.time,this._data.x)),this._x},set:function(){}},y:{get:function(){return this._y===null&&(this._data===null&&(this._data=i._getPointerVelocityData(a)),this._y=i._calculatePointerVelocity(this._data.time,this._data.y)),this._y},set:function(){}},speed:{get:function(){return this._speed===null&&(this._speed=Math.sqrt(this.x*this.x+this.y*this.y)),this._speed},set:function(){}},angle:{get:function(){return this._angle===null&&(this._angle=Math.atan2(this.y,this.x)),this._angle},set:function(){}}}),{velocity:b}}return undefined}},monitorDOMModificationInEventHandling:{value:!1},domModificationEventHandler:{value:d.create(d,{handleEvent:{value:function(a){throw"DOM Modified"}},captureDOMSubtreeModified:{value:function(a){throw"DOMSubtreeModified"}},captureDOMAttrModified:{value:function(a){throw"DOMAttrModified"}},captureDOMCharacterDataModified:{value:function(a){throw"DOMCharacterDataModified"}}})},handleEvent:{enumerable:!1,value:function(a){this.monitorDOMModificationInEventHandling&&(document.body.addEventListener("DOMSubtreeModified",this.domModificationEventHandler,!0),document.body.addEventListener("DOMAttrModified",this.domModificationEventHandler,!0),document.body.addEventListener("DOMCharacterDataModified",this.domModificationEventHandler,!0));var b,c,d,e,g,h,i,j,p,q,r=a.type,s=a.bubbles,t,u,v,w,x,y;"DOMContentLoaded"===r&&(b=a.target.defaultView,b&&this._windowsAwaitingFinalRegistration[b.uuid]&&(this._finalizeWindowRegistration(b),a.target.removeEventListener("DOMContentLoaded",this,!0))),typeof a.propagationStopped!="boolean"?x=f.fromEvent(a):x=a;if("mousedown"===r||"touchstart"===r)if(x.changedTouches){y=x.changedTouches.length;for(c=0;c<y;c++)this._prepareComponentsForActivationEventTarget(x.changedTouches[c].target)}else this._prepareComponentsForActivationEventTarget(x.target);q=this._eventPathForTarget(x.target),x.target.identifier?v=this.methodNameForCapturePhaseOfEventType(r,x.target.identifier):v=null,x.target.identifier?w=this.methodNameForBubblePhaseOfEventType(r,x.target.identifier):w=null,t=this.methodNameForCapturePhaseOfEventType(r),u=this.methodNameForBubblePhaseOfEventType(r),this.delegate&&typeof this.delegate.willDistributeEvent===o&&this.delegate.willDistributeEvent(x),this._isStoringPointerEvents&&this._pointerStorage.storeEvent(x),x.eventPhase=l;for(c=q.length-1;!x.propagationStopped&&(d=q[c]);c--){x.currentTarget=d,e=this.registeredEventListenersForEventType_onTarget_(r,d);if(!e)continue;i=Object.keys(e);for(g=0;e&&!x.immediatePropagationStopped&&(h=e[i[g]]);g++){if(!h.capture)continue;p=h.listener,v&&typeof p[v]===o?p[v](x):typeof p[t]===o?p[t](x):typeof p.handleEvent===o?p.handleEvent(x):typeof p===o&&p.call(d,x)}}if(!x.propagationStopped){x.eventPhase=m,x.currentTarget=d=x.target,e=this.registeredEventListenersForEventType_onTarget_(r,d);if(e){i=Object.keys(e);for(g=0;e&&!x.immediatePropagationStopped&&(h=e[i[g]]);g++)p=h.listener,h.capture&&(v&&typeof p[v]===o?p[v](x):typeof p[t]===o?p[t](x):typeof p.handleEvent===o?p.handleEvent(x):typeof p===o&&p.call(d,x)),h.bubble&&(w&&typeof p[w]===o?p[w](x):typeof p[u]===o?p[u](x):typeof p.handleEvent===o?p.handleEvent(x):typeof p===o&&p.call(d,x))}}x.eventPhase=n;for(c=0;s&&!x.propagationStopped&&(d=q[c]);c++){x.currentTarget=d,e=this.registeredEventListenersForEventType_onTarget_(r,d);if(!e)continue;i=Object.keys(e);for(g=0;e&&!x.immediatePropagationStopped&&(h=e[i[g]]);g++){if(!h.bubble)continue;p=h.listener,w&&typeof p[w]===o?p[w](x):typeof p[u]===o?p[u](x):typeof p.handleEvent===o?p.handleEvent(x):typeof p===o&&p.call(d,x)}}x.eventPhase=k,x.currentTarget=null,this._isStoringPointerEvents&&this._pointerStorage.removeEvent(a),this.monitorDOMModificationInEventHandling&&(document.body.removeEventListener("DOMSubtreeModified",this.domModificationEventHandler,!0),document.body.removeEventListener("DOMAttrModified",this.domModificationEventHandler,!0),document.body.removeEventListener("DOMCharacterDataModified",this.domModificationEventHandler,!0))}},_prepareComponentsForActivationEventTarget:{value:function(a){var b=a,c,d=b&&b.defaultView?b.defaultView:window,e=d.document?d.document:document,f;do{if(b){f=this.eventHandlerForElement(b);if(f)if(!f._preparedForActivationEvents)f._prepareForActivationEvents(),f._preparedForActivationEvents=!0;else if(f._preparedForActivationEvents)return}c=b;switch(b){case d:b=null;break;case e:b=d;break;case e.documentElement:b=e;break;default:b=b.parentNode}}while(b&&c!==b)}},_eventPathForTarget:{enumerable:!1,value:function(a){if(!a)return[];var b=a,c=b&&b.defaultView?b.defaultView:window,d=c.document?c.document:document,e=this.application,f,g=[];do{b!==a&&g.push(b),f=b;switch(b){case e:b=b.parentApplication,b&&(e=b);break;case c:b=e;break;case d:b=c;break;case d.documentElement:b=d;break;default:b=b.parentProperty?b[b.parentProperty]:b.parentNode,b||(b=e)}}while(b&&f!==b);return g}},_elementEventHandlerByUUID:{enumerable:!1,value:{}},registerEventHandlerForElement:{enumerable:!1,value:function(a,b){var c=this.eventHandlerForElement(b);c&&this.unregisterEventHandlerForElement(b),this._elementEventHandlerByUUID[b.eventHandlerUUID=a.uuid]=a}},unregisterEventHandlerForElement:{enumerable:!1,value:function(a){delete this._elementEventHandlerByUUID[a.eventHandlerUUID],delete a.eventHandlerUUID}},eventHandlerForElement:{enumerable:!1,value:function(a){return this._elementEventHandlerByUUID[a.eventHandlerUUID]}}})}}}),define("4763f06","core/deserializer",{dependencies:["montage","core/logger","core/promise"],factory:function(require,exports,module){function deserialize(a,b,c){var d=Promise.defer();return deserializer.init(a,b,c).deserializeObject(function(a){d.resolve(a)}),d.promise}var Montage=require("montage").Montage,logger=require("core/logger").logger("deserializer"),Promise=require("core/promise").Promise,globalEval=eval,canEval=!0;try{eval("")}catch(ex){canEval=!1}var Deserializer=exports.Deserializer=Montage.create(Montage,{_MONTAGE_ID_ATTRIBUTE:{value:"data-montage-id"},_objects:{value:null},_objectStack:{value:[]},_modules:{value:{}},_requiredModuleIds:{value:null},_objectLabels:{value:null},_serializationString:{value:null,enumerable:!1},_serialization:{value:null,enumerable:!1},_parseFunction:{value:null,enumerable:!1},_deserializationUnits:{value:[]},_optimizedIds:{value:Object.create(null)},_indexedDeserializationUnits:{value:{}},__sharedDocument:{value:null},_sharedDocument:{get:function(){return this.__cachedDoc?this.__cachedDoc:this.__cachedDoc=window.document.implementation.createHTMLDocument("")}},_reset:{value:function(){this._serializationString=null,this._requiredModuleIds=null,this._areModulesLoaded=!1,this._parseFunction=null,this._serialization=null,this._compiledDeserializationFunction=null,this._compiledDeserializationFunctionString=null,this._origin=null}},init:{value:function(a,b,c){return typeof a!="string"&&(a=JSON.stringify(a)),this._reset(),this._serializationString=a,this._require=b,this._origin=c,this}},initWithString:{value:function(a,b){return this._reset(),this._serializationString=a,this._origin=b,this}},initWithObject:{value:function(a){return this._reset(),this._serializationString=JSON.stringify(a),this}},initWithObjectAndRequire:{value:function(a,b,c){return this._reset(),this._serializationString=JSON.stringify(a),this._require=b,this._origin=c,this}},initWithStringAndRequire:{value:function(a,b,c){return this._reset(),this._serializationString=a,this._require=b,this._origin=c,this}},defineDeserializationUnit:{value:function(a,b){this._deserializationUnits.push({name:a,funktion:this._indexedDeserializationUnits[a]=b})}},getObjectsFromLastDeserialization:{value:function(){var a=this._objects,b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}},chainDeserializer:{value:function(a){var b=this._chainedSerializations,c,d;b||(this._chainedSerializations=b=[]),b.push({string:a._serializationString,compiledFunction:a._compiledDeserializationFunction,compiledFunctionString:a._compiledDeserializationFunctionString}),d=a._optimizedIds;if(d){c||(this._optimizedIds=c={});for(var e in d)c[e]=d[e]}}},get:{value:function(a){var b=this._objectStack,c=b.length-1;return b[c][a]}},deserializeProperties:{value:function(){var a=this._objectStack,b=a.length-1,c=a[b-1],d=a[b];this._deserializeProperties(c,d.properties,!1)}},getProperty:{value:function(a){var b=this._objectStack,c=b.length-1,d=b[c];return d.properties[a]}},deserializeUnits:{value:function(){var a=this._objectStack,b=a.length-1,c=a[b];c._units=this._indexedDeserializationUnits}},deserializeUnit:{value:function(a){var b=this._objectStack,c=b.length-1,d=b[c],e;d._units?e=d._units:d._units=e={},e[a]=this._indexedDeserializationUnits[a]}},getType:{value:function(){var a=this._objectStack,b=a.length-1,c=a[b];return"object"in c?"object":"prototype"in c?"prototype":null}},getTypeValue:{value:function(){var a=this._objectStack,b=a.length-1,c=a[b];return c.object||c.prototype}},getObjectByLabel:{value:function(a){return this._objects[a]||this._objectLabels[a]}},_customDeserialization:{enumerable:!1,value:function(a,b){this._pushContextObject(a),this._pushContextObject(b),a.deserializeSelf(this),this._popContextObject(),this._popContextObject()}},deserializePropertiesForObject:{value:function(a,b,c){if(c)for(var d in b)Montage.getPropertyAttribute(a,d,"serializable")||(Object.getPropertyDescriptor(a,d)?console.warn('Unserializable property "'+d+'" found in the serialization of '+(a._montage_metadata?a._montage_metadata.objectName:a)+" ("+(this._origin||window.location)+")"):console.warn('Nonexistent (and therefore unserializable) property "'+d+'" found in the serialization of '+(a._montage_metadata?a._montage_metadata.objectName:a)+" ("+(this._origin||window.location)+")")),a[d]=b[d];else for(var d in b)a[d]=b[d]}},_pushContextObject:{value:function(a){this._objectStack.push(a)}},_popContextObject:{value:function(){return this._objectStack.pop()}},_require:{enumerable:!1,value:null},_defaultModuleLoader:{enumerable:!1,value:function(a,b){if(typeof require!="function"){logger.error("Deserializer: The default module loader needs the global require function to be defined.");return}var c=0,d={},e=this._require;a.forEach(function(f){b?Promise.when(e.async(f),function(e){d[f]=e,++c===a.length&&b(d)},function(a,b){console.log(b.stack)}):d[f]=e(f)});if(!b)return d}},_areModulesLoaded:{value:!1},_areModulesLoading:{value:!1},___loadModulesCallbacks:{value:null},_loadModules:{enumerable:!1,value:function(a,b){if(this._areModulesLoaded||a.length===0)b&&b();else if(this._areModulesLoading)this.___loadModulesCallbacks.push(b);else{var c=this,d=this._moduleLoader||this._defaultModuleLoader;this.___loadModulesCallbacks=[b],this._areModulesLoading=!0;function e(a){var b=c._modules;b||(b=c._modules={});for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c._areModulesLoaded=!0,c._areModulesLoading=!1,c.___loadModulesCallbacks.forEach(function(a){a&&a()}),c.___loadModulesCallbacks=null}b?d.call(this,a,e):e(d.call(this,a))}}},_prepareForDeserialization:{value:function(a){if(this._areModulesLoaded)return a();if(!this._compiledDeserializationFunctionString){try{this._serialization=JSON.parse(this._serializationString)}catch(b){if(logger.isError)return this._reportParseError(this._serializationString,this._origin),a()}this._parseForModules()}if(this._requiredModuleIds.length>0)this._loadModules(this._requiredModuleIds,a);else return this._areModulesLoaded=!0,a()}},setModuleLoader:{value:function(a){this._moduleLoader=a}},_findObjectNameRegExp:{value:/([^\/]+?)(\.reel)?$/},_toCamelCaseRegExp:{value:/(?:^|-)([^-])/g},_replaceToCamelCase:{value:function(a,b){return b.toUpperCase()}},_parseForModules:{value:function(){var a=this._serialization,b=this._requiredModuleIds=[],c=this._modules,d,e;for(var f in a){d=a[f],e=null;if("module"in d)e=d.module;else if("prototype"in d||"object"in d)Deserializer.parseForModuleAndName(d.prototype||d.object,d),e=d.module;e&&!c[e]&&b.indexOf(e)==-1&&b.push(e)}}},parseForModuleAndName:{value:function(a,b){var c;return typeof b=="undefined"&&(b={}),c=a.indexOf("["),c>0?(b.module=a.substr(0,c),b.name=a.slice(c+1,-1)):(b.module=a,Deserializer._findObjectNameRegExp.test(a),b.name=RegExp.$1.replace(Deserializer._toCamelCaseRegExp,Deserializer._replaceToCamelCase)),b}},_compile:{value:function(){return this._prepareForDeserialization(),this._compileAndDeserialize(),this._compiledDeserializationFunctionString}},optimizeForDocument:{value:function(a){var b=Deserializer._MONTAGE_ID_ATTRIBUTE,c=a.querySelectorAll("*["+b+"]"),d=this._optimizedIds=Object.create(null);for(var e=0,f;f=c[e];e++)if(!f.id){var g=f.getAttribute(b);f.setAttribute("id",d[g]="_"+b+"_"+g)}}},_labelRegexp:{enumerable:!1,value:/^[a-zA-Z_$][0-9a-zA-Z_$]*$/},_compileAndDeserialize:{value:function(a,b,c,d){function e(a,b){var e,l,o,p,q,t=g._objectLabels[a],u=t!=null,v,w,x,y;if(Object.keys(b).length==0)return;if("module"in b)e=b.module,o=l=b.name;else if("prototype"in b||"object"in b)y=(b.prototype||b.object).indexOf("["),y>0?(e=l.substr(0,y),o=l=l.slice(y+1,-1)):(e=l,g._findObjectNameRegExp.test(l),o=l=RegExp.$1.replace(g._toCamelCaseRegExp,function(a,b){return b.toUpperCase()}));q="object"in b,p=e+"."+l;if(d)if(u)c[a]=t;else if(q)c[a]=t=n[e][l];else if(l in n[e])c[a]=t=n[e][l].create(),Montage.getInfoForObject(t).label=a,Object.defineProperty(t,"_suuid",{enumerable:!1,value:g.uuid+"-"+a});else{console.log('Warning: Object "'+l+'" not found at "'+e+'" referenced from '+g._origin+".");return}m[a]=!0,h+='if (this._objectLabels["'+a+'"]) {\n',h+="  var "+a+" = exports."+a+' = this._objectLabels["'+a+'"];\n',h+="} else if(exports."+a+") {\n",h+="  var "+a+" = exports."+a+";\n",u||(p in r?o=r[p]:(v=(s[l]||0)+1,s[l]=v,v>1&&(o+=v),r[p]=o,r.push("var "+o+' = this._modules["'+e+'"]["'+l+'"];')),h+="} else {\n",q?h+="  var "+a+" = exports."+a+" = "+o+";\n":(h+="  var "+a+" = exports."+a+" = "+o+".create();\n",h+="  Montage.getInfoForObject("+a+').label = "'+a+'";\n',h+="  Object.defineProperty("+a+', "_suuid", {enumerable: false, value: "'+g.uuid+"-"+a+'"});\n')),h+="}\n",w=f(b),j+="var "+a+"Serialization = "+w+";\n",j+=a+".isDeserializing = true;\n",k+="delete "+a+".isDeserializing;\n",j+="if (typeof "+a+'.deserializeSelf === "function") {\n',j+="  "+a+"Serialization._units = {};\n",j+="  this._customDeserialization("+a+", "+w+");\n",j+="} else {\n",j+="  this._deserializeProperties("+a+", "+a+"Serialization.properties);\n",j+="}\n",d&&(t.isDeserializing=!0,typeof t.deserializeSelf=="function"?(b._units={},g._customDeserialization(t,b)):g._deserializeProperties(t,b.properties,!1)),i+="this._deserializeUnits("+a+", "+a+"Serialization);\n"}function f(h,i,j){var k=typeof h;if(k==="object")if(h instanceof Array)k="array";else{if(h===null)return"null";"#"in h?(k="elementByMontageId",h=h["#"]):"/"in h?(k="regexp",h=h["/"]):"@"in h?(k="reference",h=h["@"]):"->"in h?(k="function",h=h["->"]):"."in h&&Object.keys(h).length===1&&console.log("Warning: It's not possible to reference elements by class name anymore: '"+JSON.stringify(h)+"' in template "+g._origin+".")}switch(k){case"string":case"number":case"boolean":return JSON.stringify(h);case"object":var l=[];for(var j in h)l.push('"'+j+'": '+f(h[j],h,j));return"{"+l.join(",\n")+"}";case"array":var l=[];for(var m=0,n=h.length;m<n;m++)l.push(f(h[m],h,m));return"["+l.join(",\n")+"]";case"elementByMontageId":var p=g._optimizedIds[h],q;return p?(q=a.getElementById(p),o.push(p)):(q=a.querySelector("*["+Deserializer._MONTAGE_ID_ATTRIBUTE+'="'+h+'"]'),q||(q=a.getElementById(h),p=h)),q||console.log("Warning: Element "+Deserializer._MONTAGE_ID_ATTRIBUTE+"='"+h+"' not found in template "+g._origin),d&&(i[j]=q),p?'element.getElementById("'+p+'")':"element.querySelector('*["+Deserializer._MONTAGE_ID_ATTRIBUTE+'="'+h+"\"]')";case"regexp":return d&&(i[j]=new RegExp(h.source,h.flags)),"/"+h.source+"/"+h.flags;case"reference":var r,s=h;return h in c?r=c[h]:h in b?Object.keys(b[h]).length>0?(e(h,b[h]),r=c[h]):(r=g._objectLabels[h],h="this._objectLabels."+h):logger.error("Error: Label '"+h+"' not found in serialization at "+g._origin),i&&(i[j]=r),typeof r=="undefined"&&logger.error("Missing object in serialization: '"+s+"'"+(g._origin?" in "+g._origin:"")),h;case"function":var t="function"+(h.name?" "+h.name:"")+"("+h.arguments.join(", ")+") {\n"+h.body+"\n}";return d&&(i[j]=globalEval("("+t+")")),t}}var g=this,h="",i="",j="",k="",l,m={},n=this._modules,o=[],p=this._optimizedIds,q,r=[],s={},t,u=this._labelRegexp,v;canEval?b=this._serialization:b=JSON.parse(this._serializationString);for(t in b){if(!u.test(t))throw logger.error("Invalid label format '"+t+"' "+(this._origin?" in "+this._origin:"")),"Invalid label format: "+t;var w=b[t];if(t in m)continue;"value"in w?(l=f(w.value,w,"value"),h+="var "+t+" = exports."+t+" = "+l+";\n",d&&(c[t]=w.value,m[t]=!0),delete b[t]):e(t,w)}if(d){for(t in b)g._deserializeUnits(c[t],b[t]);for(t in c)v=c[t],v&&delete v.isDeserializing}if(o.length>0){k+='element.getElementById("'+o.join('").removeAttribute("id");\nelement.getElementById("')+'").removeAttribute("id");';for(var x=0,y;y=o[x];x++)a.getElementById(o[x]).removeAttribute("id")}return canEval&&(q="(function() {\n"+r.join("\n")+"\nreturn function(element, exports) {\n"+h+"\n\n"+j+"\n\n"+i+"\n\n"+k+"\nreturn exports;\n}}).call(this)"),logger.isDebug&&logger.debug(q),q}},_reportParseError:{value:function(a,b){require.async("core/jshint",function(c){var d=c.JSHINT;if(!d(a)){var e=d.errors[0],f=a.split("\n"),g="   ",h=(g+f.length).length,i=e.line-1;for(var j=0,k=f.length;j<k;j++)f[j]=(new Array(h-(j+1+"").length+1)).join(j===i?">":" ")+(j+1)+" "+f[j];logger.error("Syntax error at line "+e.line+(b?" from "+b:"")+":\n"+e.evidence+"\n"+e.reason+"\n"+f.join("\n"))}else logger.error("Syntax error in the serialization but not able to find it!\n"+a)})}},_deserialize:{value:function(sourceDocument,targetDocument){var exports=this._objects={},chainedSerializations=this._chainedSerializations;this._compiledDeserializationFunction?this._compiledDeserializationFunction(sourceDocument,exports):this._compiledDeserializationFunctionString?(this._compiledDeserializationFunction=eval(this._compiledDeserializationFunctionString),this._compiledDeserializationFunction(sourceDocument,exports)):(this._compiledDeserializationFunctionString=this._compileAndDeserialize(sourceDocument,this._serialization,exports,!0),this._serialization=null);if(chainedSerializations)for(var i=0,serialization;serialization=chainedSerializations[i];i++)serialization.compiledFunction?serialization.compiledFunction.call(this,sourceDocument,exports):serialization.compiledFunctionString?(serialization.compiledFunction=eval(serialization.compiledFunctionString),serialization.compiledFunction.call(this,sourceDocument,exports)):(serialization.compiledFunctionString=this._compileAndDeserialize(sourceDocument,serialization.object,exports,!0),serialization.object=null);return targetDocument&&targetDocument.adoptNode(sourceDocument.body.firstChild),exports}},deserializeObject:{value:function(a){return this.deserializeWithInstancesAndDocument(null,null,function(b){a(b?b.root:undefined)})}},deserializeObjectWithElement:{value:function(a,b){return this.deserializeWithInstancesAndElementForDocument(null,a,null,function(a,c){b(a?a.root:undefined,c)})}},deserialize:{value:function(a){return this.deserializeWithInstancesAndDocument(null,null,a)}},deserializeWithInstances:{value:function(a,b){return this.deserializeWithInstancesAndDocument(a,null,b)}},deserializeWithInstancesAndElementForDocument:{value:function(a,b,c,d){var e=this;this._prepareForDeserialization(function(){var f,g=e._sharedDocument,h=g.body;e._objects={},e._objectLabels=a||{},b&&h.appendChild(g.importNode(b,!0)),f=e._deserialize(g,c),e._invokeDeserializedFromSerialization(f),d(f,h)})}},deserializeWithInstancesAndDocument:{value:function(a,b,c){var d=this;this._prepareForDeserialization(function(){d._objects={},d._objectLabels=a||{};var e=d._deserialize(b);d._invokeDeserializedFromSerialization(e),c(e,b)})}},_invokeDeserializedFromSerialization:{value:function(a){var b=this._objectLabels,c;for(var d in a){if(b[d]!=null)continue;c=a[d],c!==null&&typeof c.deserializedFromSerialization=="function"&&c.deserializedFromSerialization()}}},_deserializeProperties:{value:function(a,b,c){a.deserializeProperties?(this._pushContextObject(b),a.deserializeProperties(this),this._popContextObject()):this.deserializePropertiesForObject(a,b,c)}},_deserializeUnits:{value:function(a,b){var c=b._units||this._indexedDeserializationUnits;for(var d in c)d in b&&c[d](a,b[d],this)}}}),deserializer=Deserializer.create();exports.deserialize=deserialize}}),define("4763f06","core/event/binding",{dependencies:["montage","core/change-notification","core/serializer","core/deserializer","core/logger","core/event/event-manager"],factory:function(a,b,c){var d=a("montage").Montage,e=a("core/change-notification").ChangeNotification,f=a("core/serializer").Serializer,g=a("core/deserializer").Deserializer,h=a("core/logger").logger("binding"),i=a("core/event/event-manager").defaultEventManager,j=2,k="_",l=b.ChangeEventDispatchingArray=[],m=b.PropertyChangeBindingListener=Object.create(d,{useCapture:{value:!1,writable:!0},target:{value:null,writable:!0},originalListener:{value:null,writable:!0},originalListenerIsFunction:{value:!1,writable:!0},targetPropertyPath:{value:null,writable:!0},bindingOriginValueDeferred:{value:!1,writable:!0},deferredValue:{value:null,writable:!0},deferredValueTarget:{value:null,writable:!0},previousTargetPropertyPathValue:{value:null,writable:!0},targetPropertyPathCurrentIndex:{value:0,writable:!0},currentIndexListenee:{value:null,writable:!0},bindingOriginCurrentIndexListenee:{value:null,writable:!0},currentPropertyComponent:{value:null,writable:!0},bindingOrigin:{value:null,writable:!0},bindingPropertyPath:{value:null,writable:!0},bindingPropertyPathCurrentIndex:{value:0,writable:!0},bindingDescriptor:{value:null,writable:!0},applyBindingOriginDeferredValue:{value:function(){this.bindingOrigin.setProperty(this.bindingPropertyPath,this.deferredValue)}},applyTargetDeferredValue:{value:function(){this.target.setProperty(this.targetPropertyPath,this.deferredValue)}},applyDeferredValues:{value:function(){this.deferredValueTarget==="bound"?this.applyBindingOriginDeferredValue():this.deferredValueTarget==="target"&&this.applyTargetDeferredValue(),this.deferredValueTarget=""}},handleChange:{value:function(a){var b,c=this.bindingOrigin,d=this.bindingPropertyPath,e=c.getProperty(d),f=this.target,g=this.targetPropertyPath,h;f!==c?b=a.currentTarget===c:b=a.currentPropertyPath===d;if(b){if(c.setProperty.changeEvent)return;this.bindingDescriptor.converter&&(e=this.bindingDescriptor.converter.revert(e)),this.bindingOriginValueDeferred===!0||c._bindingsDisabled?(this.deferredValue=e,this.deferredValueTarget="target"):(this.bindingOriginChangeTriggered=!0,f.setProperty(g,e),this.bindingOriginChangeTriggered=!1)}else this.bindingOriginChangeTriggered||(h=f.getProperty(g),this.bindingDescriptor.boundValueMutator?h=this.bindingDescriptor.boundValueMutator(h):this.bindingDescriptor.converter&&(h=this.bindingDescriptor.converter.convert(h)),h!==e&&(this.bindingOriginValueDeferred===!0||c._bindingsDisabled?(this.deferredValue=h,this.deferredValueTarget="bound"):(c.setProperty.changeEvent=a,c.setProperty(d,h),c.setProperty.changeEvent=null)),this.previousTargetPropertyPathValue=h)}}});Object.defineProperty(Object.prototype,"propertyChangeBindingListener",{value:function(a,b,c,d,e,f,g){var h,i=m.create();return i.useCapture=c,i.target=this,i.originalListener=b,i.originalListenerIsFunction=typeof b=="function",i.targetPropertyPath=h=a,i.previousTargetPropertyPathValue=this.getProperty(h),i.targetPropertyPathCurrentIndex=0,e&&(i.bindingOrigin=e,i.bindingPropertyPath=f,i.bindingDescriptor=g,i.bindingOriginValueDeferred=g.deferred?!0:!1),i},writable:!0});var n=b.BindingDescriptor=d.create(d,{boundObject:{enumerable:!1,value:null},boundObjectPropertyPath:{enumerable:!1,value:null},oneway:{enumerable:!1,value:null},deferred:{enumerable:!1,value:null},serializeSelf:{value:function(a){var b={};return a.addObjectReference(this.boundObject),b[this.oneway?"<-":"<->"]="@"+a.getObjectLabel(this.boundObject)+"."+this.boundObjectPropertyPath,b.deferred=this.deferred,b.converter=this.converter,b}}});f.defineSerializationUnit("bindings",function(a){var b=a._bindingDescriptors;if(b)return b}),g.defineDeserializationUnit("bindings",function(a,b,c){for(var d in b){var e=b[d],f;if(!("boundObject"in e)){var g=e["<-"]||e["<->"]||e["<<->"];"<<->"in e&&console.warn("WARNING: <<-> in bindings is deprectated, use <-> only, please update now.");if(!g)throw h.error("Invalid binding syntax '"+JSON.stringify(e)+"'."),"Invalid binding syntax '"+JSON.stringify(e)+"'";if(g[0]!=="@")throw h.error("Invalid binding syntax '"+g+"', should be in the form of '@label.path'."),"Invalid binding syntax '"+g+"'";f=g.indexOf("."),e.boundObject=c.getObjectByLabel(g.slice(1,f)),e.boundObjectPropertyPath=g.slice(f+1),"<-"in e&&(e.oneway=!0)}Object.defineBinding(a,d,e)}});var o=b.Stats={count:0};Object.defineProperty(Object,"defineBinding",{value:function(a,b,c){var d=a._bindingDescriptors,e=typeof c.oneway=="undefined"?!1:c.oneway,f=c.boundObject,g=c.boundObjectPropertyPath,h,i,j;if(!f||!g)return;o.count++,d||(a._bindingDescriptors=d=Object.create(Object.prototype));if((c.__proto__||Object.getPrototypeOf(c))!==n)if("__proto__"in c)c.__proto__=n;else{var k=c;c=Object.create(n);for(var l in k)c[l]=k[l]}i=d[b];if(!i){d[b]=c,j=f.propertyChangeBindingListener(g,null,!0,null,a,b,c);if(!j)return;return f=c.boundObject,g=j.targetPropertyPath,e=typeof c.oneway=="undefined"?!1:c.oneway,c.boundObjectPropertyPath=g,c.bindingListener=j,j.listener=j,f.addPropertyChangeListener(g,j,!1),e||a.addPropertyChangeListener(b,j,!1),h=f.getProperty(g),c.boundValueMutator?h=c.boundValueMutator(h):c.converter&&(h=c.converter.convert(h)),j.bindingOriginValueDeferred===!0||a._bindingsDisabled?(j.deferredValue=h,j.deferredValueTarget="bound"):a.setProperty(b,h),j}if(f!==i.boundObject||c.boundObjectPropertyPath!==i.boundObjectPropertyPath)throw"sourceObject property, "+b+", is already the source of a binding"}}),d.defineProperty(Object.prototype,"_bindingDescriptors",{enumerable:!1,value:null,writable:!0}),Object.defineProperty(Object.prototype,"_deserializeProperty_bindingDescriptors",{enumerable:!1,value:function(a,b){this._bindingDescriptorsToInstall=a}}),Object.defineProperty(Object,"deleteBinding",{value:function(a,b){var c=a._bindingDescriptors,d,e;b in c&&(o.count--,d=c[b],e=typeof d.oneway=="undefined"?!0:d.oneway,d.boundObject.removePropertyChangeListener(d.boundObjectPropertyPath,d.bindingListener,!1),e||a.removePropertyChangeListener(b,d.bindingListener,!1),delete c[b])}}),Object.defineProperty(Object,"deleteBindings",{value:function(a){var b=a._bindingDescriptors;if(b)for(var c in b)b.hasOwnProperty(c)&&Object.deleteBinding(a,c)}}),Object.defineProperty(Object,"applyBindingsDeferredValues",{value:function(a,b){var c=a._bindingDescriptors,d;if(c)for(var e in c)c.hasOwnProperty(e)&&(d=c[e].bindingListener,d&&(!b||!d.bindingOriginValueDeferred)&&d.applyDeferredValues())}}),d.defineProperty(Object.prototype,"_bindingsDisabled",{enumerable:!1,value:null}),Object.defineProperty(Object,"disableBindings",{value:function(a){a._bindingsDisabled=!0}}),Object.defineProperty(Object,"enableBindings",{value:function(a){a._bindingsDisabled=!1,Object.applyBindingsDeferredValues(a,!0)}})}}),define("4763f06","core/change-notification",{dependencies:["montage","core/logger"],factory:function(a,b,c){var d=a("montage").Montage,e=a("core/logger").logger("change-notification"),f="_",g=Object.create(null),h=Object.create(null),i=Object.create(null),j=Object.create(null),k=Object.create(null);b.__reset__=function(){g=Object.create(null),h=Object.create(null),i=Object.create(null),j=Object.create(null),k=Object.create(null)},b.__debug__=function(){console.log("_descriptorsDirectory",g),console.log("_willChangeDescriptorsDirectory",h,i),console.log("_changeDescriptorsDirectory",j,k)};var l=b.ChangeNotification=Object.create(d,{_descriptorsRegistry:{writable:!0,value:Object.create(null)},_createFunctionDescriptor:{value:function(a,b,c,d){var e,f,g=Object.create(n);typeof b=="function"?(g.listenerFunction=b,g.listenerTarget=a):(e=a.identifier,e&&(e=e.toCapitalized(),f="handle"+e+(c?"WillChange":"Change"),typeof b[f]=="function"&&(g.listenerFunctionName=f,g.listenerFunction=b[f],g.listenerTarget=b)),g.listenerFunction||(f="handle"+(c?"WillChange":"Change"),typeof b[f]=="function"&&(g.listenerFunctionName=f,g.listenerFunction=b[f],g.listenerTarget=b)));if(!g.listenerFunction)throw console.log("Could not find valid listener when installing",a,b),"Could not find valid listener when installing";return g.listensToMutation=d,g}},registerPropertyChangeListener:{value:function(a,b,c,d,e){var f=a.uuid,g=this._descriptorsRegistry,h=g[f],i;return b==null&&(b="*",e=!0),h||(h=g[f]=Object.create(null),h.propertyPathCount=0),i=h[b],i||(i=h[b]=Object.create(m).initWithTargetPath(a,b),h.propertyPathCount++),i.registerListener(c,d,e),i}},unregisterPropertyChangeListener:{value:function(a,b,c,d){var e=a.uuid,f=this._descriptorsRegistry,g=f[e],h;b==null&&(b="*"),g&&(h=g[b],h&&(h.unregisterListener(c,d),h.willChangeListenersCount===0&&h.changeListenersCount===0&&(delete g[b],--g.propertyPathCount===0&&delete f[e])))}},getPropertyChangeDescriptor:{value:function(a,b){var c=this._descriptorsRegistry[a.uuid];if(c)return b==null&&(b="*"),c[b]}},__debug__:{value:function(){console.log("_descriptorsRegistry: ",this._descriptorsRegistry)}},__reset__:{value:function(){this._descriptorsRegistry=Object.create(null)}}}),m=d.create(d,{target:{value:null},propertyPath:{value:null},willChangeListeners:{value:null},changeListeners:{value:null},willChangeListenersCount:{value:0},changeListenersCount:{value:0},isActive:{value:!1},dependencies:{value:null},hasWillChangeDependencies:{value:!1},hasChangeDependencies:{value:!1},dependentDescriptorsIndex:{value:null},mutationDependencyIndex:{value:null},mutationListenersCount:{value:0},observedDependentProperties:{value:null},initWithTargetPath:{value:function(a,b){return this.target=a,this.propertyPath=b,this}},registerListener:{value:function(a,b,c){var d=a.uuid,e;b?(e=this.willChangeListeners,e||(e=this.willChangeListeners=Object.create(null)),d in e||(e[d]=l._createFunctionDescriptor(this.target,a,b,c),this.willChangeListenersCount++,c&&this.mutationListenersCount++)):(e=this.changeListeners,e||(e=this.changeListeners=Object.create(null)),d in e||(e[d]=l._createFunctionDescriptor(this.target,a,b,c),this.changeListenersCount++,c&&this.mutationListenersCount++))}},unregisterListener:{value:function(a,b){var c=a.uuid,d;b?(d=this.willChangeListeners,d&&c in d&&(d[c].listensToMutation&&this.mutationListenersCount--,delete d[c],this.willChangeListenersCount--)):(d=this.changeListeners,d&&c in d&&(d[c].listensToMutation&&this.mutationListenersCount--,delete d[c],this.changeListenersCount--)),this.willChangeListenersCount===0&&this.changeListenersCount===0&&this.removeDependencies()}},hasListeners:{value:function(){return this.willChangeListenersCount>0||this.changeListenersCount>0}},setupDependencies:{value:function(a,b,c,d){var e=this.dependencies;if(this.hasChangeDependencies){if(this.hasWillChangeDependencies||!c)return;for(var f=0,g=e.length;f<g;f+=3)e[f].addPropertyChangeListener(e[f+1],this,!0,e[f+2]!=null)}else this.addDependency(a,b,c,d);this.hasChangeDependencies?this.hasWillChangeDependencies=!0:(c&&(this.hasWillChangeDependencies=!0),this.hasChangeDependencies=!0)}},addDependency:{value:function(a,b,c,d){var e=this,f;a.getProperty(b,null,null,function(a,b,g,h,i){f=d?i!=null:!0,c&&a.addPropertyChangeListener(b,e,!0,f),a.addPropertyChangeListener(b,e,!1,f),e.registerDependency(a,b,i)})}},removeDependencies:{value:function(){var a=this.dependencies,b,c,d;if(a){for(var e=0,f=a.length;e<f;e+=3)b=a[e],c=a[e+1],d=l.getPropertyChangeDescriptor(b,c),this.hasWillChangeDependencies&&b.removePropertyChangeListener(c,this,!0),this.hasChangeDependencies&&b.removePropertyChangeListener(c,this),d&&delete d.dependentDescriptorsIndex[this.uuid];a.length=0}}},updateDependenciesAtIndex:{value:function(a,b,c){var d=this,e=this.dependencies,f=e[a+2];b!=null&&b.getProperty(f,null,null,function(a,b,c,e,f){d.unregisterDependency(a,b,f),d.hasWillChangeDependencies&&a.removePropertyChangeListener(b,d,!0),d.hasChangeDependencies&&a.removePropertyChangeListener(b,d)}),c!=null&&c.getProperty(f,null,null,function(a,b,c,e,f){d.hasWillChangeDependencies&&a.addPropertyChangeListener(b,d,!0,f!=null),d.hasChangeDependencies&&a.addPropertyChangeListener(b,d,!1,f!=null),d.registerDependency(a,b,f)})}},updateDependencies:{value:function(a){var b=a._dependenciesIndex;if(b!=null)if(a.isMutation){for(var c=0,d=a.minus.length;c<d;c++)this.updateDependenciesAtIndex(b,a.minus[c],null);for(var c=0,d=a.plus.length;c<d;c++)this.updateDependenciesAtIndex(b,null,a.plus[c])}else this.updateDependenciesAtIndex(b,a.minus,a.plus);else this.mutationListenersCount>0&&!a.isMutation&&this.updateMutationDependency(a.plus)}},updateMutationDependency:{value:function(a){var b,c;if(this.mutationDependencyIndex!=null)var b=this.dependencies[this.mutationDependencyIndex];if(b===a)return;c=this.mutationListenersCount>0&&a!=null&&typeof a=="object",b&&(this.unregisterDependency(b,null,null),b.removePropertyChangeListener(null,this,!0),b.removePropertyChangeListener(null,this,!1),this.mutationDependencyIndex=null),c&&(this.willChangeListenersCount>0&&a.addPropertyChangeListener(null,this,!0),this.changeListenersCount>0&&a.addPropertyChangeListener(null,this,!1),this.mutationDependencyIndex=this.registerDependency(a,null,null))}},registerDependency:{value:function(a,b,c){var d=l.getPropertyChangeDescriptor(a,b),e,f,g,h;if(d)return e=d.dependentDescriptorsIndex,f=this.dependencies,g=this.uuid,f||(f=this.dependencies=[]),h=f.push(a,b,c)-3,e||(e=d.dependentDescriptorsIndex=Object.create(null)),g in e||(e[g]=h),h}},unregisterDependency:{value:function(a,b,c){var d=l.getPropertyChangeDescriptor(a,b),e=this.dependencies,f;if(d){do{f=e.indexOf(a);if(e[f+1]===b&&e[f+2]===c){e.splice(f,3);break}f=e.indexOf(a,f+1)}while(f!=-1);if(f==-1)throw"getProperty target ("+this.target.uuid+":"+b+") not found in dependencies for "+this.propertyPath;delete d.dependentDescriptorsIndex[this.uuid]}}},handleWillChange:{value:function(a){a.phase="before",this.handleChange(a,this.willChangeListeners)}},handleChange:{value:function(a,b){var c,d=this.dependentDescriptorsIndex,e=a._dependenciesIndex,f,g=this.uuid;if(a[g])return;arguments.length<2&&(b=this.changeListeners,a.phase="after",this.updateDependencies(a));if(b){a._dependenciesIndex=null,a.currentTarget=this.target,a.currentPropertyPath=this.propertyPath,f=a.isMutation;for(var h in b){c=b[h];if(f&&this.target._dependenciesForProperty&&this.target._dependenciesForProperty[this.propertyPath]||!f||c.listensToMutation)d&&(a._dependenciesIndex=d[h]),a[g]=!0,c.listenerFunction.call(c.listenerTarget,a),a[g]=!1}a._dependenciesIndex=e}}}}),n=Object.create(null,{listenerTarget:{writable:!0,value:null},listenerFunction:{writable:!0,value:null},listenerFunctionName:{writable:!0,value:null},listensToMutation:{writable:!0,value:!1}}),o=Object.create(null,{installDispatcherOnTargetProperty:{value:function(a,b){var c,d,e,f;c=Object.getPrototypeAndDescriptorDefiningProperty(a,b),d=c.propertyDescriptor,d?(e=d.set,f=c.prototype,"value"in d?this.addDispatcherToTargetProperty(a,b,d.enumerable):e&&!e.isDispatchingSetter&&this.addDispatcherToTargetPropertyWithDescriptor(a,b,d)):this.addDispatcherToTargetProperty(a,b,!0)}},uninstallDispatcherOnTargetProperty:{value:function(a,b){}},dispatcherPropertyNamePrefix:{value:"_"},addDispatcherToTargetProperty:{value:function(a,b,c){var d=this.dispatcherPropertyNamePrefix+b;q.enumerable=c,r.value=a[b],q.get=function(){return this[d]},q.set=function e(c){var e=l.getPropertyChangeDescriptor(a,b),f,g;if(!e){this[d]=c;return}f=this[d];if(f===c)return;if(e.isActive&&a===e.target&&b===e.propertyPath)return;g=Object.create(s),g.target=this,g.propertyPath=b,g.minus=f,e.isActive=!0,e.handleWillChange(g),this[d]=c,g.plus=this[d],e.handleChange(g),e.isActive=!1},q.set.isDispatchingSetter=!0,delete a[b],Object.defineProperty(a,d,r),Object.defineProperty(a,b,q)}},addDispatcherToTargetPropertyWithDescriptor:{value:function(a,b,c){var d=c.set;q.enumerable=c.enumerable,r.value=a[b],q.get=c.get,q.set=function e(c){var f=l.getPropertyChangeDescriptor(a,b),g,h;if(!f){d.apply(this,arguments);return}g=this[b];if(g===c){d.apply(this,arguments);return}if(f.isActive&&a===f.target&&b===f.propertyPath&&e.caller!==d)return;h=Object.create(s),h.target=this,h.propertyPath=b,h.minus=g,h.plus=c,f.isActive=!0,f.handleWillChange(h),d.apply(this,arguments),h.plus=this[b],f.handleChange(h),f.isActive=!1},q.set.isDispatchingSetter=!0,q.set.originalSetter=d,Object.defineProperty(a,b,q)}},removeDispatcherOnTargetProperty:{value:function(a,b){}}});Object.defineProperty(Object.prototype,"dispatchPropertyChange",{value:function(){var a=arguments.length,b=a-1,c,d,e,f,g,h,i;if(a<2)throw"Affected property (or properties) and callback to effect change are required to dispatchPropertyChange";c=arguments[b];if(!c||typeof c!="function")throw"Callback to effect actual change is required to dispatchPropertyChange";g=[];for(d=0;d<b;d++)e=arguments[d],f=l.getPropertyChangeDescriptor(this,e),f&&!f.isActive&&(i=Object.create(s),g.push(e,f,i),i.target=this,i.minus=this.getProperty(e),f.isActive=!0,f.handleWillChange(i));c.call(this);for(d=0,h=g.length;d<h;d+=3)e=g[d],f=g[d+1],i=g[d+2],i.plus=this.getProperty(e),f.handleChange(i),f.isActive=!1}}),Object.defineProperty(Object.prototype,"addPropertyChangeListener",{value:function(a,b,c,d){var e,f,g,h;if(!b||!a||this.uuid!==this.uuid)return;e=l.registerPropertyChangeListener(this,a,b,c,!d);if(a.indexOf(".")!==-1)e.setupDependencies(this,a,c,!d);else{if(typeof this.automaticallyDispatchPropertyChangeListener!="function"||this.automaticallyDispatchPropertyChangeListener(a))o.installDispatcherOnTargetProperty(this,a),!d&&e.mutationListenersCount==1&&e.updateMutationDependency(this[a]);f=this._dependenciesForProperty?this._dependenciesForProperty[a]:null;if(f){e.observedDependentProperties||(e.observedDependentProperties={});for(g=0;h=f[g];g++)e.observedDependentProperties[h]||(e.observedDependentProperties[h]=!0,this.addPropertyChangeListener(h,e,c,!1),e.registerDependency(this,h,null))}}}}),Object.defineProperty(Object.prototype,"removePropertyChangeListener",{value:function(a,b,c){var d=l.getPropertyChangeDescriptor(this,a);if(!d)return;l.unregisterPropertyChangeListener(this,a,b,c),d.updateMutationDependency()}});var p=/^length$/;Object.defineProperty(String.prototype,"addPropertyChangeListener",{value:function(a,b,c,d){if(a!=null&&p.test(a))return;Object.prototype.addPropertyChangeListener.call(this,a,b,c,d)}});var q={configurable:!0},r={enumerable:!1,writable:!0,configurable:!0},s=b.PropertyChangeNotification={phase:null,target:null,propertyPath:null,minus:null,plus:null,currentTarget:null,currentPropertyPath:null,isMutation:!1},t=b.ChangeNotificationDispatchingArray=[],u=/^[0-9]+$/,v=/^length$/;Object.defineProperty(Array.prototype,"addPropertyChangeListener",{value:function(a,b,c,d){var e,f,g,h,i;if(!b)return;if(a==null||(i=a.indexOf("."))==-1){if(v.test(a))return;g=a?/\(.*\)/.test(a):!1,e=a==null,f=u.test(a)}e||f||g?(this.isDispatchingArray||(this.__proto__=t),h=l.registerPropertyChangeListener(this,g?null:a,b,c,!d),f&&!d&&h.mutationListenersCount==1&&h.updateMutationDependency(this[a])):(Object.prototype.addPropertyChangeListener.apply(this,arguments),i==-1&&(h=l.getPropertyChangeDescriptor(this,a),h.setupDependencies(this,a,c,!d)))}}),Object.defineProperty(t,"_dispatchArrayChangeNotification",{enumerable:!1,configurable:!1,value:function(a,b,c,d,e){var f=l.getPropertyChangeDescriptor(this,null),g,h,i=Object.create(s),j,k=this.length,m=e.length,n,o=this.slice(c,c+d);return i.target=this,c+d>k&&(d=k-c),j=m-d,n=k+(j>0?j:0),f&&(h=Object.create(s),h.target=this,h.minus=o,h.plus=e,h.index=c,h.isMutation=!0,f.handleWillChange(h)),this._dispatchArrayBulkWillChangeNotification(i,c,e,j,n),g=this[a].apply(this,b),f&&(h.plus=e,f.handleChange(h)),this._dispatchArrayBulkChangeNotification(i,c,o,j,n),g}}),Object.defineProperty(t,"_dispatchArrayBulkWillChangeNotification",{enumerable:!1,configurable:!1,value:function(a,b,c,d,e){var f,g,h;for(var i=0,j=c.length;i<j;i++,b++)f=l.getPropertyChangeDescriptor(this,b),f&&(g=this[b],h=c[i],g!==h&&(a.index=b,a.propertyPath=String(b),a.minus=g,f.handleWillChange(a)));if(d!=0)for(;b<e;b++)f=l.getPropertyChangeDescriptor(this,b),f&&(g=this[b],h=this[b-d],g!==h&&(a.index=b,a.propertyPath=String(b),a.minus=g,f.handleWillChange(a)))}}),Object.defineProperty(t,"_dispatchArrayBulkChangeNotification",{enumerable:!1,configurable:!1,value:function(a,b,c,d,e){var f,g,h;for(var i=0,j=c.length;i<j;i++,b++)f=l.getPropertyChangeDescriptor(this,b),f&&(g=c[i],h=this[b],g!==h&&(a.index=b,a.propertyPath=String(b),a.minus=g,a.plus=h,f.handleChange(a)));if(d!=0)for(;b<e;b++)f=l.getPropertyChangeDescriptor(this,b),f&&(g=this[b+d],h=this[b],g!==h&&(a.index=b,a.propertyPath=String(b),a.minus=g,a.plus=h,f.handleChange(a)))}}),Object.defineProperty(Array.prototype,"_setProperty",{enumerable:!1,configurable:!0,value:function(a,b){return this[a]=b}}),Object.defineProperty(Array.prototype,"setProperty",{enumerable:!1,configurable:!0,value:function(a,b){return String(a).indexOf(".")==-1?this.__proto__===t&&!isNaN(a)?this._dispatchArrayChangeNotification("_setProperty",arguments,Number(a),1,Array.prototype.slice.call(arguments,1,2)):this[a]=b:Object.prototype.setProperty.apply(this,arguments)}}),Object.defineProperty(t,"isDispatchingArray",{enumerable:!1,configurable:!1,value:!0}),Object.defineProperty(t,"_splice",{enumerable:!1,configurable:!0,value:Array.prototype.splice}),Object.defineProperty(t,"splice",{enumerable:!1,configurable:!0,value:function(a,b){return this._dispatchArrayChangeNotification("_splice",arguments,a,b,Array.prototype.slice.call(arguments,2))}}),Object.defineProperty(t,"_shift",{enumerable:!1,configurable:!0,value:Array.prototype.shift}),Object.defineProperty(t,"shift",{enumerable:!1,configurable:!0,value:function(){return this._dispatchArrayChangeNotification("_shift",arguments,0,1,[])}}),Object.defineProperty(t,"_unshift",{enumerable:!1,configurable:!0,value:Array.prototype.unshift}),Object.defineProperty(t,"unshift",{enumerable:!1,configurable:!0,value:function(){return this._dispatchArrayChangeNotification("_unshift",arguments,0,0,Array.prototype.slice.call(arguments,0))}}),Object.defineProperty(t,"_push",{enumerable:!1,configurable:!0,value:Array.prototype.push}),Object.defineProperty(t,"push",{enumerable:!1,configurable:!0,value:function(){return this._dispatchArrayChangeNotification("_push",arguments,this.length,0,Array.prototype.slice.call(arguments,0))}}),Object.defineProperty(t,"_pop",{enumerable:!1,configurable:!0,value:Array.prototype.pop}),Object.defineProperty(t,"pop",{enumerable:!1,configurable:!0,value:function(){if(this.length>0)return this._dispatchArrayChangeNotification("_pop",arguments,this.length-1,1,[])}}),Object.defineProperty(t,"_reverse",{enumerable:!1,configurable:!0,value:Array.prototype.reverse}),Object.defineProperty(t,"reverse",{enumerable:!1,configurable:!0,value:function(){var a=this.length;if(a===0)return;var b=l.getPropertyChangeDescriptor(this,null),c,d,e=Object.create(s),f,g;e.target=this,b&&(d=Object.create(s),d.target=this,d.isMutation=!0,b.handleWillChange(d));for(var h=0;h<a;h++)c=l.getPropertyChangeDescriptor(this,h),c&&(f=this[h],f!==this[a-h-1]&&(e.index=h,e.propertyPath=String(h),e.minus=f,c.handleWillChange(e)));this._reverse(),b&&(d.minus=d.plus=[],b.handleChange(d));for(var h=0;h<a;h++)c=l.getPropertyChangeDescriptor(this,h),c&&(f=this[a-h-1],g=this[h],f!==g&&(e.index=h,e.propertyPath=String(h),e.minus=f,e.plus=g,c.handleChange(e)))}}),Object.defineProperty(t,"_sortIndexArray",{enumerable:!1,configurable:!0,value:[]}),Object.defineProperty(t,"_sortDefaultCompareFunction",{enumerable:!1,configurable:!0,value:function(a,b){return String(a).localeCompare(String(b))}}),Object.defineProperty(t,"_sort",{enumerable:!1,configurable:!0,value:Array.prototype.sort}),Object.defineProperty(t,"sort",{enumerable:!1,configurable:!0,value:function(a){var b,c=this.length,d,e,f,g,h,i,j,k,m;if(c===0)return;a||(a=this._sortDefaultCompareFunction),b=this,k=t._sortIndexArray,m=k.length;if(m<c){k[c]=c-1;for(var n=m;n<c;n++)k[n]=n}j=k.slice(0,c),this._sort.call(j,function(c,d){return a(b[c],b[d])}),d=l.getPropertyChangeDescriptor(this,null),g=Object.create(s),g.target=this,d&&(f=Object.create(s),f.target=this,f.isMutation=!0,d.handleWillChange(f));for(var n=0;n<c;n++)j[n]=this[j[n]],e=l.getPropertyChangeDescriptor(this,n),e&&(h=this[n],h!==j[n]&&(g.index=n,g.propertyPath=String(n),g.minus=h,e.handleWillChange(g)));for(var n=0;n<c;n++)e=l.getPropertyChangeDescriptor(this,n),e?(h=this[n],i=j[n],this[n]=j[n],h!==i&&(g.index=n,g.propertyPath=String(n),g.minus=h,g.plus=i,e.handleChange(g))):this[n]=j[n];d&&(f.minus=f.plus=[],d.handleChange(f))}}),Object.defineProperty(t,"_wipe",{enumerable:!1,configurable:!0,value:Array.prototype.wipe}),Object.defineProperty(t,"wipe",{enumerable:!1,configurable:!0,value:function(){return this._dispatchArrayChangeNotification("_wipe",arguments,this.length,0,Array.prototype.slice.call(arguments,0)),this}}),typeof define=="function"&&Object.defineProperty(Object.prototype,"__debugChangeNotifications__",{enumerable:!1,configurable:!1,value:function(){var a=l._descriptorsRegistry[this.uuid],b,c=[];if(a){for(b in a){c.push('"'+b+'"',a[b]);var e=a[b].dependencies;if(e){c.push("\n\tlistens to ");for(var f=0;f<e.length;f+=3)e[f+1]==null?c.push("mutation @",e[f]):c.push('"'+e[f+1]+'" @',e[f]),c.push("\n\t           ");c.pop()}var g=a[b].changeListeners,h=[];for(var i in g){var j=g[i].listenerTarget,k=g[i].listenerFunctionName,m=d.getInfoForObject(j);m.objectName==="PropertyChangeBindingListener"&&(j.bindingOrigin===this&&j.bindingPropertyPath===b?h.push('"'+j.targetPropertyPath+'" @ '+(d.getInfoForObject(j.target).objectName||"<object>")+"(",j.target,")"):h.push('"'+j.bindingPropertyPath+'" @ '+(d.getInfoForObject(j.bindingOrigin).objectName||"<object>")+"(",j.bindingOrigin,")"),h.push("\n\t            "))}var n=[];(function o(a,b){var c=a.changeListeners;for(var e in c){var f=c[e].listenerTarget,g=c[e].listenerFunctionName,h=d.getInfoForObject(f);h.objectName!=="PropertyChangeBindingListener"?(a.dependentDescriptorsIndex&&e in a.dependentDescriptorsIndex?n.push('"'+f.propertyPath+'" (',f,")","-> "):n.push(g?g:"<function>","@ "+h.objectName+" (",f,")"),o(f,!0),n.push("\n\t               ")):b&&n.push('"'+f.bindingPropertyPath+'" @ '+d.getInfoForObject(f.bindingOrigin).objectName+"(",f.bindingOrigin,")")}})(a[b]),n.length>0&&(n.pop(),c.push("\n\tis listened by "),c.push.apply(c,n)),h.length>0&&(h.pop(),c.push("\n\tis bound to "),c.push.apply(c,h)),c.push("\n\n")}console.log.apply(console,c)}else console.log("No change listeners installed.")}})}}),define("4763f06","core/serializer",{dependencies:["montage","core/uuid","core/deserializer","core/logger"],factory:function(a,b,c){function d(a,b){return j.create().initWithRequire(b).serializeObject(a)}var e=a("montage").Montage,f=a("core/uuid").Uuid,g=a("core/deserializer").Deserializer,h=a("core/logger").logger("serializer"),i;typeof window!="undefined"&&(i=window.Element);var j=e.create(e,{_INITIAL_LABEL_SEQUENCE_NUMBER:{value:2},_MONTAGE_ID_ATTRIBUTE:{value:"data-montage-id"},_serializedObjects:{value:{}},_serializedReferences:{value:{}},_externalObjects:{value:null},_externalElements:{value:null},_objectStack:{value:null},_objectReferences:{value:null},_objectNamesIndex:{value:null},_objectLabels:{value:null},_serializationUnits:{value:[]},_serializationUnitsIndex:{value:{}},serializeNullValues:{value:!1},delegate:{value:null},defineSerializationUnit:{value:function(a,b){this._serializationUnits.push(this._serializationUnitsIndex[a]={name:a,funktion:b})}},initWithRequire:{value:function(a){return this._require=a,this}},serializeObject:{value:function(a){return this.serialize({root:a})}},serialize:{value:function(b){var c,d,e,f=this.serializeNullValues;this._serializedObjects={},this._serializedReferences={},this._externalObjects={},this._externalElements=[],this._objectNamesIndex={},this._objectLabels={},this._objectReferences={};for(e in b)b[e]!=null&&(this._objectLabels[b[e].uuid]=e),this._objectNamesIndex[e]=this._INITIAL_LABEL_SEQUENCE_NUMBER;for(e in b)if(b[e]!=null||f)d=this._serializeValue(b[e],null,2),e in this._serializedObjects||(this._serializedObjects[e]={value:d});return this._cleanupExternalObjects(),c=this._getSerialization(this._serializedObjects,this._externalObjects),this._require=a,this._serialization=c,c}},set:{value:function(a,b,c){var d=this._objectStack,e=d[d.length-1],f,g;e[a]=b,c==="reference"&&(g=e.uuid,f=this._objectReferences,g in f||(f[g]={}),f[g][a]=!0)}},setAll:{value:function(a){var b=this._objectStack.length-2,c=this._objectStack[b];a||(a=e.getSerializablePropertyNames(c));for(var d=0,f=a.length;d<f;d++){var g=a[d];this.set(g,c[g],e.getPropertyAttribute(c,g,"serializable"))}}},setProperty:{value:function(a,b,c){var d=this._objectStack,e=d[d.length-1],f,g;e.properties[a]=b,c==="reference"&&(f=this._objectReferences,g=e.properties.uuid,g in f||(f[g]={}),f[g][a]=!0)}},setProperties:{value:function(a){var b=this._objectStack.length-2,c=this._objectStack[b];a||(a=e.getSerializablePropertyNames(c));for(var d=0,f=a.length;d<f;d++){var g=a[d];this.setProperty(g,c[g],e.getPropertyAttribute(c,g,"serializable"))}}},setType:{value:function(a,b){if(a==="object"||a==="prototype"||a==="value"){var c=this._objectStack,d=c[c.length-1];delete d.prototype,delete d.object,delete d.value,d[a]=b}}},setUnit:{value:function(a){var b=this._objectStack,c=b[b.length-1];c._units.indexOf(a)===-1&&c._units.push(this._serializationUnitsIndex[a])}},setAllUnits:{value:function(){var a=this._objectStack,b=a[a.length-1];b._units.length=0,b._units.push.apply(b._units,this._serializationUnits)}},addObject:{value:function(a){var b=this._serializeValue(a,null,2),c=this._getObjectLabel(a);c in this._serializedObjects||(this._serializedObjects[c]={value:b})}},addObjectReference:{value:function(a){var b=this._getObjectLabel(a);return this._serializedObjects[b]||(this._externalObjects[b]=a),{"@":b}}},getObjectLabel:{value:function(a){return this._getObjectLabel(a)}},_pushContextObject:{value:function(a){this._objectStack===null?this._objectStack=[a]:this._objectStack.push(a)}},_popContextObject:{value:function(){return this._objectStack.pop()}},_peekContextObject:{value:function(){return this._objectStack[this._objectStack.length-1]}},getExternalObjects:{value:function(){return this._externalObjects}},_cleanupExternalObjects:{value:function(){var a=this._externalObjects,b=this._serializedObjects;for(var c in a){var d=a[c];b[c]&&delete a[c]}}},getExternalElements:{value:function(){return this._externalElements}},_getSerialization:{value:function(a,b){var c=[],d,e="",f;for(var g in a){f=a[g],d=[],"prototype"in f?(d.push('"prototype":'+f.prototype),delete f.prototype):"object"in f&&(d.push('"object":'+f.object),delete f.object);for(var h in f)d.push('"'+h+'":'+f[h]);c.push('"'+g+'":{\n    '+d.join(",\n    ")+"}")}for(var g in b)c.push('"'+g+'":{}');return c.length>0&&(e="{\n  "+c.join(",\n\n  ")+"\n}"),e}},_getObjectLabel:{value:function(a){var b=a.uuid,c=this._objectLabels[b];return c||(this._objectLabels[b]=c=this._generateLabelForObject(a)),c}},_labelRegexp:{enumerable:!1,value:/^[a-zA-Z_$][0-9a-zA-Z_$]*$/},_generateLabelForObject:{value:function(a){var b=(this._labelRegexp.test(a.identifier)?a.identifier:null)||e.getInfoForObject(a).objectName.toLowerCase(),c=this._objectNamesIndex[b];return c?(this._objectNamesIndex[b]=c+1,b+c):(this._objectNamesIndex[b]=this._INITIAL_LABEL_SEQUENCE_NUMBER,b)}},_applySerializationUnits:{value:function(a,b,c){var d;c||(c=this._serializationUnits);for(var e=0,f;f=c[e];e++)d=f.funktion(b,this),typeof d!="undefined"&&(a[f.name]=this._serializeValue(d,null,2))}},_isValueType:{value:function(a){var b=typeof a;return a instanceof RegExp||a instanceof i||Array.isArray(a)||Object.getPrototypeOf(a)===Object.prototype||a.constructor===Function||b!=="object"&&b!=="function"}},_applyTypeUnit:{value:function(a,b){if(this._isValueType(b))a.value=this._serializeValue(b);else{var c=e.getInfoForObject(b),d=this._require.identify(c.moduleId,c.require),f=c.objectName;this._findObjectNameRegExp.test(d);var g=RegExp.$1.replace(this._toCamelCaseRegExp,this._replaceToCamelCase);g===f?f=d:f=d+"["+f+"]",c.isInstance?a.prototype=this._serializeValue(f):a.object=this._serializeValue(f)}}},_findObjectNameRegExp:{value:/([^\/]+?)(\.reel)?$/},_toCamelCaseRegExp:{value:/(?:^|-)([^-])/g},_replaceToCamelCase:{value:function(a,b){return b.toUpperCase()}},_serializeObject:{value:function(a,b,c){var d=a.uuid,f=this._serializedReferences[d],g,h,i,j,k,l,m,n;if(f)return f;j=this._getObjectLabel(a),f='{"@":"'+j+'"}';if(c==="reference")this._serializedObjects[j]||(this._externalObjects[j]=a);else{n=this.delegate,this._serializedReferences[d]=f,g={},i=e.getInfoForObject(a);if(!this._require)throw new Error("Cannot serialize Montage objects without a require function to identify the corresponding package.");k=this._require.identify(i.moduleId,i.require),l=i.objectName,this._findObjectNameRegExp.test(k),m=RegExp.$1.replace(this._toCamelCaseRegExp,this._replaceToCamelCase),m===l?l=k:l=k+"["+l+"]",i.isInstance?g.prototype=this._serializeValue(l):g.object=this._serializeValue(l),typeof a.serializeProperties=="function"?(this._pushContextObject(a),this._pushContextObject({}),a.serializeProperties(this,e.getSerializablePropertyNames(a)),n&&typeof n.serializeObjectProperties=="function"&&n.serializeObjectProperties(this,a,Object.keys(this._peekContextObject())),g.properties=this._serializeObjectLiteral(this._popContextObject(),null,3),this._popContextObject()):(b||(b=a,h=e.getSerializablePropertyNames(a)),n&&typeof n.serializeObjectProperties=="function"?(this._pushContextObject(a),this._pushContextObject({}),this.setAll(h),n.serializeObjectProperties(this,a,h),g.properties=this._serializeObjectLiteral(this._popContextObject(),null,3),this._popContextObject()):g.properties=this._serializeObjectLiteral(b,h,3)),this._applySerializationUnits(g,a),this._serializedObjects[j]=g}return f}},_serializeValue:{value:function(a,b,c){var c=arguments[2]||0,d=typeof a;return a instanceof RegExp?this._serializeRegExp(a):a!=null&&d==="object"||d==="function"?i&&a instanceof i?this._serializeElement(a):Array.isArray(a)?this._serializeArray(a,c+1):a.constructor===Function?this._serializeFunction(a,c):"getInfoForObject"in a?typeof a.serializeSelf!="function"||a.uuid in this._serializedReferences?this._serializeObject(a,null,b):this._customSerialization(a,c+1):this._serializeObjectLiteral(a,null,c+1):JSON.stringify(a)}},_customSerialization:{value:function(a,b){this._pushContextObject(a),this._pushContextObject({properties:{},_units:[]});var c=a.serializeSelf(this),d=this._popContextObject();return this._popContextObject(),typeof c=="undefined"?this._serializeValueWithDescriptor(a,d,b):(this._objectLabels[c.uuid]=this._objectLabels[a.uuid],this._serializeValue(c,b))}},_serializeElement:{value:function(a){var b=a.getAttribute(this._MONTAGE_ID_ATTRIBUTE),c=b;if(c)return this._externalElements.push(a),'{"#":"'+c+'"}';h.error("Error: Not possible to serialize a DOM element with no "+this._MONTAGE_ID_ATTRIBUTE+" assigned: "+a.outerHTML)}},_serializeRegExp:{value:function(a){return this._serializeValue({"/":{source:a.source,flags:(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")}})}},_serializeObjectLiteral:{value:function(a,b){b=b||Object.keys(a);var c=arguments[2]||0,d=b.length,f=[],g=this._objectReferences[a.uuid],h,i,j,k;for(h=0;h<d;h++)i=b[h],j=a[i],typeof j!="undefined"&&(this.serializeNullValues||j!==null)&&(k=e.getPropertyAttribute(a,i,"serializable")||(g&&g.hasOwnProperty(i)?"reference":"auto"),f.push(JSON.stringify(i)+":"+this._serializeValue(j,k,c)));var l=(new Array(c+1)).join("  ");return"{\n"+l+f.join(",\n"+l)+"}"}},_serializeArray:{value:function(a){var b=arguments[1]||0,c=[];for(var d=0,e=a.length;d<e;d++)c.push(this._serializeValue(a[d],null,b));var f=(new Array(b+1)).join("  ");return"[\n"+f+c.join(",\n"+f)+"]"}},_serializeFunctionRegexp:{enumerable:!1,value:/^function[^(]*\(([^\)]+)\)\s*\{([\s\S]*)\}$/m},_serializeFunction:{value:function(a){var b=arguments[1]||0,c=(new Array(b+1)).join("  "),d=a.toString(),e=this._serializeFunctionRegexp.exec(d);return this._serializeValue({"->":{arguments:e[1].split(/\s*,\s*/),body:e[2]}},null,b)}},_serializeValueWithDescriptor:{value:function(a,b,c){var d,e=this.delegate;"prototype"in b||"object"in b||"value"in b||this._applyTypeUnit(b,a);if("value"in b)return this._serializeValue(b.value);e&&typeof e.serializeObjectProperties=="function"&&(this._pushContextObject(a),this._pushContextObject(b.properties),e.serializeObjectProperties(this,a,Object.keys(b.properties)),this._popContextObject(),this._popContextObject()),b.properties=this._serializeObjectLiteral(b.properties,null,3);var f;if(f=b._units)delete b._units,this._applySerializationUnits(b,a,f);return d=this._getObjectLabel(a),this._serializedObjects[d]=b,this._serializedReferences[a.uuid]='{"@":"'+d+'"}'}}});typeof b!="undefined"&&(b.Serializer=j,b.serialize=d)}}),define("4763f06","core/logger",{dependencies:["montage"],factory:function(a,b,c){var d=a("montage").Montage,e,f,g,h,i,j,k,l,m;f=b.loggers={},j=function(a){var b=j.caller.caller,c;return c=b.name,c===""&&(c="anonymous"),c},k=function(a){if(a.getHours){var b=a.getHours(),c=a.getMinutes(),d=a.getSeconds();return(b.length===1?"0"+b:b)+":"+(c.length===1?"0"+c:c)+":"+(d.length===1?"0"+d:d)+"."+a.getMilliseconds()}},i=function(){},g=function(){console.log(arguments)},h=function(){var a=arguments[0],b=a._montage_metadata,c=new Date;b?([].shift.call(arguments),[].unshift.call(arguments,b.objectName+"."+j(a)+"()"),this.buffered?this.buffer.push(arguments):console.debug.apply(console,arguments)):this.buffered?this.buffer.push(arguments):console.debug.apply(console,arguments)},e=b.Logger=d.create(d,{init:{value:function(a,b){this.name=a,this._storeState=!b;if(this._storeState&&m){var c=m.getItem("_montage_logger_"+a);c&&(this.isDebug=c==="true")}return this.isError=!0,this}},name:{value:null},buffer:{value:[],distinct:!0},buffered:{value:!1},flush:{value:function(){var a=this.buffer,b,c;for(c=0;b=a[c];c++)console.debug.apply(console,b);this.buffer.length=0}},isDebug:{get:function(){return this.debug!==i},set:function(a){a?this.debug=h:this.debug=i}},isError:{get:function(){return this.error!==i},set:function(a){a?this.error=h:this.error=i}},debug:{value:i},error:{value:i},toTimeString:{value:k},_storeState:{value:null}}),b.logger=function(a,b){var c;return(c=f[a])==null&&(c=d.create(e).init(a,b),d.defineProperty(f,a,{value:c})),c},l=d.create(d,{init:{value:function(){return document.nativeAddEventListener?(document.nativeAddEventListener("keyup",this,!1),document.nativeAddEventListener("keydown",this,!1)):(document.addEventListener("keyup",this,!1),document.addEventListener("keydown",this,!1)),this}},inspectorElement:{value:null},m_dontRemove:{value:null},titleHeader:{value:null},shown:{value:!1},isCtrl:{value:!1},isAlt:{value:!1},keyup:{value:function(a){a.which==17&&(this.isCtrl=!1),a.which==18&&(this.isAlt=!1)}},keydown:{value:function(a){a.which==17&&(this.isCtrl=!0),a.which==18&&(this.isAlt=!0);if(a.which==76&&this.isCtrl===!0&&this.isAlt===!0)return this.shown?this.hideInspector():this.showInspector(),!1}},change:{value:function(a){var b=a.target.checked,c=a.target.value,d=f[c];d.isDebug=b,d._storeState&&m&&m.setItem("_montage_logger_"+c,b)}},mouseup:{value:function(a){this.hideInspector()}},showInspector:{value:function(){if(!this.inspectorElement){var a=0,b,c,d,e,g,h,i,j,k,l,n;this.m_dontRemove=document.getElementsByTagName("body")[0],this.inspectorElement=document.createElement("div"),this.inspectorElement.id="_montage_logger_inspector",c=document.createElement("div"),this.inspectorElement.appendChild(c),e=document.createElement("div"),c.appendChild(e),d=document.createElement("h1"),d.className="_montage_logger_inspector-title",d.textContent="Logger Inspector",this.titleHeader=d,e.appendChild(d),k=Object.keys(f);for(a=0;b=f[k[a]];a++)g=document.createElement("label"),h=document.createElement("input"),n=document.createElement("span"),g.className="_montage_logger_inspector-content",n.textContent=b.name,g.appendChild(h),g.appendChild(n),h.value=b.name,h.type="checkbox",h.checked=!!b.isDebug,j="_montage_logger_"+b.name,b._storeState&&m&&(i=m.getItem(j),i==null&&m.setItem(j,b.isDebug)),e.appendChild(g);l=document.createElement("style");var o="#_montage_logger_inspector {";o+="    border: 1px solid rgba(15,15,15,0.4);",o+="    position: fixed;",o+="    right: 25px;",o+="    top: 25px;",o+="    -webkit-border-radius: 5px;",o+="    color: #dddddd;",o+='    font: 10px "Lucida Grande","Lucida Sans", sans;',o+="    background:-webkit-gradient(linear, left top, left bottom, from(rgba(15,15,15,0.75)), to(rgba(15,15,15,0.95)) );",o+="    -webkit-box-shadow: 0 0 15px rgba(0,0,0,.3);",o+="    width: 250px;",o+="}",o+="#_montage_logger_inspector div {",o+="    -webkit-border-radius: 5px;",o+="    background: -webkit-gradient(radial, 100 -60, 0, 125 -50, 125, from(rgba(255,255,255,0.00)), to(rgba(0,0,0,.2)), color-stop(1, rgba(0,0,0,.2)));",o+="}",o+="#_montage_logger_inspector div div {",o+="    background: -webkit-gradient(linear, left top, left bottom, from(rgba(255,255,255,0.2)), to(rgba(0,0,0,.1)), color-stop(0.33, rgba(255,255,255,.01)), color-stop(0.33, rgba(50,50,50,1)) );",o+="    padding: 7px 10px;",o+="    -webkit-border-radius: 3px;",o+="    overflow-x: hidden;",o+="}",o+="._montage_logger_inspector-title {",o+="    color: rgba(255,255,255,0.9);",o+="    font-size: 13px;",o+="    margin: 0 0 11px 0;",o+="    padding: 0 0 0 5px;",o+="}",o+="._montage_logger_inspector-content {",o+="    padding: 0 0 0 20px;",o+="    margin: 0;",o+="    display: block;",o+="}",l.textContent=o,document.head.appendChild(l)}this.shown=!0,this.m_dontRemove.appendChild(this.inspectorElement),this.titleHeader.nativeAddEventListener("mouseup",this,!1),this.inspectorElement.nativeAddEventListener("change",this,!1)}},hideInspector:{value:function(){document.getElementById("_montage_logger_inspector")&&(this.shown=!1,this.m_dontRemove.removeChild(this.inspectorElement),this.titleHeader.nativeRemoveEventListener("mouseup",this,!1),this.inspectorElement.nativeRemoveEventListener("change",this,!1))}},handleEvent:{enumerable:!1,value:function(a){this[a.type]&&this[a.type](a)}}});var n=function(){l.create().init()};typeof window!="undefined"&&(m=window.localStorage,window.loggers=f,window.localStorage&&n())}}),define("4763f06","core/uuid",{dependencies:[],factory:function(a,b,c){function d(a){var b=e,c=f,d;return c[0]=b[(d=Math.random()*4294967296)&15],c[1]=b[(d>>>=4)&15],c[2]=b[(d>>>=4)&15],c[3]=b[(d>>>=4)&15],c[4]=b[(d>>>=4)&15],c[5]=b[(d>>>=4)&15],c[6]=b[(d>>>=4)&15],c[7]=b[(d>>>=4)&15],c[9]=b[(d=Math.random()*4294967296)&15],c[10]=b[(d>>>=4)&15],c[11]=b[(d>>>=4)&15],c[12]=b[(d>>>=4)&15],c[15]=b[(d>>>=4)&15],c[16]=b[(d>>>=4)&15],c[17]=b[(d>>>=4)&15],c[19]=b[(d=Math.random()*4294967296)&3|8],c[20]=b[(d>>>=4)&15],c[21]=b[(d>>>=4)&15],c[22]=b[(d>>>=4)&15],c[24]=b[(d>>>=4)&15],c[25]=b[(d>>>=4)&15],c[26]=b[(d>>>=4)&15],c[27]=b[(d>>>=4)&15],c[28]=b[(d=Math.random()*4294967296)&15],c[29]=b[(d>>>=4)&15],c[30]=b[(d>>>=4)&15],c[31]=b[(d>>>=4)&15],c[32]=b[(d>>>=4)&15],c[33]=b[(d>>>=4)&15],c[34]=b[(d>>>=4)&15],c[35]=b[(d>>>=4)&15],c.join("")}var e="0123456789ABCDEF".split(""),f="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split(""),g=b.Uuid=Object.create(Object.prototype,{generate:{enumerable:!1,value:d}});b.generate=d}}),define("4763f06","core/event/mutable-event",{dependencies:["montage"],factory:function(a,b,c){var d=a("montage").Montage;if(typeof window!="undefined")var e={},f={value:null},g=function(a,b){var c="_"+b;d.defineProperty(a,c,{value:undefined}),d.defineProperty(a,b,{get:function(a,b){return function(){return this.hasOwnProperty(b)?this[b]:this._event?this._event[a]:undefined}}(b,c),set:function(a){return function(b){this[a]=b}}(c)})},h=b.MutableEvent=d.create(d,{fromEvent:{value:function(a){var b=a.type,c=e[b],d;return c||(c=function(){},c.prototype=h.create()._initPrototypeWithEvent(a),e[b]=c),d=new c,d._initWithEvent(a),d}},fromType:{value:function(a,b,c,d){var e=document.createEvent("CustomEvent");return e.initCustomEvent(a,b,c,d),this.fromEvent(e)}},_initPrototypeWithEvent:{value:function(a){var b;for(b in a){if(this[b])continue;g(this,b)}return g(this,"replayed"),this}},_initWithEvent:{value:function(a){return this._event=a,this}},preventDefault:{value:function(){this._event.preventDefault()}},stopImmediatePropagation:{value:function(){this._event.stopImmediatePropagation(),this.propagationStopped=!0,this.immediatePropagationStopped=!0}},propagationStopped:{value:!1},immediatePropagationStopped:{value:!1},mutable:{value:!0},target:{value:null},stopPropagation:{value:function(){this._event.stopPropagation(),this.propagationStopped=!0}},stop:{value:function(){this.preventDefault(),this.stopPropagation()}}})}}),define("4763f06","ui/loader.reel/loader",{dependencies:["core/core","ui/component","core/logger"],factory:function(a,b,c){var d=a("core/core").Montage,e=a("ui/component").Component,f=a("core/logger").logger("loader"),g="_montageStartBootstrappingTimeout",h="montage-app-bootstrapper",i="montage-app-loader",j="montage-app-bootstrapping",k="montage-app-loading",l="montage-app-loaded",m=0,n=1,o=2,p=3;b.Loader=d.create(e,{mainModule:{value:"ui/main.reel"},mainName:{value:"Main"},includeFrameworkModules:{value:!1},minimumBootstrappingDuration:{value:1500},minimumLoadingDuration:{value:2e3},_initializedModules:{value:null},initializedModules:{dependencies:["includeFrameworkModules"],enumerable:!1,get:function(){return!this._initializedModules||this.includeFrameworkModules?this._initializedModules:this._initializedModules.slice(this._frameworkModuleCount-1)},set:function(a){this._initializedModules=a}},_requiredModules:{value:null},requiredModules:{dependencies:["includeFrameworkModules"],enumerable:!1,get:function(){return!this._requiredModules||this.includeFrameworkModules?this._requiredModules:this._requiredModules.slice(this._frameworkModuleCount-1)},set:function(a){this._requiredModules=a}},_currentStage:{value:m},currentStage:{get:function(){return this._currentStage},set:function(a){if(a===this._currentStage)return;f.isDebug&&f.debug(this,"CURRENT STAGE: "+a),this._currentStage=a,this.needsDraw=!0}},_readyToShowLoader:{value:!1},isLoadingMainComponent:{value:null},readyToShowLoader:{get:function(){return this._readyToShowLoader},set:function(a){if(a!==this._readyToShowLoader)return;this._readyToShowLoader=a,this.needsDraw=!0}},readyToShowMainComponent:{get:function(){return!!this._mainComponent}},_frameworkModuleCount:{enumerable:!1,value:null},hasTemplate:{enumerable:!1,value:!1},_mainComponent:{enumerable:!1,value:null},_showLoadingTimeout:{enumerable:!1,value:null},_showMainComponentTimeout:{enumerable:!1,value:null},templateDidLoad:{value:function(){f.isDebug&&f.debug(this,"templateDidLoad"),this.element||(this.element=document.documentElement,this.attachToParentComponent()),this.readyToShowLoader=!0;var a=document._montageTiming,b,c=this;a.bootstrappingStartTime?(f.isDebug&&f.debug(this,"had already started bootstrapping"),this.currentStage=n,a.bootstrappingEndTime=Date.now(),b=this.minimumBootstrappingDuration-(a.bootstrappingEndTime-a.bootstrappingStartTime),b>0?(f.isDebug&&f.debug(this,"still need to show bootstrapper for another "+b+"ms"),this._showLoadingTimeout=setTimeout(function(){c._revealLoader()},b)):this._revealLoader()):(f.isDebug&&f.debug(this,"bootstrapping has not started yet"),this._loadMainComponent())}},_revealLoader:{value:function(){f.isDebug&&f.debug(this,"_revealLoader"),this.currentStage=o,document._montageTiming.loadingStartTime=Date.now(),this._frameworkModuleCount=window.require.progress.requiredModules.length,Object.defineBinding(this,"initializedModules",{boundObject:window.require,boundObjectPropertyPath:"progress.initializedModules",oneway:!0}),Object.defineBinding(this,"requiredModules",{boundObject:window.require,boundObjectPropertyPath:"progress.requiredModules",oneway:!0});var a,b=document.getElementById(i),c,d,e;if(b){c=b.children;for(a=0;d=c[a];a++)if(e=d.controller)e.attachToParentComponent(),e.needsDraw=!0}}},_revealMainComponent:{value:function(){f.isDebug&&f.debug(this,"_revealMainComponent"),this.currentStage=p}},_loadMainComponent:{value:function(){f.isDebug&&f.debug(this,"_loadMainComponent"),this.isLoadingMainComponent=!0;var a=this;window.require.async(this.mainModule).then(function(b){return a._mainLoadedCallback(b)}).end()}},_mainLoadedCallback:{value:function(a){f.isDebug&&f.debug(this,"_mainLoadedCallback"),this._mainComponent=a[this.mainName].create(),this.childComponents.push(this._mainComponent),this._mainComponent.setElementWithParentComponent(document.createElement("div"),this),this._mainComponent.needsDraw=!0}},childComponentWillPrepareForDraw:{value:function(a){var b=this,c;if(a===this._mainComponent){f.isDebug&&f.debug(this,"main preparing to draw"),this.isLoadingMainComponent=!1,this._contentToRemove=document.createRange(),c=this.element===document.documentElement?document.body:this.element,this._contentToRemove.selectNodeContents(c),this.childComponents=[this._mainComponent],c.appendChild(this._mainComponent.element);var d=document[g],e=document._montageTiming,h,i;e.bootstrappingStartTime?e.bootstrappingStartTime&&!e.loadingStartTime?(clearTimeout(this._showLoadingTimeout),this._showLoadingTimeout=null,e.bootstrappingEndTime=Date.now(),(h=this.minimumBootstrappingDuration-(e.bootstrappingEndTime-e.bootstrappingStartTime))>0?(f.isDebug&&f.debug(this,"show bootstrapper for another "+h+"ms"),this._showMainComponentTimeout=setTimeout(function(){f.isDebug&&f.debug(this,"ok, shown bootstrapper long enough"),b._revealMainComponent()},h)):setTimeout(function(){f.isDebug&&f.debug(this,"ok, showing bootstrapper now"),b._revealMainComponent()},0)):e.loadingStartTime&&(e.loadingEndTime=Date.now(),(i=this.minimumLoadingDuration-(e.loadingEndTime-e.loadingStartTime))>0?(f.isDebug&&f.debug(this,"show loader for another "+i+"ms"),this._showMainComponentTimeout=setTimeout(function(){f.isDebug&&f.debug(this,"ok, shown loader long enough"),b._revealMainComponent()},i)):this._revealMainComponent()):(f.isDebug&&f.debug(this,"bootstrapper never shown"),clearTimeout(d),d=null,this._revealMainComponent())}}},removeContentOnLoad:{value:!0},_forceContentRemoval:{enumerable:!1,value:!1},_contentToRemove:{enumerable:!1,value:null},removeContent:{value:function(){this._forceContentRemoval=!0,this.needsDraw=!0}},draw:{value:function(){!this.readyToShowMainComponent&&!this.isLoadingMainComponent&&(f.isDebug&&f.debug(this,"draw; start loading main component"),this._loadMainComponent());if(o===this.currentStage)this.element.classList.remove(j),this.element.classList.add(k);else if(p===this.currentStage&&this._contentToRemove){this.element.classList.remove(j),this.element.classList.remove(k);if(this.removeContentOnLoad||this._forceContentRemoval)this._contentToRemove.extractContents(),this._contentToRemove.detach(),this._contentToRemove=null;this.element.classList.add(l);var a=document.createEvent("CustomEvent");a.initCustomEvent("componentLoaded",!0,!0,this._mainComponent),this.dispatchEvent(a,!0,!0)}}}})}}),define("4763f06","core/core",{dependencies:["core/shim/object","core/shim/array","core/shim/string","core/extras/object","core/extras/array","core/extras/string","core/extras/function","core/extras/date","core/uuid"],factory:function(a,b,c){function d(a,b){var c=f+b+e;return a.hasOwnProperty(c)?a[c]:Object.defineProperty(a,c,{enumerable:!1,configurable:!1,writable:!1,value:Object.create(d(Object.getPrototypeOf(a),b))})[c]}a("core/shim/object"),a("core/shim/array"),a("core/shim/string"),a("core/extras/object"),a("core/extras/array"),a("core/extras/string"),a("core/extras/function"),a("core/extras/date");var e="AttributeProperties",f="_",g="__proto__",h="value",i="enumerable",j="distinct",k="serializable",l="modify",m=Array.prototype,n=Object.prototype,o=b.Montage={};Object.defineProperty(o,"create",{configurable:!0,value:function(a,b){if(!b){var c=Object.create(typeof a=="undefined"?this:a);return typeof c.didCreate=="function"&&c.didCreate(),c}var d=Object.create(a);return o.defineProperties(d,b),d}});var p=[k];p.forEach(function(a){Object.defineProperty(Object.prototype,f+a+e,{enumerable:!1,configurable:!1,writable:!1,value:{}})}),Object.defineProperty(o,"defineProperty",{value:function(a,b,c){var e=c.dependencies,l=h in c;if(j in c&&!l)throw"Cannot use distinct attribute on non-value property '"+b+"'";if(g in c)c.__proto__=l?typeof c.value=="function"?s:r:q;else{var p;l?typeof c.value=="function"?p=s:p=r:p=q;for(var t in p)t in c||(c[t]=p[t])}!c.hasOwnProperty(i)&&b.charAt(0)===f&&(c.enumerable=!1),c.hasOwnProperty(k)||(c.enumerable?c.get&&!c.set?c.serializable=!1:c.writable===!1&&(c.serializable=!1):c.serializable=!1);if(e){var u=0,v;for(;v=e[u];u++)o.addDependencyToProperty(a,v,b)}k in c&&(d(a,k)[b]=c.serializable);if(c.distinct===!0&&typeof c.value=="object")(function(a,b,c,d){var e=function(a,b,c){Object.defineProperty(a,b,{enumerable:!1,configurable:!0,writable:!0,value:c})};c.constructor===Object&&Object.getPrototypeOf(c)===n?Object.keys(c).length!==0?Object.defineProperty(d,a,{configurable:!0,get:function(){var a=this[b];if(!a){var d;a={};for(d in c)a[d]=c[d];this.hasOwnProperty(b)?this[b]=a:e(this,b,a)}return a},set:function(a){this.hasOwnProperty(b)?this[b]=a:e(this,b,a)}}):Object.defineProperty(d,a,{configurable:!0,get:function(){var a=this[b];return a||(a={},this.hasOwnProperty(b)?this[b]=a:e(this,b,a)),a},set:function(a){this.hasOwnProperty(b)?this[b]=a:e(this,b,a)}}):(c.__proto__||Object.getPrototypeOf(c))===m?c.length!==0?Object.defineProperty(d,a,{configurable:!0,get:function(){var a=this[b];if(!a){var d,f;a=[];for(d=0;typeof (f=c[d])!="undefined";d++)a[d]=f;this.hasOwnProperty(b)?this[b]=a:e(this,b,a)}return a},set:function(a){this.hasOwnProperty(b)?this[b]=a:e(this,b,a)}}):Object.defineProperty(d,a,{configurable:!0,get:function(){var a=this[b];return a||(a=[],this.hasOwnProperty(b)?this[b]=a:e(this,b,a)),a},set:function(a){this.hasOwnProperty(b)?this[b]=a:e(this,b,a)}}):c.constructor.prototype===Object.getPrototypeOf(c)?Object.defineProperty(d,a,{configurable:!0,get:function(){var a=this[b];if(!a){var d;a=new c.constructor;for(d in c)a[d]=c[d];this.hasOwnProperty(b)?this[b]=a:e(this,b,a)}return a},set:function(a){this.hasOwnProperty(b)?this[b]=a:e(this,b,a)}}):Object.defineProperty(d,a,{configurable:!0,get:function(){var a=this[b];return a||(a=Object.create(c.__proto__||Object.getPrototypeOf(c)),this.hasOwnProperty(b)?this[b]=a:e(this,b,a)),a},set:function(a){this.hasOwnProperty(b)?this[b]=a:e(this,b,a)}})})(b,f+b,c.value,a);else return Object.defineProperty(a,b,c)}}),Object.defineProperty(o,"defineProperties",{value:function(a,b){for(var c in b)"_bindingDescriptors"!==c&&this.defineProperty(a,c,b[c]);return a}});var q={enumerable:!0,configurable:!0,serializable:"reference"},r={writable:!0,enumerable:!0,configurable:!0,serializable:"reference"},s={writable:!0,enumerable:!1,configurable:!0,serializable:!1};o.defineProperty(o,"addDependencyToProperty",{value:function(a,b,c){a._dependenciesForProperty||o.defineProperty(a,"_dependenciesForProperty",{value:{}}),a._dependenciesForProperty[c]||(a._dependenciesForProperty[c]=[]),a._dependenciesForProperty[c].push(b)}}),o.defineProperty(o,"removeDependencyFromProperty",{value:function(a,b,c){if(!a._dependenciesForProperty)return;var d=a._dependenciesForProperty[c];d&&(d=d.filter(function(a){return a!==b}))}}),o.defineProperty(o,"getSerializablePropertyNames",{value:function(a){var b=[],c=a._serializableAttributeProperties;if(c)for(var d in c)c[d]&&b.push(d);return b}}),o.defineProperty(o,"getPropertyAttribute",{value:function(a,b,c){var d=f+c+e,g=a[d];if(g)return g[b]}}),o.defineProperty(o,"getPropertyAttributes",{value:function(a,b){var c={},d=f+b+e,g=a[d];if(!g)return;for(var h in g)c[h]=g[h];return c}});var t={isInstance:{value:!0}},u={objectName:{value:"Function"},isInstance:{value:!0}};o.defineProperty(o,"getInfoForObject",{value:function(a){var b,c;if(w.call(a,"_montage_metadata"))return a._montage_metadata;b=a._montage_metadata||a.constructor&&a.constructor._montage_metadata||null,a.constructor===Function?c=u:c=t;try{return Object.defineProperty(a,"_montage_metadata",{enumerable:!1,writable:!0,value:Object.create(b,c)})._montage_metadata}catch(d){return a._montage_metadata=Object.create(b,c)}}}),Object.defineProperty(o,"doNothing",{value:function(){}}),Object.defineProperty(o,"self",{value:function(){return this}}),Object.defineProperty(o,"__OBJECT_COUNT",{value:0,writable:!0});var v=a("core/uuid"),w=Object.prototype.hasOwnProperty,x=function(){var a=v.generate(),b=o.getInfoForObject(this);try{if(b!==null&&b.isInstance===!1)this._uuid=a,Object.defineProperty(this,"uuid",{get:function(){return this.hasOwnProperty("uuid")?this._uuid:x.call(this)}});else{b.isInstance&&Object.defineProperty(this,"uuid",{configurable:!0,enumerable:!1,writable:!1,value:a});if(this instanceof Element||!b.isInstance||!(h in Object.getOwnPropertyDescriptor(this,"uuid"))||!(g in this))this._uuid=a}}catch(c){this._uuid=a}return a},y=function(){return w.call(this,"_uuid")?this._uuid:x.call(this)};Object.defineProperty(Object.prototype,"_uuid",{enumerable:!1,value:null,writable:!0}),Object.defineProperty(Object.prototype,"uuid",{configurable:!0,get:y,set:function(){}}),o.defineProperty(o,"identifier",{value:null,serializable:!0}),Object.defineProperty(o,"equals",{value:function(a){return this===a||this.uuid===a.uuid}}),Object.defineProperty(o,"callDelegateMethod",{value:function(a){var b=this.delegate,c,d;if(typeof this.identifier=="string"){c=this.identifier+a.toCapitalized();if(b&&typeof (d=b[c])=="function")return m.shift.call(arguments),d.apply(b,arguments)}if(b&&typeof (d=b[a])=="function")return m.shift.call(arguments),d.apply(b,arguments)}})}}),define("4763f06","ui/component",{dependencies:["montage","ui/template","core/gate","core/logger","core/event/event-manager"],factory:function(a,b,c){var d=a("montage").Montage,e=a("ui/template").Template,f=a("core/gate").Gate,g=a("core/logger").logger("component"),h=a("core/logger").logger("drawing"),i=a("core/event/event-manager").defaultEventManager,j=b.Component=d.create(d,{delegate:{value:null},templateObjects:{serializable:!1,value:null},parentProperty:{value:"parentComponent"},_dispatchActionEvent:{value:function(){this.dispatchEvent(this.createActionEvent())},enumerable:!1},createActionEvent:{value:function(){var a=document.createEvent("CustomEvent");return a.initCustomEvent("action",!0,!0,null),a}},canDrawGate:{get:function(){return this._canDrawGate||(this._canDrawGate=f.create().initWithDelegate(this),this._canDrawGate.setField("componentTreeLoaded",!1)),this._canDrawGate},enumerable:!1},_blockDrawGate:{value:null},blockDrawGate:{enumerable:!1,get:function(){return this._blockDrawGate||(this._blockDrawGate=f.create().initWithDelegate(this),this._blockDrawGate.setField("element",!1),this._blockDrawGate.setField("drawRequested",!1)),this._blockDrawGate}},_firstDraw:{enumerable:!1,value:!0},_completedFirstDraw:{enumerable:!1,value:!1},_element:{enumerable:!1,value:null},element:{get:function(){return this._element},set:function(a){if(a==null){console.warn("Tried to set element of ",this," to ",a);return}if(this.isDeserializing)this.eventManager.registerEventHandlerForElement(this,a),this._isTemplateInstantiated?this._templateElement||(this._templateElement=a):(this._element=a,!this.blockDrawGate.value&&this._element&&this.blockDrawGate.setField("element",!0));else{if(!this._firstDraw){console.error("Cannot change element of ",this," after it has been set");return}this.eventManager.registerEventHandlerForElement(this,a),this._element=a,!this.blockDrawGate.value&&this._element&&this.blockDrawGate.setField("element",!0)}}},setElementWithParentComponent:{value:function(a,b){this._alternateParentComponent=b,this.element!=a&&(this.element=a)}},application:{enumerable:!1,get:function(){return document.application}},eventManager:{enumerable:!1,get:function(){return i}},rootComponent:{enumerable:!1,get:function(){return k}},acceptsDirectFocus:{enumerable:!1,value:function(){return!1}},elementControllerFromEvent:{enumerable:!1,value:function(a,b){return b}},_alternateParentComponent:{value:null},_cachedParentComponent:{value:null},parentComponent:{enumerable:!1,get:function(){var a=this._cachedParentComponent;return a==null?this._cachedParentComponent=this.findParentComponent():a}},findParentComponent:{value:function(){var a=this.element,b,c=this.eventManager;if(a){while((b=a.parentNode)!=null&&c.eventHandlerForElement(b)==null)a=b;return b?c.eventHandlerForElement(b):this._alternateParentComponent}}},querySelectorComponent:{value:function(a){if(typeof a!="string")throw"querySelectorComponent: Selector needs to be a string.";var b=a.match(/^\s*(?:@([^>\s]+))?(?:\s*(>)?\s*@([^>\s]+)(.*))?$/);if(!b)throw'querySelectorComponent: Syntax error "'+a+'"';var c=this.childComponents,e=b[1],f=b[2]||" ",g=b[3],h=b[4],i;if(e){h=g?"@"+g+h:"";for(var j=0,k;k=c[j];j++){if(e===d.getInfoForObject(k).label)return h?k.querySelectorComponent(h):k;i=k.querySelectorComponent(a);if(i)return i}}else for(var j=0,k;k=c[j];j++)if(g===d.getInfoForObject(k).label)return h?k.querySelectorComponent(h):k;return null}},querySelectorAllComponent:{value:function(a,b){if(typeof a!="string")throw"querySelectorComponent: Selector needs to be a string.";var c=a.match(/^\s*(?:@([^>\s]+))?(?:\s*(>)?\s*@([^>\s]+)(.*))?$/);if(!c)throw'querySelectorComponent: Syntax error "'+a+'"';var e=this.childComponents,f=c[1],g=c[2]||" ",h=c[3],i=c[4],j=[];if(f){i=h?"@"+h+i:"";for(var k=0,l;l=e[k];k++)f!==d.getInfoForObject(l).label||!!b&&b!==l.ownerComponent?j=j.concat(l.querySelectorAllComponent(a,b)):i?j=j.concat(l.querySelectorAllComponent(i)):j.push(l)}else for(var k=0,l;l=e[k];k++)h===d.getInfoForObject(l).label&&(!b||b===l.ownerComponent)&&(i?j=j.concat(l.querySelectorAllComponent(i,b)):j.push(l));return j}},template:{enumerable:!1,value:null},hasTemplate:{enumerable:!1,value:!0},templateModuleId:{serializable:!1,value:null},_template:{value:null},_treeLevel:{value:0},_addChildComponent:{value:function(a){this.childComponents.indexOf(a)==-1&&(this.childComponents.push(a),a._cachedParentComponent=this)}},attachToParentComponent:{value:function(){this._cachedParentComponent=null;var a=this.parentComponent,b,c;if(a){b=a.childComponents;for(var d=0;c=b[d];d++){var e=c.findParentComponent();e===this&&(a.removeChildComponent(c),e._addChildComponent(c))}a._addChildComponent(this)}}},detachFromParentComponent:{value:function(){var a=this.parentComponent;a&&a.removeChildComponent(this)}},removeChildComponent:{value:function(a){var b=this.childComponents,c=a._element,d=b.indexOf(a);d>-1&&(b.splice(d,1),a._cachedParentComponent=null,a._alternateParentComponent=null)}},childComponents:{enumerable:!1,distinct:!0,value:[]},ownerComponent:{enumerable:!1,value:null},components:{enumerable:!1,value:{}},_isComponentExpanded:{enumerable:!1,value:null},_isTemplateLoaded:{enumerable:!1,value:null},_isTemplateInstantiated:{enumerable:!1,value:null},cleanupDeletedComponentTree:{value:function(a){a&&Object.deleteBindings(this),this.needsDraw=!1,this.traverseComponentTree(function(b){a&&Object.deleteBindings(b),b.needsDraw=!1})}},originalContent:{serializable:!1,value:null},_newDomContent:{enumerable:!1,value:null},domContent:{serializable:!1,get:function(){return this._element?Array.prototype.slice.call(this._element.childNodes,0):null},set:function(a){function b(a){var c=a.controller;if(c)c.detachFromParentComponent(),d.push(c);else{var e=a.childNodes;for(var f=0,g;g=e[f];f++)b(g)}}var c,d=[];this._newDomContent=a,this.needsDraw=!0,this._newDomContent===null&&(this._shouldClearDomContentOnNextDraw=!0),typeof this.contentWillChange=="function"&&this.contentWillChange(a),c=this.childComponents;for(var e=0,f;f=c[e];e++)f.detachFromParentComponent(),f.cleanupDeletedComponentTree();if(a instanceof Element)b(a);else if(a)for(var e=0;e<a.length;e++)b(a[e]);for(var e=0,f;f=d[e];e++)this._addChildComponent(f)}},_shouldClearDomContentOnNextDraw:{value:!1},clonesChildComponents:{writable:!1,value:!1},deserializedFromSerialization:{value:function(){this.attachToParentComponent(),this._element&&(this._newDomContent?this.originalContent=this._newDomContent:this.originalContent=Array.prototype.slice.call(this._element.childNodes,0)),this.hasOwnProperty("identifier")||(this.identifier=d.getInfoForObject(this).label)}},serializeProperties:{value:function(a){a.setAll();var b=this.childComponents;for(var c=0,d=b.length;c<d;c++)a.addObject(b[c])}},canDraw:{value:function(){return this._canDraw}},_canDraw:{get:function(){return!this._canDrawGate||this._canDrawGate.value},set:function(a){k.componentCanDraw(this,a)},enumerable:!1},_prepareCanDraw:{enumerable:!1,value:function(){this._isComponentTreeLoaded||this.loadComponentTree()}},_loadComponentTreeCallbacks:{enumerable:!1,value:null},_isComponentTreeLoaded:{enumerable:!1,value:null},_isComponentTreeLoading:{enumerable:!1,value:null},loadComponentTree:{value:function(a){function b(){var a,b=c._loadComponentTreeCallbacks;c._isComponentTreeLoading=!1,c._isComponentTreeLoaded=!0,d.setField("componentTreeLoaded",!0);if(b){for(var e=0;a=b[e];e++)a(c);c._loadComponentTreeCallbacks=b=null}}var c=this,d=this.canDrawGate;if(this._isComponentTreeLoaded){a&&a(this);return}a&&(this._loadComponentTreeCallbacks==null?this._loadComponentTreeCallbacks=[a]:this._loadComponentTreeCallbacks.push(a));if(this._isComponentTreeLoading)return;d.setField("componentTreeLoaded",!1);if(this.needsDraw||this.hasTemplate)this._canDraw=!1;this._isComponentTreeLoading=!0,this.expandComponent(function(){var a,d=c.childComponents,e=d.length,f=0,g;if(e===0){b();return}for(g=0;a=d[g];g++)a.loadComponentTree(function(){++f===e&&b()})})}},traverseComponentTree:{value:function(a,b){function c(){var c=d.childComponents,e,f;if(a&&a(d)===!1){b&&b();return}if((f=c.length)===0){b&&b();return}for(var g=0;e=c[g];g++)e.traverseComponentTree(a,function(){--f===0&&b&&b()})}var d=this;this._isComponentExpanded?c():this.expandComponent(function(){c()})}},expandComponent:{value:function(a){var b=this;this.hasTemplate&&!this._isTemplateInstantiated?this.loadTemplate(function(){b._isComponentExpanded=!0,a&&a()}):(b._isComponentExpanded=!0,a&&a())}},_loadTemplateCallbacks:{enumerable:!1,value:null},loadTemplate:{value:function(a){var b=this;this._isTemplateInstantiated||this._loadTemplate(function(c){var d=b.templateObjects;d?d.owner=b:b.templateObjects=d={owner:b},b._isTemplateInstantiated=!0,c.instantiateWithInstancesAndDocument(d,b._element.ownerDocument,function(){a&&a()})})}},_loadTemplate:{value:function(a){if(this._isTemplateLoaded){a&&a(this._template);return}a&&(this._loadTemplateCallbacks===null?this._loadTemplateCallbacks=[a]:this._loadTemplateCallbacks.push(a));if(this._isTemplateLoading)return;this._isTemplateLoading=!0;var b=this,c,f,h,i=function(c){var d=b._loadTemplateCallbacks;b._template=c,b._isTemplateLoaded=!0,b._isTemplateLoading=!1;if(d){for(var e=0;a=d[e];e++)a(c);b._loadTemplateCallbacks=d=null}};c=this.templateModuleId,f=d.getInfoForObject(this);if(!c){h=f.moduleId;var j=h.lastIndexOf("/");c=h+"/"+h.slice(j===-1?0:j+1,-5)+".html"}g.isDebug&&g.debug(this,"Will load "+c),e.templateWithModuleId(f.require,c,i)}},_deserializedFromTemplate:{value:function(a){this.ownerComponent||(j.isPrototypeOf(a)?this.ownerComponent=a:this.ownerComponent=this.rootComponent)}},gateDidBecomeTrue:{value:function(a){a==this._canDrawGate?this._canDraw=!0:a==this._blockDrawGate&&(k.componentBlockDraw(this),this._prepareCanDraw())},enumerable:!1},_canDrawGate:{enumerable:!1,value:null},_preparedForActivationEvents:{enumerable:!1,value:!1},_drawIfNeeded:{enumerable:!1,value:function(a){var b,c,d,e;this._treeLevel=a,this.needsDraw&&!this._addedToDrawCycle&&k.addToDrawCycle(this),h.isDebug&&h.debug(this,"drawList: "+(this._drawList||[]).length+" of "+this.childComponents.length);if(this._drawList!==null&&this._drawList.length>0){c=this._drawList,this._drawList=[],e=c.length;for(d=0;d<e;d++)b=c[d],h.isDebug&&h.debug("Parent Component "+(this.element!=null?this.element.id:"")+" drawList length: "+c.length),b._addedToDrawList=!1,h.isDebug&&h.debug(this,"childComponent: "+b.element+"; canDraw: "+b.canDraw()),b.canDraw()&&b._drawIfNeeded(a+1)}}},_updateComponentDom:{value:function(){var a,b,c,d;if(this._firstDraw){this.parentComponent&&typeof this.parentComponent.childComponentWillPrepareForDraw=="function"&&this.parentComponent.childComponentWillPrepareForDraw(this),this._prepareForDraw(),this.prepareForDraw&&this.prepareForDraw(),c=this.composerList.length;for(d=0;d<c;d++)b=this.composerList[d],b.lazyLoad||b._load();this._firstDraw=!1}if(this._newDomContent!==null||this._shouldClearDomContentOnNextDraw)h.isDebug&&g.debug("Component content changed: component ",this._montage_metadata.objectName,this.identifier," newDomContent",this._newDomContent),this._performDomContentChanges()}},_replaceElementWithTemplate:{enumerable:!1,value:function(){var a=this.element,b=this._templateElement,c=this.element.attributes,d,e,f,g;for(f=0;g=c[f];f++)d=g.nodeName,d==="id"||d==="data-montage-id"?e=g.nodeValue:e=(b.getAttribute(d)||"")+(d==="style"?"; ":" ")+g.nodeValue,b.setAttribute(d,e);a.parentNode?a.parentNode.replaceChild(b,a):console.warn("Warning: Trying to replace element ",a," which has no parentNode"),this.eventManager.unregisterEventHandlerForElement(a),this.eventManager.registerEventHandlerForElement(this,b),this._element=b,this._templateElement=null,this._newDomContent&&(this._newDomContent=null,this._shouldClearDomContentOnNextDraw=!1)}},_prepareForDraw:{value:function(){g.isDebug&&g.debug(this,"_templateElement: "+this._templateElement),this._templateElement&&this._replaceElementWithTemplate();var a=this.childComponents;for(var b=0,c;c=a[b];b++)h.isDebug&&h.debug(this,"needsDraw = true for: "+c._montage_metadata.exportedSymbol),c.needsDraw=!0},enumerable:!1},prepareForActivationEvents:{enumerable:!1,value:null},_prepareForActivationEvents:{value:function(){var a=this.composerList.length,b;for(a=0;a<this.composerList.length;a++)b=this.composerList[a],b.lazyLoad&&b._load();typeof this.prepareForActivationEvents=="function"&&this.prepareForActivationEvents()}},_performDomContentChanges:{value:function(){var a=this._newDomContent,b=this._element.childNodes[0],c;if(a||this._shouldClearDomContentOnNextDraw){c=this._element,c.innerHTML="";if(a instanceof Element)c.appendChild(a);else if(a!==null)for(var d=0,e;e=a[d];d++)c.appendChild(e);this._newDomContent=null,typeof this.contentDidChange=="function"&&this.contentDidChange(this._element.childNodes[0],b),this._shouldClearDomContentOnNextDraw=!1}}},draw:{enumerable:!1,value:function(){}},willDraw:{enumerable:!1,value:null},didDraw:{enumerable:!1,value:function(){}},_addedToDrawList:{value:!1},_addToParentsDrawList:{enumerable:!1,value:function(){if(!this._addedToDrawList){var a=this.parentComponent;a?a._addToDrawList(this):h.isDebug&&h.debug(this,"parentComponent is null"),h.isDebug&&h.debug("drawList -- childComponent",this._montage_metadata.objectName," added to ",a._montage_metadata.objectName)}}},_needsDraw:{enumerable:!1,value:!1},needsDraw:{enumerable:!1,get:function(){return!!this._needsDraw},set:function(a){if(this.isDeserializing)return;this._needsDraw!==a&&(h.isDebug&&h.debug("NEEDS DRAW TOGGLED "+a+" FOR "+this._montage_metadata.objectName),this._needsDraw=!!a,a&&(this.canDrawGate.value?this._addToParentsDrawList():this.blockDrawGate.setField("drawRequested",!0)))}},_drawList:{value:null},__addToDrawList:{enumerable:!1,value:function(a){this._drawList===null?(this._drawList=[a],a._addedToDrawList=!0):this._drawList.indexOf(a)===-1&&(this._drawList.push(a),a._addedToDrawList=!0)}},_addToDrawList:{enumerable:!1,value:function(a){this.__addToDrawList(a),this._addToParentsDrawList()}},_templateElement:{enumerable:!1,value:null},surrenderPointer:{value:function(a,b){return!0}},composerList:{value:[],distinct:!0,serializable:!1},addComposer:{value:function(a){this.addComposerForElement(a,a.element)}},addComposerForElement:{value:function(a,b){a.component=this,a.element=b,this.composerList.push(a),this._firstDraw||(a.lazyLoad?this._preparedForActivationEvents&&a._load():a._load())}},scheduleComposer:{value:function(a){this.rootComponent.addToComposerList(a)}},removeComposer:{value:function(a){var b,c;c=this.composerList.length;for(b=0;b<c;b++)if(this.composerList[b].uuid===a.uuid){this.composerList[b].unload(),this.composerList.splice(b,1);break}}},clearAllComposers:{value:function(){var a,b,c=this.composerList;b=c.length;for(a=0;a<b;a++)c[a].unload();c.splice(0,b)}}}),k=d.create(j,{init:{value:function(){return this}},needsDraw:{enumerable:!0,get:function(){return!1},set:function(a){if(this._needsDraw!==a){this._needsDraw=!!a;if(a){var b=this.childComponents;for(var c=0,d;d=b[c];c++)h.isDebug&&h.debug(this,"needsDraw = true for: "+d._montage_metadata.exportedSymbol),d.needsDraw=!0}}}},canDrawGate:{get:function(){return this._canDrawGate||(this._canDrawGate=f.create().initWithDelegate(this))}},_clearNeedsDrawTimeOut:{value:null},_needsDrawList:{value:[]},_cannotDrawList:{value:null},componentBlockDraw:{value:function(a){this._cannotDrawList=this._cannotDrawList?this._cannotDrawList:{},this._cannotDrawList[a.uuid]=a,this._clearNeedsDrawTimeOut&&(window.clearTimeout(this._clearNeedsDrawTimeOut),this._clearNeedsDrawTimeOut=null)}},componentCanDraw:{value:function(a,b){if(b){delete this._cannotDrawList[a.uuid],this._needsDrawList.push(a);if(Object.keys(this._cannotDrawList).length===0&&this._needsDrawList.length>0&&!this._clearNeedsDrawTimeOut){var c=this;this._clearNeedsDrawTimeOut=window.setTimeout(function(){c._clearNeedsDrawList()},0)}}else this._clearNeedsDrawTimeOut&&(window.clearTimeout(this._clearNeedsDrawTimeOut),this._clearNeedsDrawTimeOut=null)}},_clearNeedsDrawList:{value:function(){var a,b,c,d=this._needsDrawList;c=d.length;for(b=0;b<c;b++)a=d[b],a.needsDraw&&a._addToParentsDrawList();this._clearNeedsDrawTimeOut=null,d.splice(0,c)}},removeFromCannotDrawList:{value:function(a){delete this._cannotDrawList[a];if(Object.keys(this._cannotDrawList).length===0&&this._needsDrawList.length>0&&!this._clearNeedsDrawTimeOut){var b=this;this._clearNeedsDrawTimeOut=window.setTimeout(function(){b._clearNeedsDrawList()},0)}}},_cancelDrawIfScheduled:{value:function(){var a=this.requestedAnimationFrame,b=this.cancelAnimationFrame;a!==null&&(this._frameTime||(g.isDebug&&g.debug(this,"clearing draw"),b?b.call(window,a):window.clearTimeout(a),this.requestedAnimationFrame=null))}},_addToDrawList:{value:function(a){this.__addToDrawList(a),h.isDebug&&h.debug(this,this.canDrawGate.value,this.requestedAnimationFrame),this.drawTree()},enumerable:!1},addToComposerList:{value:function(a){this.composerList.push(a),h.isDebug&&h.debug(this,a,"Added to composer list"),this._scheduleComposerRequest=!0,this.drawTree()}},composerListSwap:{value:[],distinct:!0},_scheduleComposerRequest:{value:!1},requestedAnimationFrame:{value:null,enumerable:!1},requestAnimationFrame:{value:window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame:window.mozRequestAnimationFrame,enumerable:!1},cancelAnimationFrame:{value:window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame:window.mozCancelRequestAnimationFrame,enumerable:!1},_frameTime:{value:null},_oldSource:{value:null},_diff:{value:function(a,b){var c={},d={};for(var e=0;e<b.length;e++)c[b[e]]==null&&(c[b[e]]={rows:[],o:null}),c[b[e]].rows.push(e);for(e=0;e<a.length;e++)d[a[e]]==null&&(d[a[e]]={rows:[],n:null}),d[a[e]].rows.push(e);for(e in c)c[e].rows.length==1&&typeof d[e]!="undefined"&&d[e].rows.length==1&&(b[c[e].rows[0]]={text:b[c[e].rows[0]],row:d[e].rows[0]},a[d[e].rows[0]]={text:a[d[e].rows[0]],row:c[e].rows[0]});for(e=0;e<b.length-1;e++)b[e].text!=null&&b[e+1].text==null&&b[e].row+1<a.length&&a[b[e].row+1].text==null&&b[e+1]==a[b[e].row+1]&&(b[e+1]={text:b[e+1],row:b[e].row+1},a[b[e].row+1]={text:a[b[e].row+1],row:e+1});for(e=b.length-1;e>0;e--)b[e].text!=null&&b[e-1].text==null&&b[e].row>0&&a[b[e].row-1].text==null&&b[e-1]==a[b[e].row-1]&&(b[e-1]={text:b[e-1],row:b[e].row-1},a[b[e].row-1]={text:a[b[e].row-1],row:e-1});return{o:a,n:b}}},_previousDrawDate:{enumerable:!1,value:0},drawTree:{value:function(){if(this.requestedAnimationFrame===null){h.isDebug&&h.debug(this,"requesting a draw");var a=this,b=this.requestAnimationFrame,c=function(b){a._frameTime=b?b:Date.now(),a._clearNeedsDrawTimeOut&&a._clearNeedsDrawList();if(h.isDebug){var c=document.documentElement.innerHTML;if(a._oldSource&&c!==a._oldSource){var d=["DOM modified outside of the draw loop"],e=a._diff(a._oldSource.split("\n"),c.split("\n"));for(var f=0;f<e.n.length;f++)if(e.n[f].text==null)d.push("+ "+e.n[f]);else for(var g=e.n[f].row+1;g<e.o.length&&e.o[g].text==null;g++)d.push("- "+e.o[g]);console.warn(d.join("\n"))}console.group((b?h.toTimeString(new Date(b))+" ":"")+"Draw Fired")}a.drawIfNeeded(),h.isDebug&&(console.groupEnd(),a._oldSource=document.documentElement.innerHTML),a._frameTime=null,a._scheduleComposerRequest&&a.drawTree()};if(b)this.requestedAnimationFrame=b.call(window,c);else{var d=Date.now(),e=17-d+this._previousDrawDate;e<0&&(e=0),this.requestedAnimationFrame=setTimeout(c,e),this._previousDrawDate=d+e}this._scheduleComposerRequest=!1}},enumerable:!1},_readyToDrawList:{enumerable:!1,value:[]},_readyToDrawListIndex:{enumerable:!1,value:null},addToDrawCycle:{value:function(a){var b=this._readyToDrawListIndex,c,d;if(b.hasOwnProperty(a.uuid)){h.isDebug&&h.debug("components should not be added to the draw cycle twice");return}this._readyToDrawList.push(a),this._readyToDrawListIndex[a.uuid]=!0,a._updateComponentDom()}},drawIfNeeded:{value:function(){var a=this._readyToDrawList,b,c,d,e=0,f,g=this.composerList,i,j;a.length=0,j=g.length,this._readyToDrawListIndex={};if(j>0){this.composerList=this.composerListSwap;for(c=0;c<j;c++)i=g[c],i.needsFrame=!1,i.frame(this._frameTime);g.splice(0,j),this.composerListSwap=g}this._drawIfNeeded(0),d=a.length;while(e<d){for(c=e;c<d;c++)b=a[c],typeof b.willDraw=="function"&&b.willDraw(this._frameTime),h.isDebug&&h.debug(b._montage_metadata.objectName," willDraw treeLevel ",b._treeLevel);this._drawIfNeeded(0),e=d,d=a.length}var k=function(a,b){return a._treeLevel-b._treeLevel};a.sort(k);for(c=0;c<d;c++)b=a[c],b.needsDraw=!1;this.requestedAnimationFrame=null;for(c=d-1;c>=0;c--)b=a[c],b.draw(this._frameTime),h.isDebug&&h.debug(b._montage_metadata.objectName," draw treeLevel ",b._treeLevel);for(c=0;c<d;c++)b=a[c],b.didDraw(this._frameTime),b._completedFirstDraw||(f=document.createEvent("CustomEvent"),f.initCustomEvent("firstDraw",!0,!1,null),b.dispatchEvent(f),b._completedFirstDraw=!0),h.isDebug&&h.debug(b._montage_metadata.objectName," didDraw treeLevel ",b._treeLevel);return!!a.length}},element:{get:function(){return this._element},set:function(a){i.registerEventHandlerForElement(this,a),this._element=a,typeof this.didSetElement=="function"&&this.didSetElement()},enumerable:!1}});k.init(),b.__root__=k}}),define("4763f06","core/shim/object",{dependencies:[],factory:function(a,b,c){Object.create||(Object._creator=function d(){this.__proto__=d.prototype},Object.create=function(a,b){return this._creator.prototype=a||Object.prototype,new this._creator},Object.getPrototypeOf=function(a){return a.__proto__}),Object.isSealed||Object.defineProperty(Object,"isSealed",{value:function(){return!1},writable:!0,configurable:!0}),Object.seal||Object.defineProperty(Object,"seal",{value:function(a){return a},writable:!0,configurable:!0})}}),define("4763f06","core/shim/array",{dependencies:[],factory:function(a,b,c){Array.isArray||Object.defineProperty(Array,"isArray",{value:function(a){return Object.prototype.toString.call(a)==="[object Array]"},writable:!0,configurable:!0})}}),define("4763f06","core/shim/string",{dependencies:[],factory:function(a,b,c){String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(a){return this.length>=a.length&&this.slice(0,a.length)===a},writable:!0,configurable:!0}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(a){return this.length>=a.length&&this.slice(this.length-a.length,this.length)===a},writable:!0,configurable:!0})}}),define("4763f06","core/extras/object",{dependencies:["core/core","core/shim/weak-map"],factory:function(a,b,c){var d=a("core/core"),e=a("core/shim/weak-map").WeakMap,f="modify",g="string",h="function",i="object",j="number",k="has",l="get",m="undefinedGet",n="set",o="equals",p="valueOf",q="clone",r="compare";Object.defineProperty(Object,"empty",{value:Object.freeze(Object.create(null)),writable:!0,configurable:!0}),Object.defineProperty(Object,"isObject",{value:function(a){return Object(a)===a},writable:!0,configurable:!0}),Object.defineProperty(Object,"getValueOf",{value:function(a){return Object.implements(a,p)&&(a=a.valueOf()),a}});var s=Object.prototype.hasOwnProperty;Object.defineProperty(Object,"owns",{value:function(a,b){return s.call(a,b)},writable:!0,configurable:!0}),Object.defineProperty(Object,"implements",{value:function(a,b){return a!=null&&typeof a[b]===h&&!s.call(a,b)},writable:!0,configurable:!0}),Object.defineProperty(Object,"has",{value:function(a,b){if(typeof a!="object")throw new Error("Object.has can't accept non-object: "+typeof a);if(Object.implements(a,k))return a.has(b);if(typeof b===g)return b in a&&a[b]!==Object.prototype[b];throw new Error("Key must be a string for Object.has on plain objects")},writable:!0,configurable:!0}),Object.defineProperty(Object,"get",{value:function(a,b,c){if(typeof a!="object")throw new Error("Object.get can't accept non-object: "+typeof a);if(Object.implements(a,l))return a.get(b,c);if(Object.has(a,b))return a[b];if(c!==undefined)return c;if(Object.implements(a,m))return a.undefinedGet()},writable:!0,configurable:!0}),Object.defineProperty(Object,"set",{value:function(a,b,c){Object.implements(a,n)?a.set(b,c):a[b]=c},writable:!0,configurable:!0}),Object.defineProperty(Object,"forEach",{value:function(a,b,c){Object.keys(a).forEach(function(d){b.call(c,a[d],d,a)})},writable:!0,configurable:!0}),Object.defineProperty(Object,"map",{value:function(a,b,c){return Object.keys(a).map(function(d){return b.call(c,a[d],d,a)})},writable:!0,configurable:!0}),Object.defineProperty(Object,"values",{value:function(a){return Object.map(a,Function.identity)},writable:!0,configurable:!0}),Object.defineProperty(Object,"is",{value:function(a,b){return a===b?a!==0||1/a===1/b:a!==a&&b!==b},writable:!0,configurable:!0}),Object.defineProperty(Object,"equals",{value:function(a,b){a=Object.getValueOf(a),b=Object.getValueOf(b);if(a===b)return!0;if(Object.implements(a,o))return a.equals(b);if(Object.implements(b,o))return b.equals(a);if(typeof a===i&&typeof b===i){if(Object.getPrototypeOf(a)!==Object.getPrototypeOf(b))return!1;var c=Object.keys(a),d=Object.keys(b);return c.equals(d)&&c.every(function(c){return Object.equals(a[c],b[c])})}return!1},writable:!0,configurable:!0}),Object.defineProperty(Object,"compare",{value:function(a,b){return a=Object.getValueOf(a),b=Object.getValueOf(b),a===b?0:typeof a===j&&typeof b===j?a-b:typeof a===g?a<b?-1:1:Object.implements(a,r)?a.compare(b):Object.implements(b,r)?-b.compare(a):0},writable:!0,configurable:!0}),Object.defineProperty(Object.prototype,"getProperty",{value:function(a,b,c,d,e){var f,g,i,j,k=null;if(a==null)return;return f=a.indexOf(".",e),e=e||0,i=a.substring(e,f===-1?a.length:f),i in this?g=this[i]:g=typeof this.undefinedGet===h?this.undefinedGet(i):undefined,d&&(j=a.indexOf(".",e),j!=-1&&(k=a.substr(j+1)),d(this,i,g,null,k)),(!d||!g||-1!==f)&&g&&f!==-1&&(g.getProperty?g=g.getProperty(a,b,c,d,f+1):g=Object.prototype.getProperty.call(g,a,b,c,d,f+1)),g},writable:!0,configurable:!0}),Object.defineProperty(Object.prototype,"_propertySetterNamesByName",{value:{},writable:!0,configurable:!0}),Object.defineProperty(Object.prototype,"_propertySetterByName",{value:{},writable:!0,configurable:!0}),Object.defineProperty(Object.prototype,"setProperty",{value:function(a,b){var c=!isNaN(a),d=c?-1:a.lastIndexOf("."),e,f,g;if(d!==-1){e=this.getProperty(a.substring(0,d));if(!e){this.undefinedSet(a);return}a=a.substring(d+1)}else e=this;f=e.getProperty(a),f&&Array.isArray(f)?Array.isArray(e)?(g=parseInt(a,10),isNaN(g)?e[a]=b:(e.length<g&&(e[g]=null),e.splice(g,1,b))):e[a]=b:Array.isArray(e)?(g=parseInt(a,10),isNaN(g)||e.length<g&&(e[g]=null),e.splice(g,1,b)):e[a]=b},writable:!0,configurable:!0}),Object.defineProperty(Object.prototype,"parentProperty",{value:null,writable:!0,configurable:!0}),Object.defineProperty(Object.prototype,"undefinedGet",{value:function(a){console.warn("get undefined property -"+a+"-")},writable:!0,configurable:!0}),Object.defineProperty(Object.prototype,"undefinedSet",{value:function(a){console.warn("set undefined property -"+a+"-")},writable:!0,configurable:!0}),Object.defineProperty(Object,"getPropertyDescriptor",{value:function(a,b){var c=a,d;do d=Object.getOwnPropertyDescriptor(c,b);while(!d&&(c=c.__proto__||Object.getPrototypeOf(c)));return d},writable:!0,configurable:!0}),Object.defineProperty(Object,"getPrototypeAndDescriptorDefiningProperty",{value:function(a,b){var c=a,d;if(b){do d=Object.getOwnPropertyDescriptor(c,b);while(!d&&(c=c.__proto__||Object.getPrototypeOf(c)));return{prototype:c,propertyDescriptor:d}}},writable:!0,configurable:!0}),Object.defineProperty(Object,"clone",{value:function(a,b,c){a=Object.getValueOf(a);if(b===undefined)b=Infinity;else if(b===0)return a;return Object.isObject(a)&&Object.implements(a,q)?(c=c||new e,c.has(a)||c.set(a,a.clone(b,c)),c.get(a)):a},writable:!0,configurable:!0}),Object.defineProperty(Object.prototype,"clone",{value:function(a,b){a===undefined&&(a=Infinity),b=b||new e;if(a===0)return this;if(b.has(this))return b.get(this);var c=Object.create(Object.getPrototypeOf(this));return b.set(this,c),Object.forEach(this,function(d,e){c[e]=Object.clone(d,a-1,b)}),c},writable:!0,configurable:!0}),Object.defineProperty(Object.prototype,"wipe",{value:function(){var a=Object.keys(this),b=a.length;while(b)b--,delete this[a[b]];return this},writable:!0,configurable:!0})}}),define("4763f06","core/extras/array",{dependencies:[],factory:function(a,b,c){Object.defineProperty(Array.prototype,"equals",{value:function(a,b){var b=b||Object.equals,c=0,d=this.length,e,f;if(this===a)return!0;if(!a||!Array.isArray(a)){if(Object.implements(a,"reduce")){var g=this;return this.length===a.length&&a.reduce(function(a,c,d){return a&&d in g&&b(g[d],c)},!0)}return!1}if(d!==a.length)return!1;for(;c<d;++c)if(c in this){e=this[c],f=a[c];if(e!==f&&e&&f&&!b(e,f))return!1}else if(c in a)return!1;return!0},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"compare",{value:function(a,b){var b=b||Object.compare,c,d,e,f,g;if(this===a)return 0;if(!a||!Array.isArray(a)){if(!Object.implements(a,"reduce"))return 1;var h=this,d=Math.min(this.length,a.length),i=a.reduce(function(c,e,f){return c===0?f>=d?c:b(h[f],a[f]):c},0);if(i===0)return this.length-a.length}d=Math.min(this.length,a.length);for(c=0;c<d;c++)if(c in this){if(!(c in a))return 1;e=this[c],f=a[c],g=b(e,f);if(g)return g}else if(c in a)return-1;return this.length-a.length},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"get",{value:function(a){if(+a!==a)throw new Error("Indicies must be numbers");return this[a]},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"set",{value:function(a,b){if(+a!==a)throw new Error("Indicies must be numbers");this.setProperty(a,b)},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"find",{value:function(a,b){b=b||Object.equals;for(var c=0;c<this.length;c++)if(c in this&&b(this[c],a))return c;return-1},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"findLast",{value:function(a,b){b=b||Object.equals;var c=this.length;do{c--;if(c in this&&b(this[c],a))return c}while(c>0);return-1},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"has",{value:function(a,b){return this.find(a,b)!==-1},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"add",{value:function(a,b){this.has(a,b)||this.push(a)},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"delete",{value:function(a,b){var c=this.find(a,b);c!==-1&&this.splice(c,1)},writable:!0,configurable:!0});var d=/^[0-9]+$/;Object.defineProperty(Array.prototype,"getProperty",{value:function(a,b,c,e,f){if(a==null)return;f=f||0;var g,h=d.test(a),i=h?-1:a.indexOf("(",f),j=h?-1:a.lastIndexOf(")"),k=h?-1:a.indexOf(".",f),l=-1,m,n,o,p,q,r,s;k>-1&&i>-1?k>i?(l=j+1,p=a.substring(f,i)):l=k:i>-1?(l=j+1,p=a.substring(f,i)):l=k,o=h?a:a.substring(f,l===-1?a.length:l);if(p)e&&e(this,p+"()",null,null,null),q=a.substring(i+1,j),g=this[p](q,e);else if(isNaN(o)){e&&e(this,null,undefined,null,a.slice(f)),g=[],n=0;if(c)while((m=this[n])!=null)g[n]=m.getProperty(a,b,c,e,f),n++;else{while((m=this[n])!=null)r=m.getProperty(a,b,c,e,f),Array.isArray(r)?g=g.concat(r):g[n]=r,n++;if(b){var s={};g=g.filter(function(a){return s[a]?!1:s[a]=!0})}}}else g=this[o],e&&e(this,o,g,null,k!=-1?a.slice(k+1):null),k>0?g=g?g.getProperty(a,b,c,e,k+1):undefined:!e||k!==-1||!g;return g},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"count",{value:function(){return this.length},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"any",{value:function(a,b){var c;return a?c=this.some(function(c){return!!c.getProperty(a,null,null,b)}):c=this.some(function(a){return!!a}),c},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"all",{value:function(){return this.every(function(a){return!!a})},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"min",{value:function(){return Math.min.apply(Math,this)},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"max",{value:function(){return Math.max.apply(Math,this)},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"sum",{value:function(a,b){return a?this.map(function(c){return c.getProperty(a,null,null,b)}).sum():this.reduce(function(a,b){return Array.isArray(b)&&(b=b.sum()),a+b},0)},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"average",{value:function(){return this.sum()/this.count()},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"unique",{value:function(a){var b=[];return this.forEach(function(c){b.add(c,a)}),b},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"flatten",{value:function(a){return this.reduce(function(a,b){return b.forEach(function(b){a.push(b)}),a},[])},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"one",{value:function(){if(this.length===0)throw new Error("Can't get one element from empty array");return this[0]},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"only",{value:function(){if(this.length!==1)throw new Error("Can't get only element of array with "+this.length+" elements.");return this[0]},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"sorted",{value:function(a,b,c){return a=a||Object.compare,a.by?(b=a.by,a=a.compare||Object.compare):b=b||Function.identity,c===undefined&&(c=1),this.map(function(a){return{by:b(a),value:a}}).sort(function(b,d){return a(b.by,d.by)*c}).map(function(a){return a.value})},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"clone",{value:function(a,b){if(a===undefined)a=Infinity;else if(a===0)return this;return this.map(function(c){return Object.clone(c,a-1,b)})},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"wipe",{value:function(){return this.length=0,this},writable:!0,configurable:!0}),Object.defineProperty(Array,"isCanvasPixelArray",{value:function(a){return Object.prototype.toString.call(a)==="[object CanvasPixelArray]"},writable:!0,configurable:!0})}}),define("4763f06","core/extras/string",{dependencies:[],factory:function(a,b,c){Object.defineProperty(String,"isString",{value:function(a){return Object.prototype.toString.call(a)==="[object String]"},writable:!0,configurable:!0}),Object.defineProperty(String.prototype,"equals",{value:function(a){return this.valueOf()===Object.getValueOf(a)},writable:!0,configurable:!0}),Object.defineProperty(String.prototype,"contains",{value:function(a){return this.indexOf(a)!==-1},writable:!0,configurable:!0}),Object.defineProperty(String.prototype,"toCapitalized",{value:function(){return this.charAt(0).toUpperCase()+this.slice(1)},writable:!0,configurable:!0}),Object.defineProperty(String.prototype,"addEventListener",{value:Function.noop,writable:!0,configurable:!0})}}),define("4763f06","core/extras/function",{dependencies:["./object"],factory:function(a,b,c){a("./object"),Object.defineProperty(Function,"identity",{value:function(a){return a},writable:!0,configurable:!0}),Object.defineProperty(Function,"noop",{value:function(){},writable:!0,configurable:!0}),Object.defineProperty(Function,"by",{value:function(a,b){b=b||Object.compare,a=a||Function.identity;var c=function(c,d){return b(a(c),a(d))};return c.compare=b,c.by=a,c},writable:!0,configurable:!0})}}),define("4763f06","core/extras/date",{dependencies:[],factory:function(a,b,c){Object.defineProperty(Date.prototype,"clone",{value:function(){return new Date(this)},writable:!0,configurable:!0})}}),define("4763f06","ui/template",{dependencies:["montage","core/serializer","core/deserializer","core/logger","core/event/event-manager","ui/application"],factory:function(a,b,c){b=typeof b!="undefined"?b:{};var d=a("montage").Montage,e=a("core/serializer").Serializer,f=a("core/deserializer").Deserializer,g=a("core/logger").logger("template"),h=a("core/event/event-manager").defaultEventManager,i,j=b.Template=d.create(d,{_OLD_SCRIPT_TYPE:{value:"text/m-objects"},_SCRIPT_TYPE:{value:"text/montage-serialization"},_document:{enumerable:!1,value:null},document:{get:function(){return this._document}},_require:{value:window.require},_externalObjects:{value:null},_ownerSerialization:{value:null},_rootUrl:{value:null},_isLoaded:{value:!1},delegate:{value:null},initWithDocument:{value:function(a,b){return b&&(this._require=b),this._document=a,this}},__templatesById:{value:{}},__templateCallbacksByModuleId:{value:{}},templateWithModuleId:{value:function(a,b,c){var d=this.__templatesById[b],e=function(a){a.__templateCallbacksByModuleId[b].forEach(function(b){b.call(this,a)}),delete a.__templateCallbacksByModuleId[b]};return d?d._isLoaded?c(d):this.__templateCallbacksByModuleId[b].push(c):(this.__templateCallbacksByModuleId[b]=[c],this.__templatesById[b]=d=this.create().initWithModuleId(a,b,e)),d}},templateWithComponent:{value:function(a,b){var c=a._templateId,d=this.__templatesById[c],e;if(!d){d=this.create(),d.delegate=b,d.initWithComponent(a),e=d._externalObjects;if(!e||Object.keys(e).length===0)this.__templatesById[c]=d}return d}},_deserializer:{value:null},deserializer:{get:function(){return this._deserializer||(this._deserializer=f.create().initWithString(this._rootObjectSerialization))}},initWithHtmlString:{value:function(a){var b=this.createHtmlDocumentFromString(a);return this._isLoaded=!0,this.initWithDocument(b),this}},initWithModuleId:{value:function(a,b,c){var d=this;return this._require=a,this.createHtmlDocumentFromModuleId(a,b,function(a){if(!a)throw"Template '"+b+"' not found.";d._isLoaded=!0,d.initWithDocument(a),c&&c(d)}),this}},_serializer:{value:null},serializer:{get:function(){return this._serializer||(this._serializer=e.create().initWithRequire(this._require))}},serializeObjectProperties:{enumerable:!1,value:function(){var a=this.delegate;if(a&&typeof a.serializeObjectProperties=="function")return a.serializeObjectProperties.apply(a,arguments)}},initWithComponent:{value:function(a){var b=document.implementation.createHTMLDocument(""),c=this.serializer,d,e,f,g,h,i;this._document=b,c.delegate=this.delegate?this:null,this._ownerSerialization=c.serialize({owner:a}),this._externalObjects=c.getExternalObjects(),e=c.getExternalElements();var g=e.length;if(g>1)for(var j=0;j<g;j++){h=e[j];for(var k=0;k<g;k++)if(j!==k){var i=e[k];while((i=i.parentNode)&&i!==h);i&&(e.splice(k,1),g--,k--,j>k&&j--)}}for(var j=0;f=e[j];j++)b.body.appendChild(b.importNode(f,!0));return this._deserializer=this._createDeserializer(this._ownerSerialization),this}},optimize:{value:function(){this.deserializer.optimizeForDocument(this._document)}},_deserialize:{value:function(b,c,d){typeof i=="undefined"&&(i=a("ui/application").application);var e=this;this.getDeserializer(function(a){var f;if(a){f=e._externalObjects;if(f)for(var g in f)g in b||(b[g]=f[g]);b.application=i,b.template=e,e._document===window.document?a.deserializeWithInstancesAndDocument(b,e._document,d):a.deserializeWithInstancesAndElementForDocument(b,e._document.body,c,d)}else d()})}},instantiateWithOwnerAndDocument:{value:function(a,b,c){return this.instantiateWithInstancesAndDocument({owner:a},b,c)}},instantiateWithInstancesAndDocument:{value:function(a,b,c){var d=this;this._partiallyInstantiateWithInstancesForDocument(a,b,function(b){b&&(delete a.application,delete a.template,d._invokeTemplateDidLoad(b,b.owner&&b.owner.templateObjects)),d.waitForStyles(function(){c(b?b.owner:null)})})}},instantiateWithComponent:{value:function(a,b){var c=this,d=a.templateObjects;d?d.owner=a:d={owner:a},this._partiallyInstantiateWithInstancesForDocument(d,a.element.ownerDocument,function(e){delete d.owner,delete d.application,delete d.template,e&&c._invokeTemplateDidLoad(e,!a._isTemplateLoaded&&d),c.waitForStyles(function(){b(e?e.owner:null)})})}},instantiateWithDocument:{value:function(a,b){return this.instantiateWithOwnerAndDocument(null,a,b)}},_partiallyInstantiateWithInstancesForDocument:{value:function(a,b,c){function d(a){e._document!==b&&e.exportHeaders(b),c(a)}var e=this,f=a.owner;!b&&f&&f._element&&(b=f._element.ownerDocument),this._deserialize(a,b,function(a,b){if(e._extends&&!e._isExpanded){var c=e._extends,b=c.element,f=c.instances,g=c.instancesMapping,h=c.elementId;!b&&h&&(b=b.querySelector("*[data-montage-id='"+h+"']"));if(!f)if(g){f={};for(var i in g)f[i]=a[g[i]];f.owner=a.owner}else f={owner:a.owner};e._extendsTemplateWithInstances(c.templateModuleId,b,f,function(b){var c=Object.keys(b);for(var e=0,f;f=c[e];e++)a[f]=b[f];d(a)})}else d(a)})}},instantiate:{value:function(a){return this.instantiateWithOwnerAndDocument(null,null,a)}},_templateObjectDescriptor:{value:{enumerable:!0,configurable:!0}},_createTemplateObjectGetter:{value:function(a,b){var c="@"+b,d,e,f;return function(){if(d)return a.querySelectorAllComponent(c,a);e=a.querySelectorAllComponent(c,a);if(e.length===1){f=e[0];while(f=f.parentComponent){if(f===a)return Object.defineProperty(this,b,{value:e[0]}),e[0];if(f.clonesChildComponents)break}}return d=!0,e}}},_invokeTemplateDidLoad:{value:function(a,b){var c=a.owner,d=Object.keys(a),e,f=c&&typeof c.templateDidDeserializeObject=="function";for(var g=0,h;h=a[e=d[g]];g++)c!==h&&(typeof h._deserializedFromTemplate=="function"&&h._deserializedFromTemplate(c),typeof h.deserializedFromTemplate=="function"&&h.deserializedFromTemplate(c),f&&c.templateDidDeserializeObject(h),b&&(h.parentComponent===c||!h.ownerComponent?b[e]=h:(this._templateObjectDescriptor.get=this._createTemplateObjectGetter(h.ownerComponent,e),Object.defineProperty(b,e,this._templateObjectDescriptor))));c&&(typeof c._templateDidLoad=="function"&&c._templateDidLoad(),typeof c.templateDidLoad=="function"&&c.templateDidLoad())}},defineExtension:{value:function(a,b,c){this._extends={templateModuleId:a,element:b,instancesMapping:c}}},_extendsTemplateWithInstances:{value:function(a,b,c,d){function e(a,b,c){var d=b.nextSibling,e=b.parentNode,f=a.childNodes,g=a.attributes;e.removeChild(b);if(d)for(var h=0,i=f.length;h<i;h++)e.insertBefore(f[0],d);else for(var h=0,i=f.length;h<i;h++)e.appendChild(f[0]);for(var h=0,j;j=g[h];h++){var k=j.nodeName;if(k==="id"||k==="data-montage-id")continue;var l=(c.getAttribute(k)||"")+" "+j.nodeValue;c.setAttribute(k,l)}}var f=this,g=c.owner,h,i;h=g._templateElement,i=h.ownerDocument,g._templateElement=null,j.templateWithModuleId(this._require,a,function(a){a._partiallyInstantiateWithInstancesForDocument({owner:g},i,function(c){e(g._templateElement,b,h);if(!f._isExpanded){var i=f.getMontageIdByElement(b),j=f.getMontageIdByElement(h),k=f.getMontageIdByElement(g._templateElement);e(f._document.importNode(a.getMontageElementById(k),!0),f.getMontageElementById(i),f.getMontageElementById(j)),a.exportHeaders(f._document),f._isExpanded=!0}f._deserializer.chainDeserializer(a._deserializer),g._templateElement=h,d(c)})})}},getMontageIdByElement:{value:function(a){return a.getAttribute("data-montage-id")||a.id}},getMontageElementById:{value:function(a){return this._document.querySelector("*[data-montage-id='"+a+"']")||this._document.getElementById(a)}},exportHeaders:{value:function(a){this.insertStylesInDocumentIfNeeded(a),this.insertScriptsInDocumentIfNeeded(a)}},_stylesLoadedCount:{enumerable:!1,value:null},_expectedStylesLoadedCount:{enumerable:!1,value:null},_stylesLoadedCallbacks:{enumerable:!1,value:null},insertStylesInDocumentIfNeeded:{value:function(a){var b=a._montage_importedStyles,c=this._id,d;if(!c||!a)return;b||(b=a._montage_importedStyles={fromTemplates:{},fromLinks:{}}),d=b.fromTemplates;if(c in d)return;d[c]=!0;var e=this,f=this._rootUrl,h=a.head,i=this._stylesLoadedCallbacks=[],j=this._document.querySelectorAll('link[rel="stylesheet"], style'),k=j.length,l=b.fromLinks,m=k>1?a.createDocumentFragment():h,n;this._stylesLoadedCount=0,this._expectedStylesLoadedCount=0;for(var o=0,p;p=j[o];o++)if(n=p.getAttribute("href")){/^https?:\/\/|^\//.test(n)||(p.href=f+n,n=p.href);if(n in l)continue;l[n]=!0,this._expectedStylesLoadedCount++;var q=a.importNode(p,!1);q.href=n,m.insertBefore(q,m.firstChild),g.isDebug&&m.insertBefore(a.createComment("Inserted from "+this._id),m.firstChild);var r=function(a){if(++e._stylesLoadedCount===e._expectedStylesLoadedCount){var b;while(b=i.pop())b();e._stylesLoadedCallbacks=i=null}this.removeEventListener(a.type,r,!1),a.type==="error"&&console.log("CSS file "+n+" is missing")},s=new XMLHttpRequest;s.open("GET",n),s.onreadystatechange=function(a){return function(b){a.readyState===4&&(a.status===200?r({type:"load"}):r({type:"error"}))}}(s),s.send()}else m.insertBefore(a.importNode(p,!0),m.firstChild),g.isDebug&&m.insertBefore(a.createComment("Inserted from "+this._id),m.firstChild);k>1&&h.insertBefore(m,h.firstChild)}},insertScriptsInDocumentIfNeeded:{value:function(a){var b=a._montage_importedScripts,c=this._rootUrl,d=c||null;if(!d)return;if(!b)b=a._montage_importedScripts={fromTemplate:{},external:{}};else if(d in b.fromTemplate)return;b.fromTemplate[d]=!0;var e=a.head,f=this._document.querySelectorAll("script"),h=a.createDocumentFragment(),i=b.external,j,k,l,m;for(var n=0;m=f[n];n++){k=m.type;if(k===this._SCRIPT_TYPE)continue;l=m.getAttribute("src"),j=a.importNode(m,!0);if(l){/^https?:\/\/|^\//.test(l)||(j.src=d+l,l=j.src=j.src);if(l in i)continue;i[l]=!0}g.isDebug&&h.appendChild(a.createComment("Inserted from "+this._id)),h.appendChild(j)}e.appendChild(h)}},waitForStyles:{value:function(a){this._stylesLoadedCount===this._expectedStylesLoadedCount?a():this._stylesLoadedCallbacks.push(a)}},createHtmlDocumentFromString:{value:function(a){var b=document.implementation.createHTMLDocument("");b.documentElement.innerHTML=a;if(!b.body){b=document.implementation.createHTMLDocument("");var c=b.createRange(),d=b.getElementsByTagName("head").item(0),e=b.getElementsByTagName("body").item(0),f,g,h,i,j,k;f=a.indexOf("<head>"),f>0&&(g=a.indexOf("</head>"),d.outerHTML=a.substring(f+6,g)),h=a.indexOf("<body"),h>0&&(i=a.indexOf("</body>"),j=a.substring(h,i+7),c.selectNode(e),k=c.createContextualFragment(j),e.appendChild(k))}return b}},_documentCache:{enumerable:!1,value:{}},createHtmlDocumentFromModuleId:{value:function(a,b,c){var d=this,e=this._documentCache[b];d._id=a.location+"/"+b,e?(d._rootUrl=e.directory,c(d.createHtmlDocumentFromString(e.content))):a.async(b,function(a){d._rootUrl=(d._documentCache[b]=a).directory,c(d.createHtmlDocumentFromString(a.content))})}},getInlineSerialization:{value:function(a){var b=a.querySelector("script[type='"+this._SCRIPT_TYPE+"']");if(b)return b.textContent;if(this._document.querySelector("script[type='"+this._OLD_SCRIPT_TYPE+"']"))g.error("Unsupported serialization found"+(this._rootUrl?" on "+this._rootUrl:"")+", please upgrade to the new one.");else return null}},getExternalSerialization:{value:function(a,b){var c=a.querySelector('link[rel="serialization"]');if(c){var d=new XMLHttpRequest,e=c.getAttribute("href"),f=this._rootUrl||"";/^https?:\/\/|^\//.test(e)||(e=f+e),d.open("GET",e),d.addEventListener("load",function(){d.status==200?b(d.responseText):(g.isError&&g.error("Unable to retrive "+e+", code status: "+d.status),b(null))},!1),d.addEventListener("error",function(){g.isError&&g.error("Unable to retrive "+e),b(null)},!1),d.send()}else b(null)}},getDeserializer:{value:function(a){if(this._deserializer!==null)a(this._deserializer);else{var b=this.getInlineSerialization(this._document),c=this;b?(this._removeSerialization(),a(this._createDeserializer(b))):this.getExternalSerialization(this._document,function(b){b?(c._removeSerialization(),a(c._createDeserializer(b))):a(c._deserializer=!1)})}}},_createDeserializer:{value:function(a){var b=this._rootUrl?this._rootUrl:window.location.href;return this._deserializer=f.create().initWithStringAndRequire(this._ownerSerialization=a,this._require,b)}},setSerialization:{value:function(a){var b=this._document.querySelector("script[type='"+this._SCRIPT_TYPE+"']"),c=this._document;b||(b=c.createElement("script"),b.setAttribute("type",this._SCRIPT_TYPE),b.textContent=this._ownerSerialization,c.head.appendChild(b)),b.textContent=this._ownerSerialization=a}},_removeSerialization:{value:function(){var a=this._document.querySelector("script[type='"+this._SCRIPT_TYPE+"']");a&&a.parentNode.removeChild(a)}},exportToString:{value:function(){var a=this._document;if(!this.getInlineSerialization(a)){var b=a.createElement("script");b.setAttribute("type",this._SCRIPT_TYPE),b.textContent=this._ownerSerialization,a.head.appendChild(b)}return(new XMLSerializer).serializeToString(this._document)}},serializeProperties:{value:function(a){a.set("owner",this._ownerSerialization),a.set("markup",this._document.body.innerHTML)}},deserializeProperties:{value:function(a){var b=a.get("markup"),c=a.get("owner"),d=a.get("extends");b&&(this._document=document.implementation.createHTMLDocument(""),this._document.body.innerHTML=b),c&&(this._ownerSerialization=c),d&&(this._extends=d)}}})}}),define("4763f06","core/gate",{dependencies:["montage","core/logger"],factory:function(a,b,c){var d=a("montage").Montage,e=a("core/logger").logger("gate"),f=b.Gate=d.create(d,{init:{enumerable:!1,value:function(){return this.reset(),this}},initWithDelegate:{enumerable:!1,value:function(a){return this.reset(),this.delegate=a,this}},initWithDescriptor:{enumerable:!1,value:function(a){var b;this.reset();for(b in a)this.setField(b,a[b].value);return this}},count:{value:0},table:{value:null},getField:{enumerable:!1,value:function(a){var b=this.table;return!b||b[a]}},setField:{enumerable:!1,value:function(a,b){var c=this.table,d,f=this.count;c=c?c:this.table={},d=c[a],typeof d=="undefined"&&!b?this.count++:typeof d!="undefined"&&d!==b?b?this.count--:this.count++:b&&e.error(this,a+" was not set before."),c[a]=!!b,this.count===0&&f>0?this.callDelegateMethod(!0):f===0&&this.count>0&&this.callDelegateMethod(!1)}},removeField:{enumerable:!1,value:function(a){var b=this.table,c=b[a];typeof c!="undefined"&&!c&&this.count--,delete b[a]}},delegate:{enumerable:!1,value:null},callDelegateMethod:{value:function(a){var b;this.delegate&&typeof (b=this.delegate["gateDidBecome"+(a?"True":"False")])=="function"&&b.call(this.delegate,this)},enumerable:!1},value:{enumerable:!1,get:function(){return this.count===0}},reset:{enumerable:!1,value:function(){this.table={},this.count=0}},toString:{value:function(){var a=this._fields,b,c,d="";for(b=0;c=a[b];b++)d+=c+"["+(this._value&a[c])+"], ";return d}}})}}),define("4763f06","core/shim/weak-map",{dependencies:[],factory:function(a,b,c){var d;(function(){function a(a){if(a!==Object(a))throw new TypeError("Not an object: "+a);var b=a[h];if(b&&b.key===a)return b;if(!g.isExtensible(a))return void 0;var c=[],d=[];return b={key:a,gets:c,vals:d},f(a,h,{value:b,writable:!1,enumerable:!1,configurable:!1}),b}function b(a){return Object.freeze(a.prototype),Object.freeze(a)}"use strict";if(typeof d=="function")return;var c=Object.prototype.hasOwnProperty,e=Object.getOwnPropertyNames,f=Object.defineProperty,g={};e(Object).forEach(function(a){g[a]=Object[a]});var h="ident:"+Math.random()+"___";f(Object,"getOwnPropertyNames",{value:function(a){var b=e(a),c=0;while((c=b.indexOf(h,c))>=0)b.splice(c,1);return b}}),"getPropertyNames"in Object&&f(Object,"getPropertyNames",{value:function(a){var b=g.getPropertyNames(a),c=0;while((c=b.indexOf(h,c))>=0)b.splice(c,1);return b}}),function(){var b=Object.freeze;f(Object,"freeze",{value:function(c){return a(c),b(c)}});var c=Object.seal;f(Object,"seal",{value:function(b){return a(b),c(b)}});var d=Object.preventExtensions;f(Object,"preventExtensions",{value:function(b){return a(b),d(b)}})}(),d=function(){function c(b,d){var e=a(b),f,g;return e?(f=e.gets.indexOf(c),g=e.vals):(f=h.indexOf(b),g=i),f>=0?g[f]:d}function e(b){var d=a(b),e;return d?e=d.gets.indexOf(c):e=h.indexOf(b),e>=0}function f(b,d){var e=a(b),f;e?(f=e.gets.indexOf(c),f>=0?e.vals[f]=d:(e.gets.push(c),e.vals.push(d))):(f=h.indexOf(b),f>=0?i[f]=d:(h.push(b),i.push(d)))}function g(b){var d=a(b),e;return d?(e=d.gets.indexOf(c),e>=0&&(d.gets.splice(e,1),d.vals.splice(e,1))):(e=h.indexOf(b),e>=0&&(h.splice(e,1),i.splice(e,1))),!0}var h=[],i=[];return Object.create(d.prototype,{get___:{value:b(c)},has___:{value:b(e)},set___:{value:b(f)},delete___:{value:b(g)}})},d.prototype=Object.create(Object.prototype,{get:{value:function(a,b){return this.get___(a,b)},writable:!0,configurable:!0},has:{value:function(a){return this.has___(a)},writable:!0,configurable:!0},set:{value:function(a,b){this.set___(a,b)},writable:!0,configurable:!0},"delete":{value:function(a){return this.delete___(a)},writable:!0,configurable:!0}})})(),b.WeakMap=d}}),define("4763f06","ui/application",{dependencies:["core/core","ui/template","ui/component","ui/montage-window","ui/dom"],factory:function(a,b,c){var d=a("core/core").Montage,e=a("ui/template").Template,f=a("ui/component").Component,g=a("ui/montage-window").MontageWindow,h;a("ui/dom");var i=b.Application=d.create(d,{eventManager:{value:null},parentApplication:{value:null},mainApplication:{get:function(){var a=this;while(a.parentApplication)a=a.parentApplication;return a}},_windowsSortOrder:{value:"reverse-z-order"},windowsSortOrder:{get:function(){return this.parentApplication==null?this._windowsSortOrder:this.mainApplication.windowsSortOrder},set:function(a){this.parentApplication==null?["z-order","reverse-z-order","z-order","reverse-open-order"].indexOf(a)!==-1&&(this._windowsSortOrder=a):this.mainApplication.windowsSortOrder=a}},windows:{get:function(){var a;if(this.parentApplication==null){if(!this._windows){var a=g.create();a.application=this,a.window=window,this.window=a,this._windows=[this.window],this._multipleWindow=!0}return this._windows}return this.mainApplication.windows}},_window:{value:null},window:{get:function(){if(!this._window&&this==this.mainApplication){var a=g.create();a.application=this,a.window=window,this._window=a}return this._window},set:function(a){this._window||(this._window=a)}},attachedWindows:{value:[]},eventManagerForWindow:{value:function(a){return a.defaultEventMananger}},focusWindow:{get:function(){var a=this.windows,b=this.windowsSortOrder;if(b=="z-order")return a[0];if(b=="reverse-z-order")return a[a.length-1];for(var c in a)if(a[c].focused)return a[c]}},addEventListener:{value:function(a,b,c){Object.getPrototypeOf(i).addEventListener.call(this,a,b,c)}},removeEventListener:{value:function(a,b,c){Object.getPrototypeOf(i).removeEventListener.call(this,a,b,c)}},delegate:{value:null},openWindow:{value:function(a,b,c){var d=this,e=g.create(),f,h,i={location:!1,menubar:!1,resizable:!0,scrollbars:!0,status:!1,titlebar:!0,toolbar:!1},j={module:a,name:b,parent:window,callback:function(a,b){var c;f=a.document.application,e.window=a,e.application=f,e.component=b,f.window=e,d.attachedWindows.push(e),c=d.mainApplication.windowsSortOrder,c=="z-order"||c=="reverse-open-order"?d.windows.unshift(e):d.windows.push(e),h=document.createEvent("CustomEvent"),h.initCustomEvent("load",!0,!0,null),e.dispatchEvent(h)}};if(this===this.mainApplication&&!this._multipleWindow)var k=this.window;if(typeof c=="object"){var l,m,n="",o="";for(l in c)c.hasOwnProperty(l)&&(i[l]=c[l])}var p=["name"];for(l in i)p.indexOf(l)==-1&&(m=i[l],typeof m=="boolean"?m=m?"yes":"no":(m=String(m),m.match(/[ ,"]/)&&(m='"'+m.replace(/"/g,'\\"')+'"')),o+=n+l+"="+m,n=",");return window.require.loadPackage({name:"montage"}).then(function(a){var b=window.open(a.location+"ui/window-loader/index.html","_blank",o);b.loadInfo=j}).end(),e}},attachWindow:{value:function(a){var b=a.application.parentApplication,c;return b!==this&&(b&&b.detachWindow(a),a.parentApplication=this,this.attachedWindows.push(a),c=this.mainApplication.windowsSortOrder,c=="z-order"||c=="reverse-open-order"?this.windows.unshift(a):this.windows.push(a),a.focus()),a}},detachWindow:{value:function(a){var b,c,d=this.windows;return a===undefined&&(a=this.window),c=a.application.parentApplication,c==this?(b=this.attachedWindows.indexOf(a),b!==-1&&this.attachedWindows.splice(b,1),b=d.indexOf(a),b!==-1&&d.splice(b,1),a.application.parentApplication=null):c&&c.detachWindow(a),a}},didCreate:{value:function(){window.loadInfo&&!this.parentApplication&&(this.parentApplication=window.loadInfo.parent.document.application)}},_load:{value:function(c,d){var f=e.create().initWithDocument(window.document,c),g,h=this;b.application=h,a.async("ui/component").end(function(a){g=a.__root__,g.element=document,f.instantiateWithOwnerAndDocument(null,window.document,function(){h.callDelegateMethod("willFinishLoading",h),g.needsDraw=!0,d&&d(h)})})}},_alertPopup:{value:null,enumerable:!1},_confirmPopup:{value:null,enumerable:!1},_notifyPopup:{value:null,enumerable:!1},_zIndex:{value:null},_isSystemPopup:{value:function(a){return a==="alert"||a==="confirm"||a==="notify"}},_createPopupSlot:{value:function(a){var b=document.createElement("div");document.body.appendChild(b),b.style.zIndex=a,b.style.position="absolute";var c=h.create();return c.element=b,c}},getPopupSlot:{value:function(b,c,d){var e=this;a.async("ui/slot.reel/slot",function(a){h=h||a.Slot,b=b||"custom";var f=e._isSystemPopup(b),g,i,j;e.popupSlots=e.popupSlots||{};if(f)switch(b){case"alert":g=9004;break;case"confirm":g=9003;break;case"notify":g=9002}else e._zIndex?e._zIndex=e._zIndex+1:e._zIndex=7e3,g=e._zIndex;j=e.popupSlots[b],j||(j=e.popupSlots[b]=e._createPopupSlot(g)),f||(j.element.style.zIndex=g),j.content=c,d.call(this,j)})}},returnPopupSlot:{value:function(a){var b=this;if(b.popupSlots&&b.popupSlots[a]){var c=b.popupSlots[a];c.content=null}}},_getActivePopupSlots:{value:function(){var a=[];if(this.popupSlots){var b=Object.keys(this.popupSlots);if(b&&b.length>0){var c=0,d=b.length,e;for(c=0;c<d;c++)e=this.popupSlots[b[c]],e&&e.content!==null&&a.push(e)}}return a}}})}}),define("4763f06","ui/montage-window",{dependencies:["montage"],factory:function(a,b,c){var d=a("montage").Montage,e=b.MontageWindow=d.create(d,{_application:{value:null},application:{get:function(){return this._application},set:function(a){this._application===null&&(this._application=a,this.focused&&this._setFocusedWindow(this))}},_window:{value:null},window:{get:function(){return this._window},set:function(a){if(this._window===null){var b=a.document.body;this._window=a,a.addEventListener("beforeunload",this,!0),a.addEventListener("focus",this,!0),a.addEventListener("mousedown",this,!0),b.getAttribute("tabIndex")===null&&(b.setAttribute("tabIndex",-1),b.focus())}}},document:{get:function(){return this._window.document}},_component:{value:null},component:{get:function(){return this._component},set:function(a){this._component===null&&(this._component=a)}},title:{get:function(){return this.document.title},set:function(a){this.document.title=a}},focused:{value:!1},focus:{value:function(){this._window&&this._window.focus()}},_setFocusedWindow:{value:function(a){var b=this.application,c,d,e;if(b._multipleWindow){c=b.windows;for(e in c)d=c[e],d.window===a?d.focused!==!0&&(d.focused=!0,b.windowsSortOrder=="z-order"?(c.splice(e,1),c.unshift(d)):b.windowsSortOrder=="reverse-z-order"&&(c.splice(e,1),c.push(d))):d.focused=!1}else this.focused=!0}},closed:{get:function(){return this._window?this._window.closed:!1}},close:{value:function(){this._window&&this._window.close()}},resizeTo:{value:function(a,b){this._window&&this._window.resizeTo(a,b)}},moveTo:{value:function(a,b){this._window&&this._window.moveTo(a,b)}},captureFocus:{value:function(a){var b=this.application;if(!this.application){this.focused=!0;return}if(b.parentApplication)b.mainApplication.window.captureFocus(a);else{var c=(a.target.ownerDocument?a.target.ownerDocument.defaultView:null)||a.target.defaultView||a.target;this._setFocusedWindow(c)}}},captureMousedown:{value:function(a){this.captureFocus(a)}},captureBeforeunload:{value:function(a){var b=this.application,c=b.windows,d=b.attachedWindows,e;b.attachedWindows=[];for(var e in d)d[e].close();b.parentApplication&&(d=b.parentApplication.attachedWindows,e=d.indexOf(this),e!==-1&&d.splice(e,1),e=c.indexOf(this),e!==-1&&c.splice(e,1),this.window.removeEventListener("beforeunload",this,!0),this.close())}}})}}),define("4763f06","ui/dom",{dependencies:["core/geometry/point"],factory:function(a,b,c){var d=a("core/geometry/point").Point,e=Node.prototype,f=Element.prototype;Object.defineProperty(f,"set",{value:function(a,b,c){var d=a.indexOf(".",c),e,f,g,h,i;c=c||0,f=a.substring(c,d===-1?a.length:d);if(d===-1)this.setAttribute(f,b);else{g=a.lastIndexOf(".");if(f==="style")h=a.substring(d+1,a.length),this.style[h]=b;else if(f==="classList")i=a.substring(d+1,a.length),b?this.classList.add(i):this.classList.remove(i);else if(e=this.get(a.substring(0,g)))e[a.substring(g+1,a.length)]=b}},enumerable:!1}),e.get=function(a){return this.getAttribute(a)||this[a]},Object.getPrototypeOf(document).addRule=function(a,b){var c,d;if((c=document.styleSheets[0])==null){var e=document.createElement("style");e.type="text/css",document.head.appendChild(e),c=document.styleSheets[0]}else d=document.getRule(a,c);d||c.insertRule(a+" "+b,c.cssRules.length)},Object.getPrototypeOf(document).getRule=function(a,b){var c;if(b.cssRules)for(var d=0;c=b.cssRules[d];d++){if(c.name&&c.name===a)return c;if(c.selectorText===a)return c}},"use strict",typeof Element!="undefined"&&function(){var a="classList";if(!Element.prototype.hasOwnProperty(a)){var b=/^\s+|\s+$/g,c=function(a,b){a.setAttribute("class",b.join(" "))},d=function(a,b){if(b==="")throw"SYNTAX_ERR";if(/\s/.test(b))throw"INVALID_CHARACTER_ERR";return a.indexOf(b)},e=function(){var a=this,e=a.getAttribute("class")||"";return e=e.replace(b,"").split(/\s+/),{length:e.length,item:function(a){return e[a]||null},contains:function(a){return d(e,a)!==-1},add:function(b){d(e,b)===-1&&(e.push(b),this.length=e.length,c(a,e))},remove:function(b){var f=d(e,b);f!==-1&&(e.splice(f,1),this.length=e.length,c(a,e))},toggle:function(a){d(e,a)===-1?this.add(a):this.remove(a)},toString:function(){return a.getAttribute("class")||""}}};Object.defineProperty?Object.defineProperty(Element.prototype,a,{get:e,enumerable:!0}):Object.prototype.__defineGetter__&&Element.prototype.__defineGetter__(a,e)}}(),e.parentOf=function(a){while((a=a.parentNode)&&a!==this);return a?!0:!1};var g=function(a){var b,c=a.ownerDocument,d,e,f;if(a&&c){d=c.documentElement,e=c.body,f=c.defaultView;if(a!==e){b=a.getBoundingClientRect();if(d.parentOf(a)){var g=d.clientTop||e.clientTop||0,h=d.clientLeft||e.clientLeft||0,i=f.pageYOffset||d.scrollTop||e.scrollTop,j=f.pageXOffset||d.scrollLeft||e.scrollLeft,k=b.top+i-g,l=b.left+j-h;return{top:k,left:l}}return{top:b.top,left:b.left}}return{top:e.offsetTop,left:e.offsetLeft}}return null},h=null;try{h=new WebKitPoint(0,0)}catch(i){}var j=function(){b.convertPointFromNodeToPage=function(a,b){return b?(h.x=b.x,h.y=b.y):(h.x=0,h.y=0),b=webkitConvertPointFromNodeToPage(a,h),b?d.create().init(b.x,b.y):null},b.convertPointFromPageToNode=function(a,b){return b?(h.x=b.x,h.y=b.y):(h.x=0,h.y=0),b=webkitConvertPointFromPageToNode(a,h),b?d.create().init(b.x,b.y):null}},k=function(){b.convertPointFromNodeToPage=function(a,b){if(!a||typeof a.x!="undefined")return null;var c;return(c=g(a))?d.create().init((b?b.x:0)+c.left,(b?b.y:0)+c.top):d.create().init(b?b.x:0,b?b.y:0)},b.convertPointFromPageToNode=function(a,b){if(!a||typeof a.x!="undefined")return null;var c;return(c=g(a))?d.create().init((b?b.x:0)-c.left,(b?b.y:0)-c.top):d.create().init(b?b.x:0,b?b.y:0)}};h?j():k()}}),define("4763f06","core/geometry/point",{dependencies:["montage"],factory:function(a,b,c){var d=a("montage").Montage;b.Point=d.create(d,{init:{enumerable:!1,value:function(a,b){return this.x=a===null?0:a,this.y=b===null?0:b,this}},interpolate:{enumerable:!1,value:function(a,c,d,e){var f,g;return f=c.x+(d.x-c.x)*a,g=c.y+(d.y-c.y)*a,e>0&&(f=Math.round(f*e)/e,g=Math.round(g*e)/e),b.Point.create().init(f,g)}},x:{enumerable:!0,value:0},y:{enumerable:!0,value:0}})}}),define("1156f40","index.html",{text:'<!doctype html>\n<html lang=en id=montage-todomvc>  <head>    <meta charset=utf-8>\n    <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1">\n    <title>Montage  TodoMVC</title>\n    <link rel=stylesheet href="assets/base.css">\n    <link rel=stylesheet href="assets/app.css">\n    <script src="packages/montage@4763f06/montage.js"></script>\n    <script type="text/montage-serialization">{"owner":{"prototype":"montage/ui/loader.reel"}}</script>\n</head>\n  <body></body>\n</html>'})