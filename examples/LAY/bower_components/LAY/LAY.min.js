/*
* Copyright 2015 Raj Nathani
* @license: MIT
* @author: Raj Nathani <me@relfor.co>
*/
!function(){"use strict";window.LAY={version:function(){return"0.8.3"},$pathName2level:{},$newlyInstalledStateLevelS:[],$newlyUninstalledStateLevelS:[],$newLevelS:[],$recalculateDirtyAttrValS:[],$renderDirtyPartS:[],$prevFrameTime:0,$newManyS:[],$isRendering:!1,$isGpuAccelerated:void 0,$isBelowIE9:void 0,$numClog:0,$isSolving:!1,$isSolveRequiredOnRenderFinish:!1,$isOkayToEstimateWhitespaceHeight:!0,$naturalHeightDirtyPartS:[],$naturalWidthDirtyPartS:[],$relayoutDirtyManyS:[],$isDataTravellingShock:!1,$isDataTravelling:!1,$dataTravelDelta:0,$dataTravellingLevel:void 0,$dataTravellingAttrInitialVal:void 0,$dataTravellingAttrVal:void 0}}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var r;if(null===this)throw new TypeError('"" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return-1;var a=+e||0;if(Math.abs(a)===1/0&&(a=0),a>=n)return-1;for(r=Math.max(a>=0?a:n-Math.abs(a),0);n>r;){if(r in i&&i[r]===t)return r;r++}return-1}),function(){"use strict";function t(t){return-1===t.lastIndexOf(".onlyif")||t.startsWith("data.")||t.startsWith("row.")?"":t.slice(0,t.indexOf("."))}function e(t){return t.startsWith("when.")?t.slice(5,t.length-2):""}function r(t){return t.startsWith("transition.")?t.slice(11,t.indexOf(".",11)):""}function i(t){var e=t.indexOf(".");if(LAY.$checkIsValidUtils.propAttr(t)&&-1===["centerX","right","centerY","bottom"].indexOf(t))return!0;if(-1!==["formation","filter","sort"].indexOf(t))return!0;var r=t.slice(0,e);return-1!==["when","transition","fargs","sort","$$num","$$max"].indexOf(r)}function n(t){var e,r=t.attr2attrVal.$hovering,i=t.attr2attrVal.$clicking,a=t.childLevelS;if(r&&r.update(!1),i&&i.update(!1),a.length)for(var o=0,l=a.length;l>o;o++)e=a[o],e.part&&n(e)}LAY.AttrVal=function(e,r){this.level=r,this.val=void 0,this.prevVal=void 0,this.isTakeValReady=void 0,this.attr=e,this.isRecalculateRequired=!0,this.calcVal=void 0,this.transitionCalcVal=void 0,this.startCalcVal=void 0,this.transition=void 0,this.isTransitionable=!1,this.isForceRecalculate=!1,this.onlyIfStateName=t(e),this.isStateProjectedAttr=i(e),this.isEventReadonlyAttr=LAY.$eventReadonlyUtils.checkIsEventReadonlyAttr(e),this.renderCall=r&&r.isPart&&LAY.$findRenderCall(e,r),this.takerAttrValS=[],this.eventReadonlyEventType2boundFnHandler={}},LAY.AttrVal.prototype.update=function(t){return this.val=t,LAY.identical(t,this.prevVal)?void 0:(this.prevVal instanceof LAY.Take&&this.takeNot(this.prevVal),this.isTakeValReady=!1,this.requestRecalculation(),!0)},LAY.AttrVal.prototype.requestRecalculation=function(){this.isRecalculateRequired=!0,this.level&&LAY.$arrayUtils.pushUnique(LAY.$recalculateDirtyAttrValS,this)},LAY.AttrVal.prototype.forceRecalculation=function(){this.isForceRecalculate=!0,this.requestRecalculation()},LAY.AttrVal.prototype.checkIsTransitionable=function(){return this.renderCall&&this.startCalcVal!==this.calcVal&&("number"==typeof this.startCalcVal&&"number"==typeof this.calcVal||this.startCalcVal instanceof LAY.Color&&this.calcVal instanceof LAY.Color)&&"zIndex"!==this.attr},LAY.AttrVal.prototype.recalculate=function(){var t,i,a,o=!1,l=this.level,s=l.part,c=l.manyObj,h=this.attr;if("$"===h.charAt(0)&&LAY.$checkIfImmidiateReadonly(h)&&(this.val=s.getImmidiateReadonlyVal(h)),this.val instanceof LAY.Take){if(!this.isTakeValReady)return this.isTakeValReady=this.take(),!1;t=this.val.execute(this.level),(h.startsWith("data.")||h.startsWith("row."))&&(t=LAY.$clone(t)),LAY.identical(t,this.calcVal)||(o=!0,this.calcVal=t)}else(h.startsWith("data.")||h.startsWith("row."))&&(this.val=LAY.$clone(this.val)),LAY.identical(this.val,this.calcVal)||(o=!0,this.calcVal=this.val);if(this.isForceRecalculate&&(o=!0),"rows"===h&&(o=!0,l.attr2attrVal.filter.forceRecalculation()),o){var u=this.onlyIfStateName,d=e(h),f=r(h);for(this.prevVal=this.val,i=0,a=this.takerAttrValS.length;a>i;i++)this.takerAttrValS[i].requestRecalculation();if(LAY.$isDataTravellingShock&&s.addTravelRenderDirtyAttrVal(this),this.renderCall){switch(this.startCalcVal=this.transitionCalcVal,this.isTransitionable=this.checkIsTransitionable(),LAY.$isDataTravellingShock||s.addNormalRenderDirtyAttrVal(this),h){case"display":var p=this.level.parentLevel;p&&(p.part.updateNaturalWidth(),p.part.updateNaturalHeight()),this.calcVal===!1&&n(l);break;case"input":("multiple"===s.inputType||"select"===s.inputType)&&l.attr2attrVal.$input.requestRecalculation();break;case"width":if(s.isText){var v=l.attr2attrVal.textWrap;v&&!v.isRecalculateRequired&&"nowrap"!==v.calcVal&&s.updateNaturalHeight()}else"image"===s.type&&s.updateNaturalHeight();break;case"height":"image"===s.type&&s.updateNaturalWidth();break;case"imageUrl":s.isImageLoaded=!1;break;default:var A=function(t){return t.startsWith("text")&&!t.startsWith("textShadows")&&-1===["textColor","textDecoration","textSmoothing","textShadows"].indexOf(t)};s.isText&&(A(h)?(s.updateNaturalWidth(),s.updateNaturalHeight()):"borderTopWidth"===h||"borderBottomWidth"===h?s.updateNaturalHeight():("borderLeftWidth"===h||"borderRightWidth"===h)&&(s.updateNaturalWidth(),s.updateNaturalHeight()))}s.updateTransitionProp(h)}else if(""!==u)this.calcVal?LAY.$arrayUtils.pushUnique(l.stateS,u)&&(l.$updateStates(),LAY.$arrayUtils.remove(l.newlyUninstalledStateS,u),LAY.$arrayUtils.pushUnique(l.newlyInstalledStateS,u),LAY.$arrayUtils.pushUnique(LAY.$newlyInstalledStateLevelS,l)):LAY.$arrayUtils.remove(l.stateS,u)&&(l.$updateStates(),LAY.$arrayUtils.remove(l.newlyInstalledStateS,u),LAY.$arrayUtils.pushUnique(l.newlyUninstalledStateS,u),LAY.$arrayUtils.pushUnique(LAY.$newlyUninstalledStateLevelS,l));else if(""!==d)s.updateWhenEventType(d);else if(""!==f)s.updateTransitionProp(f);else if(c)if("rows"===h)c.updateRows();else if("filter"===h){if(!c.updateFilter())return!1;c.updateLayout()}else h.startsWith("sort.")?c.updateRows():(h.startsWith("fargs.")||"formation"===h)&&c.updateLayout();else switch(h){case"exist":l.$updateExistence();break;case"right":void 0!==l.parentLevel&&l.parentLevel.part.updateNaturalWidth();break;case"bottom":void 0!==l.parentLevel&&l.parentLevel.part.updateNaturalHeight();break;case"$naturalWidth":if(this.level.attr2attrVal.scrollX){var g=this;setTimeout(function(){g.level.attr2attrVal.scrollX.requestRecalculation(),LAY.$solve()})}break;case"$naturalHeight":if(this.level.attr2attrVal.scrollY){var g=this;setTimeout(function(){g.level.attr2attrVal.scrollY.requestRecalculation(),LAY.$solve()})}break;case"$input":s.updateNaturalWidth(),"line"===s.inputType&&s.isInitiallyRendered||s.updateNaturalHeight()}}return this.isForceRecalculate=!1,this.isRecalculateRequired=!1,!0},LAY.AttrVal.prototype.checkIfDeferenced=function(){return 0===this.takerAttrValS.length},LAY.AttrVal.prototype.give=function(t){if(LAY.$arrayUtils.pushUnique(this.takerAttrValS,t)&&1===this.takerAttrValS.length&&this.isEventReadonlyAttr){var e,r,i,n=LAY.$eventReadonlyUtils.getEventType2fnHandler(this.attr);i=this.level.part.node;for(e in n)"scroll"===e&&"/"===this.level.pathName&&(i=window),r=n[e].bind(this.level),LAY.$eventUtils.add(i,e,r),this.eventReadonlyEventType2boundFnHandler[e]=r}},LAY.AttrVal.prototype.giveNot=function(t){if(LAY.$arrayUtils.remove(this.takerAttrValS,t)&&0===this.takerAttrValS.length&&this.isEventReadonlyAttr){var e,r,i,n=LAY.$eventReadonlyUtils.getEventType2fnHandler(this.attr);i=this.level.part.node;for(e in n)"scroll"===e&&"/"===this.level.pathName&&(i=window),r=this.eventReadonlyEventType2boundFnHandler[e],LAY.$eventUtils.remove(i,e,r),this.eventReadonlyEventType2boundFnHandler[e]=void 0}},LAY.AttrVal.prototype.take=function(){if(this.val instanceof LAY.Take){var t,e,r,i,n,a;for(t=this.val._relPath00attr_S,n=0,a=t.length;a>n;n++){if(e=t[n][0],i=t[n][1],r=e.resolve(this.level),void 0===r)return!1;if(void 0===r.attr2attrVal[i])return r.$createLazyAttr(i),!1;if(r.attr2attrVal[i].isRecalculateRequired)return!1}for(n=0;a>n;n++)e=t[n][0],i=t[n][1],e.resolve(this.level).$getAttrVal(i).give(this)}return!0},LAY.AttrVal.prototype.takeNot=function(t){if(t instanceof LAY.Take){var e,r,i,n;e=t._relPath00attr_S;for(var a=0,o=e.length;o>a;a++)r=e[a][0],n=e[a][1],i=r.resolve(this.level),void 0!==i&&void 0!==i.$getAttrVal(n)&&i.$getAttrVal(n).giveNot(this)}},LAY.AttrVal.prototype.remove=function(){this.takeNot(this.val)}}(),function(){"use strict";function t(t,e,i){var n,a,o;if(0===e)n=a=o=i;else{var l=.5>i?i*(1+e):i+e-i*e,s=2*i-l;n=r(s,l,t+1/3),a=r(s,l,t),o=r(s,l,t-1/3)}return{r:255*n,g:255*a,b:255*o}}function e(t,e,r){t/=255,e/=255,r/=255;var i,n,a=Math.max(t,e,r),o=Math.min(t,e,r),l=(a+o)/2;if(a==o)i=n=0;else{var s=a-o;switch(n=l>.5?s/(2-a-o):s/(a+o),a){case t:i=(e-r)/s+(r>e?6:0);break;case e:i=(r-t)/s+2;break;case r:i=(t-e)/s+4}i/=6}return{h:i,s:n,l:l}}function r(t,e,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?t+6*(e-t)*r:.5>r?e:2/3>r?t+(e-t)*(2/3-r)*6:t}var i=function(){var t=document.body.style.color;try{document.body.style.color="rgba(0,0,0,0)"}catch(e){}var r=document.body.style.color!==t;return document.body.style.color=t,r}();LAY.Color=function(t,e,r){this.format=t,this.r=e.r,this.g=e.g,this.b=e.b,this.h=e.h,this.s=e.s,this.l=e.l,this.a=r},LAY.Color.prototype.getFormat=function(){return this.format},LAY.Color.prototype.getRed=function(){return this.r},LAY.Color.prototype.getGreen=function(){return this.g},LAY.Color.prototype.getBlue=function(){return this.b},LAY.Color.prototype.getHue=function(){return this.h},LAY.Color.prototype.getSaturation=function(){return this.s},LAY.Color.prototype.getLightness=function(){return this.l},LAY.Color.prototype.getAlpha=function(){return this.a},LAY.Color.prototype.stringify=function(){var t,e;return i?"hsl"===this.format?(e=this.getHsl(),1===this.a?"hsl("+e.h+","+e.s+","+e.l+")":"hsla("+e.h+","+e.s+","+e.l+","+this.a+")"):(t=this.getRgb(),1===this.a?"rgb("+t.r+","+t.g+","+t.b+")":"rgba("+t.r+","+t.g+","+t.b+","+this.a+")"):this.a<.1?"transparent":(t=this.getRgb(),"rgb("+t.r+","+t.g+","+t.b+")")},LAY.Color.prototype.copy=function(){return"rgb"===this.format?new LAY.Color("rgb",{r:this.r,g:this.g,b:this.b},this.a):new LAY.Color("hsl",{h:this.h,s:this.s,l:this.l},this.a)},LAY.Color.prototype.equals=function(t){return this.format===t.format&&this.a===t.a&&("rgb"===this.format&&this.r===t.r&&this.g===t.g&&this.b===t.b||"hsl"===this.format&&this.h===t.h&&this.s===t.s&&this.l===t.l)},LAY.Color.prototype.getRgb=function(){return"rgb"===this.format?{r:this.r,g:this.g,b:this.b}:t(this.r,this.g,this.b)},LAY.Color.prototype.getHsl=function(){return"hsl"===this.format?{h:this.h,s:this.s,l:this.l}:e(this.r,this.g,this.b)},LAY.Color.prototype.getRgba=function(){var t=this.getRgb();return t.a=this.a,t},LAY.Color.prototype.getHsla=function(){var t=this.getHsl();return t.a=this.a,t},LAY.Color.prototype.red=function(t){if("rgb"===this.format)this.r=t;else{var r=this.getRgb(),i=e(t,r.g,r.b);this.h=i.h,this.s=i.s,this.l=i.l}return this},LAY.Color.prototype.green=function(t){if("rgb"===this.format)this.g=t;else{var r=this.getRgb(),i=e(r.r,t,r.b);this.h=i.h,this.s=i.s,this.l=i.l}return this},LAY.Color.prototype.blue=function(t){if("rgb"===this.format)this.b=t;else{var r=this.getRgb(),i=e(r.r,r.g,t);this.h=i.h,this.s=i.s,this.l=i.l}return this},LAY.Color.prototype.hue=function(e){if("hsl"===this.format)this.h=e;else{var r=this.getHsl(),i=t(e,r.s,r.l);this.r=i.r,this.g=i.g,this.b=i.b}return this},LAY.Color.prototype.saturation=function(e){if("hsl"===this.format)this.s=e;else{var r=this.getHsl(),i=t(r.h,e,r.l);this.r=i.r,this.g=i.g,this.b=i.b}return this},LAY.Color.prototype.lightness=function(e){if("hsl"===this.format)this.l=e;else{var r=this.getHsl(),i=t(r.h,r.s,e);this.r=i.r,this.g=i.g,this.b=i.b}return this},LAY.Color.prototype.alpha=function(t){return this.a=t,this},LAY.Color.prototype.darken=function(e){var r=this.getHsl();if(r.l=r.l-r.l*e,"hsl"===this.format)this.l=r.l;else{var i=t(r.h,r.s,r.l);this.r=i.r,this.g=i.g,this.b=i.b}return this},LAY.Color.prototype.lighten=function(e){var r=this.getHsl();if(r.l=r.l+r.l*e,"hsl"===this.format)this.l=r.l;else{var i=t(r.h,r.s,r.l);this.r=i.r,this.g=i.g,this.b=i.b}return this},LAY.Color.prototype.saturate=function(e){var r=this.getHsl();if(r.s=r.s+r.s*e,"hsl"===this.format)this.s=r.s;else{var i=t(r.h,r.s,r.l);this.r=i.r,this.g=i.g,this.b=i.b}return this},LAY.Color.prototype.desaturate=function(e){var r=this.getHsl();if(r.s=r.s-r.s*e,"hsl"===this.format)this.s=r.s;else{var i=t(r.h,r.s,r.l);this.r=i.r,this.g=i.g,this.b=i.b}return this},LAY.Color.prototype.invert=function(){var t=this.getRgb();if(t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,"rgb"===this.format)this.r=t.r,this.g=t.g,this.b=t.b;else{var r=e(t.r,t.g,t.b);this.h=r.h,this.s=r.s,this.l=r.l}return this}}(),function(){"use strict";function t(t,e,r,i){var n;for(n in e)void 0===e[n]&&i||(r[t+n]=e[n])}function e(t,e,r){var i,n;for(i=0,n=e.length;n>i;i++)r[t+"."+(i+1)]=e[i]}function r(r,i,n){var a,o,l,s,c,h,u,d=(r.props,r.when),f=r.transition,p=r.fargs;if(n){t("",r.props,i,!0);for(a in f)o=f[a],l="transition."+a+".",void 0!==o.type&&(i[l+"type"]=o.type),void 0!==o.duration&&(i[l+"duration"]=o.duration),void 0!==o.delay&&(i[l+"delay"]=o.delay),void 0!==o.done&&(i[l+"done"]=o.done),void 0!==o.args&&t(l+"args.",o.args,i,!1);for(s in d)c=d[s],e("when."+s,c,i);void 0!==r.$$num&&t("$$num.",r.$$num,i,!1),void 0!==r.$$max&&t("$$max.",r.$$max,i,!1)}else{if(i.formation=r.formation,i.filter=r.filter,p)for(var v in p)t("fargs."+v+".",p[v],i,!1);for(i["$$num.sort"]=r.sort.length,h=0,u=r.sort.length;u>h;h++)t("sort."+(h+1)+".",r.sort[h],i,!1)}}LAY.Level=function(t,e,r,i,n,a,o){this.pathName=t,this.lson=e,this.partLson=void 0,this.isGpu=void 0,this.isInitialized=!1,this.parentLevel=r,this.attr2attrVal={},this.isPart=void 0,this.isHelper=i,this.isExist=!0,this.part=void 0,this.manyObj=void 0,this.derivedMany=n,this.id=o,this.rowDict=a,this.isInherited=!1,this.childLevelS=[],this.stateS=["root"],this.stringHashedStates2_cachedAttr2val_={},this.newlyInstalledStateS=[],this.newlyUninstalledStateS=[]},LAY.Level.prototype.$init=function(){LAY.$pathName2level[this.pathName]=this,LAY.$newLevelS.push(this),this.parentLevel&&this.parentLevel.childLevelS.push(this)},LAY.Level.prototype.level=function(t){return new LAY.RelPath(t).resolve(this)},LAY.Level.prototype.parent=function(){return this.parentLevel},LAY.Level.prototype.path=function(){return this.pathName},LAY.Level.prototype.node=function(){return this.isPart&&this.part.node},LAY.Level.prototype.attr=function(t){if(this.attr2attrVal[t])return this.attr2attrVal[t].calcVal;if("$"===t.charAt(0)){if(LAY.$checkIfDoingReadonly(t))return void console.error("LAY Error: "+t+" must be placed in $obdurate");if(LAY.$checkIfImmidiateReadonly(t))return this.part.getImmidiateReadonlyVal(t)}if(this.$createLazyAttr(t,!0)){var e=this.attr2attrVal[t];return e.give(LAY.$emptyAttrVal),LAY.$solve(),e.calcVal}},LAY.Level.prototype.data=function(t,e){this.$changeAttrVal("data."+t,e),LAY.$solve()},LAY.Level.prototype.row=function(t,e){this.derivedMany&&(this.derivedMany.id2row[this.id][t]=e,this.derivedMany.level.attr2attrVal.rows.requestRecalculation(),LAY.$solve())},LAY.Level.prototype.changeNativeInput=function(t){this.part.node.value=t},LAY.Level.prototype.changeNativeScrollX=function(t){this.part.node.scrollLeft=t},LAY.Level.prototype.changeNativeScrollY=function(t){this.part.node.scrollTop=t},LAY.Level.prototype.many=function(){return this.derivedMany&&this.derivedMany.level},LAY.Level.prototype.levels=function(){return this.manyObj&&this.manyObj.allLevelS},LAY.Level.prototype.rowsCommit=function(t){this.isPart||this.manyObj.rowsCommit(t)},LAY.Level.prototype.rowsMore=function(t){this.isPart||this.manyObj.rowsMore(t)},LAY.Level.prototype.rowAdd=function(t){this.rowsMore([t])},LAY.Level.prototype.rowDeleteByID=function(t){this.isPart||this.manyObj.rowDeleteByID(t)},LAY.Level.prototype.rowsUpdate=function(t,e,r){this.isPart||(r instanceof LAY.Query&&(r=r.rowS),this.manyObj.rowsUpdate(t,e,r))},LAY.Level.prototype.rowsDelete=function(t){this.isPart||(t instanceof LAY.Query&&(t=t.rowS),this.manyObj.rowsDelete(t))},LAY.Level.prototype.dataTravelBegin=function(t,e){var r;LAY.$isDataTravelling?console.error("LAY Warning: Existence of another unfinished data travel"):(r=this.attr2attrVal["data."+t],void 0===r&&console.error("LAY Warning: Inexistence of data key for data travel"),LAY.$isDataTravelling=!0,LAY.level("/").attr2attrVal.$dataTravelling.update(!0),LAY.$dataTravellingLevel=this,LAY.level("/").attr2attrVal.$dataTravelLevel.update(this),LAY.$dataTravellingAttrInitialVal=r.val,LAY.$dataTravellingAttrVal=r,LAY.$isDataTravellingShock=!0,r.update(e),LAY.$solve(),LAY.$isDataTravellingShock=!1)},LAY.Level.prototype.dataTravelContinue=function(t){LAY.$isDataTravelling?this!==LAY.$dataTravellingLevel?console.error("LAY Warning: Inexistence of a data travel for this Level"):LAY.$dataTravelDelta!==t&&(LAY.$dataTravelDelta=t,LAY.level("/").attr2attrVal.$dataTravelDelta.update(t),LAY.$render()):console.error("LAY Warning: Inexistence of a data travel")},LAY.Level.prototype.dataTravelArrive=function(t){LAY.$isDataTravelling?(LAY.$isDataTravelling=!1,LAY.level("/").attr2attrVal.$dataTravelling.update(!1),LAY.$dataTravellingLevel=void 0,LAY.level("/").attr2attrVal.$dataTravelLevel.update(null),LAY.$dataTravelDelta=0,LAY.level("/").attr2attrVal.$dataTravelDelta.update(0),LAY.$clearDataTravellingAttrVals(),t||(LAY.$dataTravellingAttrVal.update(LAY.$dataTravellingAttrInitialVal),LAY.$solve()),LAY.$render()):console.error("LAY Warning: Inexistence of a data travel")},LAY.Level.prototype.queryRows=function(){return this.isPart?void 0:this.manyObj.queryRows()},LAY.Level.prototype.queryFilter=function(){return this.isPart?void 0:this.manyObj.queryFilter()},LAY.Level.prototype.addChildren=function(t){for(var e in t){var r=t[r];this.lson.children[e]=r,this.$addChild(e,t)}},LAY.Level.prototype.remove=function(){"/"===this.pathName?console.error("LAY Error: Attempt to remove root level '/' prohibited"):this.derivedMany?this.derivedMany.rowDeleteByID(this.id):(this.$remove(),LAY.$solve())},LAY.Level.prototype.$remove=function(){this.$disappear(),LAY.$pathName2level[this.pathName]=void 0,LAY.$arrayUtils.remove(this.parentLevel.childLevelS,this)},LAY.Level.prototype.$addChildren=function(t){if(void 0!==t)for(var e in t)this.$addChild(e,t[e])},LAY.Level.prototype.$addChild=function(t,e){var r,i;if(!LAY.$checkIsValidUtils.levelName(t))throw"LAY Error: Invalid Level Name: "+t;if(r=this.pathName+("/"===this.pathName?"":"/")+t,void 0!==LAY.$pathName2level[r])throw"LAY Error: Level already exists with path: "+r+" within Level: "+this.pathName;i=new LAY.Level(r,e,this,"_"===t.charAt(0)),i.$init()},LAY.Level.prototype.$normalizeAndInherit=function(){var t,e,r,i,n,a,o;if(LAY.$normalize(this.lson,this.isHelper),void 0!==this.lson.$inherit){for(t={},e=this.lson.$inherit,r=0,i=e.length;i>r;r++)if(n=e[r],"string"==typeof n){if(n===this.pathName)return!1;if(a=new LAY.RelPath(n).resolve(this),void 0===a||!a.isInherited)return!1}for(r=0;i>r;r++)n=e[r],"string"==typeof n?(a=new LAY.RelPath(n).resolve(this),o=a.lson):(LAY.$normalize(n,!0),o=n),LAY.$inherit(t,o);LAY.$inherit(t,this.lson),this.lson=t}return this.isInherited=!0,!0},LAY.Level.prototype.$reproduce=function(){this.isPart?(this.part=new LAY.Part(this),this.part.init(),void 0!==this.lson.children&&this.$addChildren(this.lson.children)):(this.manyObj=new LAY.Many(this,this.partLson),this.manyObj.init())},LAY.Level.prototype.$identify=function(){if(this.isPart=void 0===this.lson.many||this.derivedMany,"/"===this.pathName?this.isGpu=void 0===this.lson.$gpu?!0:this.lson.$gpu:this.isGpu=void 0===this.lson.$gpu?this.parentLevel.isGpu:this.lson.$gpu,this.isGpu=this.isGpu&&LAY.$isGpuAccelerated,this.isPart)this.derivedMany||LAY.$defaultizePartLson(this.lson,this.parentLevel);else{if("/"===this.pathName)throw"LAY Error: 'many' prohibited for root level /";this.partLson=this.lson,this.lson=this.lson.many,LAY.$defaultizeManyLson(this.lson)}},LAY.Level.prototype.$updateExistence=function(){var t=this.attr2attrVal.exist.calcVal;t?this.$appear():this.$disappear()},LAY.Level.prototype.$appear=function(){this.isExist=!0,this.$reproduce(),this.$initAllAttrs(),this.isPart&&this.part.add()},LAY.Level.prototype.$disappear=function(){this.isExist=!1;var t=this.attr2attrVal;for(var e in t)"exist"!==e&&t[e].remove();for(var r=this.isPart?this.childLevelS:this.manyObj.allLevelS,i=0,n=r.length;n>i;i++)r[i]&&r[i].$remove();this.isPart?this.part&&this.part.remove():this.manyObj.remove()},LAY.Level.prototype.$decideExistence=function(){this.isHelper||this.$createAttrVal("exist",void 0===this.lson.exist?!0:this.lson.exist)},LAY.Level.prototype.$initAllAttrs=function(){var t,e,r,i=this.lson.$obdurate?this.lson.$obdurate:[];if(this.isInitialized=!0,this.isPart&&(this.lson.states.root.props.scrollX&&i.push("$naturalWidth"),this.lson.states.root.props.scrollY&&i.push("$naturalHeight"),"input"===this.part.type&&"line"!==this.part.inputType&&i.push("$input")),i.length)for(e=0,r=i.length;r>e;e++){if(t=i[e],!this.$createLazyAttr(t))throw"LAY Error: Unobervable Attr: '"+t+"'";this.attr2attrVal[t].give(LAY.$emptyAttrVal)}this.$initNonStateProjectedAttrs(),this.$updateStates()},LAY.Level.prototype.$initNonStateProjectedAttrs=function(){var e,r,i=this.lson.states,n=this.lson,a={};t("data.",n.data,a,!1);for(e in i)r=i[e],"root"!==e&&(a[e+".onlyif"]=r.onlyif,r.install&&(a[e+".install"]=r.install),r.uninstall&&(a[e+".uninstall"]=r.uninstall));this.isPart?(a.right=LAY.$essentialPosAttr2take.right,a.bottom=LAY.$essentialPosAttr2take.bottom,"/"===this.pathName?(a.$dataTravelling=!1,a.$dataTravelDelta=0,a.$dataTravelLevel=void 0,a.$absoluteLeft=0,a.$absoluteTop=0,a.$windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a.$windowHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight):this.derivedMany&&(t("row.",this.rowDict,a,!1),a.$i=0,a.$f=0)):(a.rows=n.rows,a.$id=n.$id,a.$$layout=null),this.$commitAttr2Val(a)},LAY.Level.prototype.$commitAttr2Val=function(t){var e,r,i;for(e in t)r=t[e],i=this.attr2attrVal[e],void 0===i&&(i=this.attr2attrVal[e]=new LAY.AttrVal(e,this)),i.update(r)},LAY.Level.prototype.$createAttrVal=function(t,e){(this.attr2attrVal[t]=new LAY.AttrVal(t,this)).update(e)},LAY.Level.prototype.$createLazyAttr=function(t,e){var r,i,n,a,o;if(LAY.$miscPosAttr2take[t])this.$createAttrVal(t,LAY.$miscPosAttr2take[t]);else if("$"===t.charAt(0))if(-1!==["$type","$load","$id","$inherit","$obdurate"].indexOf(t))this.$createAttrVal(t,this.lson[t]);else if("$path"===t)this.$createAttrVal("$path",this.pathName);else if(!e&&LAY.$checkIfImmidiateReadonly(t))this.$createAttrVal(t,null);else{if(!LAY.$checkIfDoingReadonly(t))return console.error("LAY Error: Incorrectly named readonly: "+t),!1;this.$createAttrVal(t,!1)}else if(-1===t.indexOf(".")){var l=LAY.$getLazyPropVal(t,void 0===this.parentLevel);if(void 0===l)return!1;this.$createAttrVal(t,l)}else{if(t.startsWith("data."))return!1;if(r=t.split("."),void 0===this.lson.states)return!1;if(o=r[0],!LAY.$checkIsValidUtils.stateName(o))return!1;if(i=this.lson.states[o],r.shift(),"when"===r[0])r[r.length-1]=parseInt(r[r.length-1])-1;else if(-1!==["fargs","sort","formation","filter","rows"].indexOf(r[0]));else if("transition"!==r[0]){if(void 0===i.props)return!1;i=i.props}for(n=0,a=r.length;a>n&&(i=i[r[n]],void 0!==i);n++);if(void 0===i)return!1;this.$createAttrVal(t,i)}return!0},LAY.Level.prototype.$undefineStateProjectedAttrs=function(){var t;for(t in this.attr2attrVal)this.attr2attrVal[t].isStateProjectedAttr&&this.attr2attrVal[t].update(void 0)},LAY.Level.prototype.$getStateAttr2val=function(){var t,e={};t=this.derivedMany?this.derivedMany.levelStringHashedStates2_cachedAttr2val_:this.stringHashedStates2_cachedAttr2val_,this.$sortStates();var i=this.stateS.join("&");return void 0===t[i]&&(r(this.$generateSLSON(),e,this.isPart),t[i]=e),t[i]},LAY.Level.prototype.$sortStates=function(t){var e=this.stateS.sort();LAY.$arrayUtils.remove(e,"root"),e.unshift("root"),-1!==e.indexOf("formationDisplayNone")&&(LAY.$arrayUtils.remove(e,"formationDisplayNone"),e.push("formationDisplayNone"))},LAY.Level.prototype.$generateSLSON=function(){this.$sortStates();for(var t={},e=0,r=this.stateS.length;r>e;e++)LAY.$inherit(t,this.lson.states[this.stateS[e]],!0,!this.isPart,!0);return t},LAY.Level.prototype.$updateStates=function(){var t=this.attr2attrVal;if(this.$undefineStateProjectedAttrs(),this.$commitAttr2Val(this.$getStateAttr2val()),this.derivedMany&&!this.derivedMany.level.attr2attrVal.filter.isRecalculateRequired&&1!==t.$f.calcVal&&this.$setFormationXY(this.part.formationX,this.part.formationY),"/"===this.pathName){if(this.attr2attrVal.width.val!==this.lson.states.root.props.width)throw"LAY Error: width of root level unchangeable";if(this.attr2attrVal.height.val!==this.lson.states.root.props.height)throw"LAY Error: height of root level unchangeable";if(0!==this.attr2attrVal.top.val)throw"LAY Error: top of root level unchangeable";if(0!==this.attr2attrVal.left.val)throw"LAY Error: left of root level unchangeable"}},LAY.Level.prototype.$getAttrVal=function(t){return this.attr2attrVal[t]},LAY.Level.prototype.$changeAttrVal=function(t,e){this.attr2attrVal[t]&&(this.attr2attrVal[t].update(e),LAY.$solve())},LAY.Level.prototype.$requestRecalculation=function(t){this.attr2attrVal[t]&&(this.attr2attrVal[t].requestRecalculation(),LAY.$solve())},LAY.Level.prototype.$setFormationXY=function(t,e){if(this.part.formationX=t,this.part.formationY=e,this.part){var r=this.attr2attrVal.top,i=this.attr2attrVal.left;void 0===t?i.update(this.derivedMany.defaultFormationX):i.update(t),void 0===e?r.update(this.derivedMany.defaultFormationY):r.update(e),r.requestRecalculation(),i.requestRecalculation()}}}(),function(){"use strict";function t(t){return t.length&&"object"!=typeof t[0]}function e(t,e){for(var r=[],i=0,n=t.length;n>i;i++){var a={content:t[i]};a[e]=i+1,r.push(a)}return r}function r(t,e){for(var r=0,i=0,n=t.length;n>i;i++)void 0!==t[i][e]&&r++;if(r>0){if(r!==t.length)throw"LAY Error: Inconsistent id provision to rows of "+this.level.pathName}else if(t.length)return!0;return!1}function i(t,e){for(var r=0,i=t.length;i>r;r++)t[r][e]=r+1;for(var n=!1,r=0,i=t.length;i>r;r++)if(t[r][e]!==r+1){n=!0;break}if(n)for(var r=0,i=t.length;i>r;r++)t[r]=LAY.$clone(t[r]),t[r][e]=r+1;return t}LAY.Many=function(t,e){this.level=t,this.partLson=e,this.allLevelS=[],this.filteredLevelS=[],this.levelStringHashedStates2_cachedAttr2val_={},this.id=t.lson.$id||"id",this.id2level={},this.id2row={},this.isLoaded=!1,this.isAutoId=!1,this.defaultFormationX=void 0,this.defaultFormationY=void 0},LAY.Many.prototype.init=function(){var t=this.partLson.states||(this.partLson.states={});t.formationDisplayNone=LAY.$formationDisplayNoneState,LAY.$defaultizePartLson(this.partLson,this.level.parentLevel),LAY.$newManyS.push(this),this.defaultFormationX=this.partLson.states.root.props.left,this.defaultFormationY=this.partLson.states.root.props.top},LAY.Many.prototype.queryRows=function(){return new LAY.Query(LAY.$arrayUtils.cloneSingleLevel(this.level.attr2attrVal.rows.calcVal))},LAY.Many.prototype.queryFilter=function(){return new LAY.Query(LAY.$arrayUtils.cloneSingleLevel(this.level.attr2attrVal.filter.calcVal))},LAY.Many.prototype.rowsCommit=function(t){var e=this.level.attr2attrVal.rows;e.val=t,e.requestRecalculation(),LAY.$solve()},LAY.Many.prototype.rowsMore=function(r){var i=this.level.attr2attrVal.rows,n=i.calcVal;t(r)&&(r=e(r));for(var a=0;a<r.length;a++)n.push(r[a]);i.val=i.calcVal,i.requestRecalculation(),LAY.$solve()},LAY.Many.prototype.rowDeleteByID=function(t){var e=this.level.attr2attrVal.rows,r=e.calcVal,i=this.id2row[t];i&&(LAY.$arrayUtils.remove(r,i),e.val=e.calcVal,e.requestRecalculation(),LAY.$solve())},LAY.Many.prototype.rowsUpdate=function(t,e,r){var i=this.level.attr2attrVal.rows;r=r||i.calcVal||[];for(var n=0,a=r.length;a>n;n++){var o=this.id2row[r[n][this.id]];o&&(o[t]=e)}i.val=i.calcVal,i.requestRecalculation(),LAY.$solve()},LAY.Many.prototype.rowsDelete=function(t){var e=this.level.attr2attrVal.rows,r=e.calcVal;t=t||e.calcVal||[];for(var i=0,n=t.length;n>i;i++){var a=this.id2row[t[i][this.id]];LAY.$arrayUtils.remove(r,a)}e.val=e.calcVal,e.requestRecalculation(),LAY.$solve()},LAY.Many.prototype.updateRows=function(){var n,a,o,l,s,c,h,u,d,f=this.level.attr2attrVal.rows.calcVal,p=(this.level.parentLevel,[]),v=[],A=this.id2level,g=this.id2row;if(f||(f=[]),t(f)){f=e(f,this.id);var L=this.level.attr2attrVal.rows;L.calcVal=f}else if(this.isAutoId||r(f,this.id)){this.isAutoId=!0,f=i(f,this.id);var L=this.level.attr2attrVal.rows;L.calcVal=f}for(this.sort(f),u=0,d=f.length;d>u;u++){if(n=f[u],a=n[this.id],g[a]=n,o=this.id2level[a]){if(o.isInitialized)for(l in n)s=n[l],c="row."+l,h=o.attr2attrVal[c],h?h.update(s):o.$createAttrVal(c,s)}else o=new LAY.Level(this.level.pathName+":"+a,this.partLson,this.level.parentLevel,!1,this,n,a),o.$init(),A[a]=o,g[a]=n,v.push(o);p.push(o)}for(a in A)o=A[a],o&&-1===p.indexOf(o)&&(o.$remove(),this.id2row[a]=void 0,this.id2level[a]=void 0);this.allLevelS=p},LAY.Many.prototype.updateFilter=function(){for(var t,e,r=this.allLevelS,i=this.level.attr2attrVal.filter.calcVal||[],n=[],a=1,o=0,l=r.length;l>o;o++){if(e=r[o],!e.isInitialized)return!1;e.attr2attrVal.$i.update(o+1),e.attr2attrVal.$f.update(-1)}for(var s=this.id,o=0,l=i.length;l>o;o++)t=this.id2level[i[o][s]],t&&(n.push(t),t.attr2attrVal.$f.update(a++));return this.filteredLevelS=n,!0},LAY.Many.prototype.updateLayout=function(){LAY.$arrayUtils.pushUnique(LAY.$relayoutDirtyManyS,this)},LAY.Many.prototype.relayout=function(){var t,e=this.filteredLevelS,r=e[0],i=this.level.attr2attrVal,n=i.formation.calcVal,a=LAY.$formation2fargs[n],o={};for(var l in a)t=i["fargs."+n+"."+l],o[l]=t?t.calcVal:a[l];var s=LAY.$formation2fn[n];r&&r.$setFormationXY(void 0,void 0);for(var c,h,u=1,d=e.length;d>u;u++)c=e[u],h=s(u+1,c,e,o),c.$setFormationXY(h[0],h[1])},LAY.Many.prototype.sort=function(t){var e,r=this.level.attr2attrVal,i=r["$$num.sort"]?r["$$num.sort"].calcVal:0,n=[];if(i>0)for(var a=0;i>a;a++)e="sort."+(a+1)+".",n.push({key:r[e+"key"].calcVal,ascending:r[e+"ascending"].calcVal})},LAY.Many.prototype.remove=function(){}}(),function(){"use strict";function t(t){return t+"px"}function e(t){for(var e,r="",i=0,n=t.length;n>i;i++)e=t[i],r+="<option value='"+e.value+"'"+(e.selected?" selected='true'":"")+(e.disabled?" disabled='true'":"")+">"+e.content+"</option>";return r}function r(t){return t.startsWith("input:")&&t.slice("input:".length)}function i(t){var e=t.attr2attrVal.display;return!e||e.calcVal}function n(t){return-1!==t.indexOf("<")&&-1!==t.indexOf(">")}function a(t,e){return void 0===t?e:"number"==typeof t?t+"px":t}function o(e,r){return 0===e?"normal":t(e,r)}function l(t,e){return void 0===t?e:"number"==typeof t?t+"em":t}function s(t,e){return a(t&&t.transitionCalcVal,e)}function c(t,e){return o(t&&t.transitionCalcVal,e)}function h(t,e){return l(t&&t.transitionCalcVal,e)}function u(t,e){var r=t&&t.transitionCalcVal;return void 0===r?e:r instanceof LAY.Color?r.stringify():r}var d,f,p,v,A,g,L,y,Y,b;d=window.getComputedStyle?Array.prototype.slice.call(window.getComputedStyle(document.body,null)).join("").match(/(-moz-|-webkit-|-ms-)/)[1]:"-ms-",LAY.$isBelowIE9=/MSIE\s/.test(navigator.userAgent)&&parseFloat(navigator.appVersion.split("MSIE")[1])<10,f=document.body.style,f[d+"transform"]="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)",window.getComputedStyle?LAY.$isGpuAccelerated=Boolean(window.getComputedStyle(document.body,null).getPropertyValue(d+"transform"))&&!LAY.$isBelowIE9:LAY.$isGpuAccelerated=!1,f=void 0,p="position:absolute;display:block;visibility:inherit;margin:0;padding:0;backface-visibility: hidden;-webkit-backface-visibility: hidden;box-sizing:border-box;-moz-box-sizing:border-box;transform-style:preserve-3d;-webkit-transform-style:preserve-3d;overflow-x:hidden;overflow-y:hidden;-webkit-overflow-scrolling:touch;user-drag:none;white-space:nowrap;outline:none;border:none;",
v=p+"font-size:15px;font-family:sans-serif;color:black;text-decoration:none;text-align:left;direction:ltr;line-height:1.3em;white-space:nowrap;-webkit-font-smoothing:antialiased;",A=v+"visibility:hidden;height:auto;overflow:visible;border:0px solid transparent;",g={multiline:"textarea",select:"select",multiple:"select"},L={none:"div",text:"div",image:"img",video:"video",audio:"audio",link:"a"},b=["line","multiline","password","select","multiple"],y=document.createElement("div"),y.style.cssText=A,document.body.appendChild(y),Y=document.createElement("img"),Y.style.cssText=p+"visibility:hidden;",document.body.appendChild(Y),LAY.Part=function(t){this.level=t,this.node=void 0,this.type=void 0,this.inputType=void 0,this.isText=void 0,this.isInitiallyRendered=!1,this.normalRenderDirtyAttrValS=[],this.travelRenderDirtyAttrValS=[],this.whenEventType2fnMainHandler={},this.isImageLoaded=!1,this.formationX=void 0,this.formationY=void 0},LAY.Part.prototype.init=function(){var t,e;if(e=this.inputType=r(this.level.lson.$type),this.type=this.inputType?"input":this.level.lson.$type,e&&-1===b.indexOf(e))throw"LAY Error: Unsupported $type: input:"+e;if("/"===this.level.pathName?this.node=document.body:this.inputType?(t=g[this.inputType],t?(this.node=document.createElement(t),"multiple"===e&&(this.node.multiple=!0)):(this.node=document.createElement("input"),this.node.type="line"===this.inputType?"text":this.inputType,"password"===e&&(this.inputType="line"))):this.node=document.createElement(L[this.type]),this.isText="input"===this.type||void 0!==this.level.lson.states.root.props.text,this.isText?this.node.style.cssText=v:this.node.style.cssText=p,"input"===this.type&&"multiline"===this.inputType&&(this.node.style.resize="none"),"image"===this.type){var i=this;LAY.$eventUtils.add(this.node,"load",function(){i.isImageLoaded=!0,i.updateNaturalWidth(),i.updateNaturalHeight(),LAY.$solve()})}},LAY.Part.prototype.remove=function(){if("/"!==this.level.pathName){var t=this.level.parentLevel.part;t.updateNaturalWidth(),t.updateNaturalHeight(),this.node.parentNode===t.node&&t.node.removeChild(this.node)}},LAY.Part.prototype.add=function(){if("/"!==this.level.pathName){var t=this.level.parentLevel.part;t.updateNaturalWidth(),t.updateNaturalHeight(),this.level.parentLevel.part.node.appendChild(this.node)}},LAY.Part.prototype.findChildMaxOfAttr=function(t){for(var e,r,n=0,a=0,o=this.level.childLevelS,l=o.length;l>a;a++)e=o[a],e.isPart&&!e.isHelper&&e.isExist&&i(e)&&(r=e.attr2attrVal[t],void 0!==r&&r.calcVal&&r.calcVal>n&&(n=r.calcVal));return n},LAY.Part.prototype.getImmidiateReadonlyVal=function(t){switch(t){case"$naturalWidth":return this.calculateNaturalWidth();case"$naturalHeight":return this.calculateNaturalHeight();case"$scrolledX":return this.node.scrollLeft;case"$scrolledY":return this.node.scrollTop;case"$focused":return node===document.activeElement;case"$input":if("multiple"===this.inputType||"select"===this.inputType){for(var e=this.isInitiallyRendered?this.node.options:this.level.attr2attrVal.input.calcVal||[],r=[],i=0,n=e.length;n>i;i++)e[i].selected&&r.push(e[i].value);return e.length&&!r.length&&"select"===this.inputType&&r.push(e[0].value),"select"===this.inputType?r[0]:r}return this.node.value}},LAY.Part.prototype.updateNaturalWidth=function(){var t=this.level.$getAttrVal("$naturalWidth");t&&LAY.$arrayUtils.pushUnique(LAY.$naturalWidthDirtyPartS,this)},LAY.Part.prototype.updateNaturalHeight=function(){var t=this.level.$getAttrVal("$naturalHeight");t&&LAY.$arrayUtils.pushUnique(LAY.$naturalHeightDirtyPartS,this)},LAY.Part.prototype.calculateNaturalWidth=function(){this.level.attr2attrVal;return this.isText?this.calculateTextNaturalDimesion(!0):"image"===this.type?this.calculateImageNaturalDimesion(!0):this.findChildMaxOfAttr("right")},LAY.Part.prototype.calculateNaturalHeight=function(){this.level.attr2attrVal;return this.isText?this.calculateTextNaturalDimesion(!1):"image"===this.type?this.calculateImageNaturalDimesion(!1):this.findChildMaxOfAttr("bottom")},LAY.Part.prototype.calculateImageNaturalDimesion=function(t){if(this.isImageLoaded){Y.src=this.level.attr2attrVal.imageUrl.calcVal;var e=t?"height":"width",r=this.level.attr2attrVal[e],i=r&&void 0!==r.calcVal?r.calcVal+"px":"auto";return t?(Y.style.height=i,Y.style.width="auto",Y.offsetWidth):(Y.style.width=i,Y.style.height="auto",Y.offsetHeight)}return 0},LAY.Part.prototype.estimateTextNaturalHeight=function(t){if(n(t))return-1;var e={textSize:15,textWrap:"nowrap",textPaddingTop:0,textPaddingBottom:0,borderTopWidth:0,borderBottomWidth:0,textLineHeight:1.3,textLetterSpacing:1,textWordSpacing:1,width:null},r={};for(var i in e){var a=this.level.attr2attrVal[i];r[i]=void 0===a||void 0===a.calcVal?e[i]:a.calcVal}var o=!1;return"nowrap"===r.textWrap?o=!0:!LAY.$isOkayToEstimateWhitespaceHeight||"normal"!==r.textWrap&&-1!==t.indexOf("\\")||1!==r.textLetterSpacing||1!==r.textWordSpacing||null===r.width||t.length<.7*(r.width/r.textSize)&&(o=!0),o?r.textSize*r.textLineHeight+r.textPaddingTop+r.textPaddingBottom+r.borderTopWidth+r.borderBottomWidth:-1},LAY.Part.prototype.calculateTextNaturalDimesion=function(r){var i,n,s,c,h,u={textSize:a,textFamily:null,textWeight:null,textAlign:null,textStyle:null,textDirection:null,textTransform:null,textVariant:null,textLetterSpacing:o,textWordSpacing:o,textLineHeight:l,textOverflow:null,textIndent:t,textWrap:null,textWordBreak:null,textWordWrap:null,textRendering:null,textPaddingTop:t,textPaddingRight:t,textPaddingBottom:t,textPaddingLeft:t,borderTopWidth:t,borderRightWidth:t,borderBottomWidth:t,borderLeftWidth:t},d={textSize:"font-size",textFamily:"font-family",textWeight:"font-weight",textAlign:"text-align",textStyle:"font-style",textDirection:"direction",textTransform:"text-transform",textVariant:"font-variant",textLetterSpacing:"letter-spacing",textWordSpacing:"word-spacing",textLineHeight:"line-height",textOverflow:"text-overflow",textIndent:"text-indent",textWrap:"white-space",textWordBreak:"word-break",textWordWrap:"word-wrap",textRendering:"text-rendering",textPaddingTop:"padding-top",textPaddingRight:"padding-right",textPaddingBottom:"padding-bottom",textPaddingLeft:"padding-left",borderTopWidth:"border-top-width",borderRightWidth:"border-right-width",borderBottomWidth:"border-bottom-width",borderLeftWidth:"border-left-width"},f=this.level.attr2attrVal,p=A;if("input"===this.type)c="select"===this.inputType||"multiple"===this.inputType?"<select"+("multiple"===this.inputType?" multiple='true' ":"")+">"+e(f.input.calcVal)+"</select>":f.$input?f.$input.calcVal:"a";else{if(f.text.isRecalculateRequired)return 0;c=f.text.calcVal}if("string"!=typeof c&&(c=c.toString()),!r){var v=this.estimateTextNaturalHeight(c);if(-1!==v)return v}for(i in u)s=f[i],s&&void 0!==s.calcVal&&(n=u[i],p+=d[i]+":"+(null===n?s.calcVal:n(s.calcVal))+";");return r?(p+="display:inline;width:auto;",y.style.cssText=p,y.innerHTML=c,h=y.offsetWidth):(p+="width:"+(f.width.calcVal||0)+"px;",y.style.cssText=p,y.innerHTML=c||"a",h=y.offsetHeight),h},LAY.Part.prototype.addNormalRenderDirtyAttrVal=function(t){LAY.$arrayUtils.remove(this.travelRenderDirtyAttrValS,t),LAY.$arrayUtils.pushUnique(this.normalRenderDirtyAttrValS,t),LAY.$arrayUtils.pushUnique(LAY.$renderDirtyPartS,this)},LAY.Part.prototype.addTravelRenderDirtyAttrVal=function(t){LAY.$arrayUtils.remove(this.normalRenderDirtyAttrValS,t),LAY.$arrayUtils.pushUnique(this.travelRenderDirtyAttrValS,t),LAY.$arrayUtils.pushUnique(LAY.$renderDirtyPartS,this)},LAY.Part.prototype.updateWhenEventType=function(t){var e,r=this.level.attr2attrVal["$$num.when."+t].val,i=this.level;void 0!==this.whenEventType2fnMainHandler[t]&&LAY.$eventUtils.remove(this.node,t,this.whenEventType2fnMainHandler[t]),0!==r?(e=function(e){var n,a;for(n=0;r>n;n++)a=i.attr2attrVal["when."+t+"."+(n+1)],void 0!==a&&a.calcVal.call(i,e)},LAY.$eventUtils.add(this.node,t,e),this.whenEventType2fnMainHandler[t]=e):this.whenEventType2fnMainHandler[t]=void 0},LAY.Part.prototype.checkIsPropInTransition=function(t){return void 0!==this.level.attr2attrVal["transition."+t+".type"]||void 0!==this.level.attr2attrVal["transition."+t+".delay"]},LAY.Part.prototype.updateTransitionProp=function(t){if(this.isInitiallyRendered){var e,r,i,n,a,o,l,s,c,h,u,d=this.level.attr2attrVal,f={};if(-1!==["centerX","right","centerY","bottom"].indexOf(t))return;if(!this.checkIsPropInTransition(t)){if(!this.checkIsPropInTransition("all"))return;u=t,t="all"}for(i="transition."+t+".",n=d[i+"type"]?d[i+"type"].calcVal:"linear",a=d[i+"duration"]?d[i+"duration"].calcVal:0,o=d[i+"delay"]?d[i+"delay"].calcVal:0,l=d[i+"done"]?d[i+"done"].calcVal:void 0,s=LAY.$transitionType2args[n]?LAY.$transitionType2args[n]:[],c=0,h=s.length;h>c;c++)f[s[c]]=d[i+"args."+s[c]]?d[i+"args."+s[c]].calcVal:void 0;if(u||"all"!==t)this.updateTransitionAttrVal(d[u||t],n,o,a,f,l);else for(e in d)r=d[e],r.renderCall&&!this.checkIsPropInTransition(r.attr)&&this.updateTransitionAttrVal(r,n,o,a,f,l)}},LAY.Part.prototype.updateTransitionAttrVal=function(t,e,r,i,n,a){e&&void 0!==i&&void 0!==r&&void 0!==t&&t.isTransitionable?(t.startCalcVal=t.transitionCalcVal,t.transition=new LAY.Transition(e,r,i,n,a)):void 0!==t&&(t.transition=void 0)},LAY.Part.prototype.renderFn_x=function(){var t=this.level.attr2attrVal;this.node.style.left=t.left.transitionCalcVal+(void 0!==t.shiftX?t.shiftX.transitionCalcVal:0)+"px"},LAY.Part.prototype.renderFn_y=function(){var t=this.level.attr2attrVal;this.node.style.top=t.top.transitionCalcVal+(void 0!==t.shiftY?t.shiftY.transitionCalcVal:0)+"px"},LAY.$isGpuAccelerated?(LAY.Part.prototype.renderFn_positionAndTransform=function(){var t=this.level.attr2attrVal;d="-moz-"===d?"":d,this.node.style[d+"transform"]="translate("+(t.left.transitionCalcVal+(void 0!==t.shiftX?t.shiftX.transitionCalcVal:0)+"px, ")+(t.top.transitionCalcVal+(void 0!==t.shiftY?t.shiftY.transitionCalcVal:0)+"px) ")+(void 0!==t.z?"translateZ("+t.z.transitionCalcVal+"px) ":"")+(void 0!==t.scaleX?"scaleX("+t.scaleX.transitionCalcVal+") ":"")+(void 0!==t.scaleY?"scaleY("+t.scaleY.transitionCalcVal+") ":"")+(void 0!==t.scaleZ?"scaleZ("+t.scaleZ.transitionCalcVal+") ":"")+(void 0!==t.skewX?"skewX("+t.skewX.transitionCalcVal+"deg) ":"")+(void 0!==t.skewY?"skewY("+t.skewY.transitionCalcVal+"deg) ":"")+(void 0!==t.rotateX?"rotateX("+t.rotateX.transitionCalcVal+"deg) ":"")+(void 0!==t.rotateY?"rotateY("+t.rotateY.transitionCalcVal+"deg) ":"")+(void 0!==t.rotateZ?"rotateZ("+t.rotateZ.transitionCalcVal+"deg)":"")},LAY.Part.prototype.renderFn_transform=function(){var t=this.level.attr2attrVal;d="-moz-"===d?"":d,this.node.style[d+"transform"]=(void 0!==t.scaleX?"scaleX("+t.scaleX.transitionCalcVal+") ":"")+(void 0!==t.scaleY?"scaleY("+t.scaleY.transitionCalcVal+") ":"")+(void 0!==t.scaleZ?"scaleZ("+t.scaleZ.transitionCalcVal+") ":"")+(void 0!==t.skewX?"skewX("+t.skewX.transitionCalcVal+"deg) ":"")+(void 0!==t.skewY?"skewY("+t.skewY.transitionCalcVal+"deg) ":"")+(void 0!==t.rotateX?"rotateX("+t.rotateX.transitionCalcVal+"deg) ":"")+(void 0!==t.rotateY?"rotateY("+t.rotateY.transitionCalcVal+"deg) ":"")+(void 0!==t.rotateZ?"rotateZ("+t.rotateZ.transitionCalcVal+"deg)":"")}):(LAY.Part.prototype.renderFn_positionAndTransform=function(){this.renderFn_x(),this.renderFn_y()},LAY.Part.prototype.renderFn_transform=function(){}),LAY.Part.prototype.renderFn_width=function(){this.node.style.width=this.level.attr2attrVal.width.transitionCalcVal+"px",("canvas"===this.type||"video"===this.type||"image"===this.type)&&(this.node.width=this.level.attr2attrVal.width.transitionCalcVal)},LAY.Part.prototype.renderFn_height=function(){this.node.style.height=this.level.attr2attrVal.height.transitionCalcVal+"px",("canvas"===this.type||"video"===this.type||"image"===this.type)&&(this.node.height=this.level.attr2attrVal.height.transitionCalcVal)},LAY.Part.prototype.renderFn_origin=function(){var t=this.level.attr2attrVal;this.node.style[d+"transform-origin"]=100*(void 0!==t.originX?t.originX.transitionCalcVal:.5)+"% "+100*(void 0!==t.originY?t.originY.transitionCalcVal:.5)+"% "+(void 0!==t.originZ?t.originZ.transitionCalcVal:0)+"px"},LAY.Part.prototype.renderFn_perspective=function(){this.node.style[d+"perspective"]=this.level.attr2attrVal.perspective.transitionCalcVal+"px"},LAY.Part.prototype.renderFn_perspectiveOrigin=function(){var t=this.level.attr2attrVal;this.node.style[d+"perspective-origin"]=(t.perspectiveOriginX?100*t.perspectiveOriginX.transitionCalcVal:0)+"% "+(t.perspectiveOriginY?100*t.perspectiveOriginY.transitionCalcVal:0)+"%"},LAY.Part.prototype.renderFn_backfaceVisibility=function(){this.node.style[d+"backface-visibility"]=this.level.attr2attrVal.backfaceVisibility.transitionCalcVal},LAY.Part.prototype.renderFn_opacity=function(){this.node.style.opacity=this.level.attr2attrVal.opacity.transitionCalcVal},LAY.Part.prototype.renderFn_display=function(){this.node.style.display=this.level.attr2attrVal.display.transitionCalcVal?"block":"none"},LAY.Part.prototype.renderFn_visible=function(){this.node.style.visibility=this.level.attr2attrVal.visible.transitionCalcVal?"inherit":"hidden"},LAY.Part.prototype.renderFn_zIndex=function(){this.node.style.zIndex=this.level.attr2attrVal.zIndex.transitionCalcVal||"auto"},LAY.Part.prototype.renderFn_focus=function(){this.level.attr2attrVal.focus.transitionCalcVal?this.node.focus():document.activeElement===this.node&&document.body.focus()},LAY.Part.prototype.renderFn_scrollX=function(){this.node.scrollLeft=this.level.attr2attrVal.scrollX.transitionCalcVal},LAY.Part.prototype.renderFn_scrollY=function(){this.node.scrollTop=this.level.attr2attrVal.scrollY.transitionCalcVal},LAY.Part.prototype.renderFn_scrollElastic=function(){this.node["-webkit-overflow-scrolling"]=this.level.attr2attrVal.scrollElastic.transitionCalcVal?"touch":"auto"},LAY.Part.prototype.renderFn_overflowX=function(){this.node.style.overflowX=this.level.attr2attrVal.overflowX.transitionCalcVal},LAY.Part.prototype.renderFn_overflowY=function(){this.node.style.overflowY=this.level.attr2attrVal.overflowY.transitionCalcVal},LAY.Part.prototype.renderFn_cursor=function(){this.node.style.cursor=this.level.attr2attrVal.cursor.transitionCalcVal},LAY.Part.prototype.renderFn_userSelect=function(){"input"!==this.type&&(this.node.style[d+"user-select"]=this.level.attr2attrVal.userSelect.transitionCalcVal)},LAY.Part.prototype.renderFn_title=function(){this.node.title=this.level.attr2attrVal.title.transitionCalcVal},LAY.Part.prototype.renderFn_tabindex=function(){this.node.tabindex=this.level.attr2attrVal.tabindex.transitionCalcVal},LAY.Part.prototype.renderFn_backgroundColor=function(){this.node.style.backgroundColor=this.level.attr2attrVal.backgroundColor.transitionCalcVal.stringify()},LAY.Part.prototype.renderFn_backgroundImage=function(){this.node.style.backgroundImage=this.level.attr2attrVal.backgroundImage.transitionCalcVal},LAY.Part.prototype.renderFn_backgroundAttachment=function(){this.node.style.backgroundAttachment=this.level.attr2attrVal.backgroundAttachment.transitionCalcVal},LAY.Part.prototype.renderFn_backgroundRepeat=function(){this.node.style.backgroundRepeat=this.level.attr2attrVal.backgroundRepeat.transitionCalcVal},LAY.Part.prototype.renderFn_backgroundSize=function(){this.node.style.backgroundSize=s(this.level.attr2attrVal.backgroundSizeX,"auto")+" "+s(this.level.attr2attrVal.backgroundSizeY,"auto")},LAY.Part.prototype.renderFn_backgroundPosition=function(){this.node.style.backgroundPosition=s(this.level.attr2attrVal.backgroundPositionX,"0px")+" "+s(this.level.attr2attrVal.backgroundPositionX,"0px")},LAY.Part.prototype.renderFn_boxShadows=function(){if(!LAY.$isBelowIE9){var t,e,r=this.level.attr2attrVal,i="";for(t=1,e=r["$$max.boxShadows"].calcVal;e>=t;t++)i+=((void 0!==r["boxShadows"+t+"Inset"]?r["boxShadows"+t+"Inset"].transitionCalcVal:!1)?"inset ":"")+(r["boxShadows"+t+"X"].transitionCalcVal+"px ")+(r["boxShadows"+t+"Y"].transitionCalcVal+"px ")+((void 0!==r["boxShadows"+t+"Blur"]?r["boxShadows"+t+"Blur"].transitionCalcVal:0)+"px ")+((void 0!==r["boxShadows"+t+"Spread"]?r["boxShadows"+t+"Spread"].transitionCalcVal:0)+"px ")+r["boxShadows"+t+"Color"].transitionCalcVal.stringify(),t!==e&&(i+=",");this.node.style.boxShadow=i}},LAY.Part.prototype.renderFn_filters=function(){var t,e,r,i=this.level.attr2attrVal,n="";for(t=1,e=i["$$max.filters"].calcVal;e>=t;t++)switch(r=i["filters"+t+"Type"].calcVal){case"dropShadow":n+="drop-shadow("+(i["filters"+t+"X"].transitionCalcVal+"px ")+(i["filters"+t+"Y"].transitionCalcVal+"px ")+(i["filters"+t+"Blur"].transitionCalcVal+"px ")+i["filters"+t+"Color"].transitionCalcVal.stringify()+") ";break;case"blur":n+="blur("+i["filters"+t+"Blur"]+") ";break;case"hueRotate":n+="hue-rotate("+i["filters"+t+"HueRotate"]+"deg) ";break;case"url":n+="url("+i["filters"+t+"Url"]+") ";break;default:n+=r+"("+100*i["filters"+t+LAY.$capitalize(r)]+"%) "}this.node.style[d+"filter"]=n},LAY.Part.prototype.renderFn_cornerRadiusTopLeft=function(){this.node.style.borderTopLeftRadius=this.level.attr2attrVal.cornerRadiusTopLeft.transitionCalcVal+"px"},LAY.Part.prototype.renderFn_cornerRadiusTopRight=function(){this.node.style.borderTopRightRadius=this.level.attr2attrVal.cornerRadiusTopRight.transitionCalcVal+"px"},LAY.Part.prototype.renderFn_cornerRadiusBottomRight=function(){this.node.style.borderBottomRightRadius=this.level.attr2attrVal.cornerRadiusBottomRight.transitionCalcVal+"px"},LAY.Part.prototype.renderFn_cornerRadiusBottomLeft=function(){this.node.style.borderBottomLeftRadius=this.level.attr2attrVal.cornerRadiusBottomLeft.transitionCalcVal+"px"},LAY.Part.prototype.renderFn_borderTopStyle=function(){this.node.style.borderTopStyle=this.level.attr2attrVal.borderTopStyle.transitionCalcVal},LAY.Part.prototype.renderFn_borderRightStyle=function(){this.node.style.borderRightStyle=this.level.attr2attrVal.borderRightStyle.transitionCalcVal},LAY.Part.prototype.renderFn_borderBottomStyle=function(){this.node.style.borderBottomStyle=this.level.attr2attrVal.borderBottomStyle.transitionCalcVal},LAY.Part.prototype.renderFn_borderLeftStyle=function(){this.node.style.borderLeftStyle=this.level.attr2attrVal.borderLeftStyle.transitionCalcVal},LAY.Part.prototype.renderFn_borderTopColor=function(){this.node.style.borderTopColor=this.level.attr2attrVal.borderTopColor.transitionCalcVal.stringify()},LAY.Part.prototype.renderFn_borderRightColor=function(){this.node.style.borderRightColor=this.level.attr2attrVal.borderRightColor.transitionCalcVal.stringify()},LAY.Part.prototype.renderFn_borderBottomColor=function(){this.node.style.borderBottomColor=this.level.attr2attrVal.borderBottomColor.transitionCalcVal.stringify()},LAY.Part.prototype.renderFn_borderLeftColor=function(){this.node.style.borderLeftColor=this.level.attr2attrVal.borderLeftColor.transitionCalcVal.stringify()},LAY.Part.prototype.renderFn_borderTopWidth=function(){this.node.style.borderTopWidth=this.level.attr2attrVal.borderTopWidth.transitionCalcVal+"px"},LAY.Part.prototype.renderFn_borderRightWidth=function(){this.node.style.borderRightWidth=this.level.attr2attrVal.borderRightWidth.transitionCalcVal+"px"},LAY.Part.prototype.renderFn_borderBottomWidth=function(){this.node.style.borderBottomWidth=this.level.attr2attrVal.borderBottomWidth.transitionCalcVal+"px"},LAY.Part.prototype.renderFn_borderLeftWidth=function(){this.node.style.borderLeftWidth=this.level.attr2attrVal.borderLeftWidth.transitionCalcVal+"px"},LAY.Part.prototype.renderFn_text=function(){this.node.innerHTML=this.level.attr2attrVal.text.transitionCalcVal},LAY.Part.prototype.renderFn_textSize=function(){this.node.style.fontSize=s(this.level.attr2attrVal.textSize)},LAY.Part.prototype.renderFn_textFamily=function(){this.node.style.fontFamily=this.level.attr2attrVal.textFamily.transitionCalcVal},LAY.Part.prototype.renderFn_textWeight=function(){this.node.style.fontWeight=this.level.attr2attrVal.textWeight.transitionCalcVal},LAY.Part.prototype.renderFn_textColor=function(){this.node.style.color=u(this.level.attr2attrVal.textColor)},LAY.Part.prototype.renderFn_textVariant=function(){this.node.style.fontVariant=this.level.attr2attrVal.textVariant.transitionCalcVal},LAY.Part.prototype.renderFn_textTransform=function(){this.node.style.textTransform=this.level.attr2attrVal.textTransform.transitionCalcVal},LAY.Part.prototype.renderFn_textStyle=function(){this.node.style.fontStyle=this.level.attr2attrVal.textStyle.transitionCalcVal},LAY.Part.prototype.renderFn_textDecoration=function(){this.node.style.textDecoration=this.level.attr2attrVal.textDecoration.transitionCalcVal},LAY.Part.prototype.renderFn_textLetterSpacing=function(){this.node.style.letterSpacing=c(this.level.attr2attrVal.textLetterSpacing)},LAY.Part.prototype.renderFn_textWordSpacing=function(){this.node.style.wordSpacing=c(this.level.attr2attrVal.textWordSpacing)},LAY.Part.prototype.renderFn_textAlign=function(){this.node.style.textAlign=this.level.attr2attrVal.textAlign.transitionCalcVal},LAY.Part.prototype.renderFn_textDirection=function(){this.node.style.direction=this.level.attr2attrVal.textDirection.transitionCalcVal},LAY.Part.prototype.renderFn_textLineHeight=function(){this.node.style.lineHeight=h(this.level.attr2attrVal.textLineHeight)},LAY.Part.prototype.renderFn_textOverflow=function(){this.node.style.textOverflow=this.level.attr2attrVal.textOverflow.transitionCalcVal},LAY.Part.prototype.renderFn_textIndent=function(){this.node.style.textIndent=this.level.attr2attrVal.textIndent.transitionCalcVal+"px"},LAY.Part.prototype.renderFn_textWrap=function(){this.node.style.whiteSpace=this.level.attr2attrVal.textWrap.transitionCalcVal},LAY.Part.prototype.renderFn_textWordBreak=function(){this.node.style.wordBreak=this.level.attr2attrVal.textWordBreak.transitionCalcVal},LAY.Part.prototype.renderFn_textWordWrap=function(){this.node.style.wordWrap=this.level.attr2attrVal.textWordWrap.transitionCalcVal},LAY.Part.prototype.renderFn_textSmoothing=function(){this.node.style[d+"font-smoothing"]=this.level.attr2attrVal.textSmoothing.transitionCalcVal},LAY.Part.prototype.renderFn_textRendering=function(){this.node.style.textRendering=this.level.attr2attrVal.textRendering.transitionCalcVal},LAY.Part.prototype.renderFn_textPaddingTop=function(){this.node.style.paddingTop=this.level.attr2attrVal.textPaddingTop.transitionCalcVal+"px"},LAY.Part.prototype.renderFn_textPaddingRight=function(){this.node.style.paddingRight=this.level.attr2attrVal.textPaddingRight.transitionCalcVal+"px"},LAY.Part.prototype.renderFn_textPaddingBottom=function(){this.node.style.paddingBottom=this.level.attr2attrVal.textPaddingBottom.transitionCalcVal+"px"},LAY.Part.prototype.renderFn_textPaddingLeft=function(){this.node.style.paddingLeft=this.level.attr2attrVal.textPaddingLeft.transitionCalcVal+"px"},LAY.Part.prototype.renderFn_textShadows=function(){var t,e,r=this.level.attr2attrVal,i="";for(t=1,e=r["$$max.textShadows"].calcVal;e>=t;t++)i+=r["textShadows"+t+"Color"].transitionCalcVal.stringify()+" "+(r["textShadows"+t+"X"].transitionCalcVal+"px ")+(r["textShadows"+t+"Y"].transitionCalcVal+"px ")+(r["textShadows"+t+"Blur"].transitionCalcVal+"px"),t!==e&&(i+=",");this.node.style.textShadow=i},LAY.Part.prototype.renderFn_input=function(){var t=this.level.attr2attrVal.input.transitionCalcVal;"select"===this.inputType||"multiple"===this.inputType?this.node.innerHTML=e(t):this.node.value=t},LAY.Part.prototype.renderFn_inputLabel=function(){this.node.label=this.level.attr2attrVal.inputLabel.transitionCalcVal},LAY.Part.prototype.renderFn_inputRows=function(){this.node.rows=this.level.attr2attrVal.inputRows.transitionCalcVal},LAY.Part.prototype.renderFn_inputPlaceholder=function(){this.node.placeholder=this.level.attr2attrVal.inputPlaceholder.transitionCalcVal},LAY.Part.prototype.renderFn_inputAutocomplete=function(){this.node.autocomplete=this.level.attr2attrVal.inputAutocomplete.transitionCalcVal},LAY.Part.prototype.renderFn_inputAutocorrect=function(){this.node.autocorrect=this.level.attr2attrVal.inputAutocorrect.transitionCalcVal},LAY.Part.prototype.renderFn_inputDisabled=function(){this.node.disabled=this.level.attr2attrVal.inputDisabled.transitionCalcVal},LAY.Part.prototype.renderFn_linkHref=function(){this.node.href=this.level.attr2attrVal.linkHref.transitionCalcVal},LAY.Part.prototype.renderFn_linkRel=function(){this.node.rel=this.level.attr2attrVal.linkRel.transitionCalcVal},LAY.Part.prototype.renderFn_linkDownload=function(){this.node.download=this.level.attr2attrVal.linkDownload.transitionCalcVal},LAY.Part.prototype.renderFn_linkTarget=function(){this.node.target=this.level.attr2attrVal.linkTarget.transitionCalcVal},LAY.Part.prototype.renderFn_imageUrl=function(){this.node.src=this.level.attr2attrVal.imageUrl.transitionCalcVal},LAY.Part.prototype.renderFn_imageAlt=function(){this.node.alt=this.level.attr2attrVal.imageAlt.transitionCalcVal},LAY.Part.prototype.renderFn_audioSrc=function(){this.node.src=this.level.attr2attrVal.audioSrc.transitionCalcVal},LAY.Part.prototype.renderFn_audioSources=function(){var t,e,r,i=this.level.attr2attrVal,n=document.createDocumentFragment(),a=this.node.childNodes;for(t=0,e=a.length;e>=t;t++)r=a[t],"SOURCE"===r.tagName&&r.parentNode.removeChild(r);for(t=1,e=i["$$max.audioSources"].calcVal;e>=t;t++)r=document.createElement("source"),r.type=i["audioSources"+t+"Type"].transitionCalcVal,r.src=i["audioSources"+t+"Src"].transitionCalcVal,n.appendChild(r);this.node.appendChild(n)},LAY.Part.prototype.renderFn_audioTracks=function(){var t,e,r,i=this.level.attr2attrVal,n=document.createDocumentFragment(),a=this.node.childNodes;for(t=0,e=a.length;e>=t;t++)r=a[t],"TRACK"===r.tagName&&r.parentNode.removeChild(r);for(t=1,e=i["$$max.audioTracks"].calcVal;e>=t;t++)r=document.createElement("track"),r.type=i["audioTracks"+t+"Type"].transitionCalcVal,r.src=i["audioTracks"+t+"Src"].transitionCalcVal,n.appendChild(r);this.node.appendChild(n)},LAY.Part.prototype.renderFn_audioVolume=function(){this.node.volume=this.level.attr2attrVal.audioVolume.transitionCalcVal},LAY.Part.prototype.renderFn_audioController=function(){this.node.controls=this.level.attr2attrVal.audioController.transitionCalcVal},LAY.Part.prototype.renderFn_audioLoop=function(){this.node.loop=this.level.attr2attrVal.audioLoop.transitionCalcVal},LAY.Part.prototype.renderFn_audioMuted=function(){this.node.muted=this.level.attr2attrVal.audioMuted.transitionCalcVal},LAY.Part.prototype.renderFn_audioPreload=function(){this.node.preload=this.level.attr2attrVal.audioPreload.transitionCalcVal},LAY.Part.prototype.renderFn_videoSrc=function(){this.node.src=this.level.attr2attrVal.videoSrc.transitionCalcVal},LAY.Part.prototype.renderFn_videoSources=function(){var t,e,r,i=this.level.attr2attrVal,n=document.createDocumentFragment(),a=this.node.childNodes;for(t=0,e=a.length;e>=t;t++)r=a[t],"SOURCE"===r.tagName&&r.parentNode.removeChild(r);for(t=1,e=i["$$max.videoSources"].calcVal;e>=t;t++)r=document.createElement("source"),r.type=i["videoSources"+t+"Type"].transitionCalcVal,r.src=i["videoSources"+t+"Src"].transitionCalcVal,n.appendChild(r);this.node.appendChild(n)},LAY.Part.prototype.renderFn_videoTracks=function(){var t,e,r,i=this.level.attr2attrVal,n=document.createDocumentFragment(),a=this.node.childNodes;for(t=0,e=a.length;e>=t;t++)r=a[t],"TRACK"===r.tagName&&r.parentNode.removeChild(r);for(t=1,e=i["$$max.videoTracks"].calcVal;e>=t;t++)r=document.createElement("track"),r.type=i["videoTracks"+t+"Type"].transitionCalcVal,r.src=i["videoTracks"+t+"Src"].transitionCalcVal,n.appendChild(r);this.node.appendChild(n)},LAY.Part.prototype.renderFn_videoAutoplay=function(){this.node.autoplay=this.level.attr2attrVal.videoAutoplay.transitionCalcVal},LAY.Part.prototype.renderFn_videoController=function(){this.node.controls=this.level.attr2attrVal.videoController.transitionCalcVal},LAY.Part.prototype.renderFn_videoCrossorigin=function(){this.node.crossorigin=this.level.attr2attrVal.videoCrossorigin.transitionCalcVal},LAY.Part.prototype.renderFn_videoLoop=function(){this.node.loop=this.level.attr2attrVal.videoLoop.transitionCalcVal},LAY.Part.prototype.renderFn_videoMuted=function(){this.node.muted=this.level.attr2attrVal.videoMuted.transitionCalcVal},LAY.Part.prototype.renderFn_videoPreload=function(){this.node.preload=this.level.attr2attrVal.videoPreload.transitionCalcVal},LAY.Part.prototype.renderFn_videoPoster=function(){this.node.poster=this.level.attr2attrVal.videoPoster.transitionCalcVal}}(),function(){"use strict";LAY.Query=function(t){this.rowS=t},LAY.Query.prototype.filterEq=function(t,e){return new LAY.Query(LAY.$filterUtils.eq(this.rowS,t,e))},LAY.Query.prototype.filterNeq=function(t,e){return new LAY.Query(LAY.$filterUtils.neq(this.rowS,t,e))},LAY.Query.prototype.filterGt=function(t,e){return new LAY.Query(LAY.$filterUtils.gt(this.rowS,t,e))},LAY.Query.prototype.filterGte=function(t,e){return new LAY.Query(LAY.$filterUtils.gte(this.rowS,t,e))},LAY.Query.prototype.filterLt=function(t,e){return new LAY.Query(LAY.$filterUtils.lt(this.rowS,t,e))},LAY.Query.prototype.filterLte=function(t,e){return new LAY.Query(LAY.$filterUtils.lte(this.rowS,t,e))},LAY.Query.prototype.filterRegex=function(t,e){return new LAY.Query(LAY.$filterUtils.regex(this.rowS,t,e))},LAY.Query.prototype.filterContains=function(t,e){return new LAY.Query(LAY.$filterUtils.contains(this.rowS,t,e))},LAY.Query.prototype.filterWithin=function(t,e){return new LAY.Query(LAY.$filterUtils.within(this.rowS,t,e))},LAY.Query.prototype.filterFn=function(t){return new LAY.Query(LAY.$filterUtils.fn(this.rowS,t))},LAY.Query.prototype.foldMin=function(t){return LAY.$foldUtils.min(this.rowS,t,val)},LAY.Query.prototype.foldMax=function(t){return LAY.$foldUtils.max(this.rowS,t,val)},LAY.Query.prototype.foldSum=function(t){return LAY.$foldUtils.sum(this.rowS,t,val)},LAY.Query.prototype.foldFn=function(t,e){return LAY.$foldUtils.fn(this.rowS,t,e)},LAY.Query.prototype.index=function(t){return this.rowS[t]},LAY.Query.prototype.length=function(){return this.rowS.length},LAY.Query.prototype.finish=function(){return this.rowS}}(),function(){"use strict";LAY.RelPath=function(t){if(this.isMe=!1,this.isMany=!1,this.path="",this.isAbsolute=!1,this.traverseArray=[],""===t)this.isMe=!0;else{if("/"===t.charAt(0))this.isAbsolute=!0,this.path=t;else{for(var e=0;"."===t.charAt(e);)if("../"===t.slice(e,e+3))this.traverseArray.push(0),e+=3;else{if(".../"!==t.slice(e,e+4))throw"LAY Error: Error in Take path: "+t;this.traverseArray.push(1),e+=4}this.path=t.slice(e)}0!==this.path.length&&this.path.indexOf("*")===this.path.length-1&&(this.isMany=!0,1===this.path.length?this.path="":this.path=this.path.slice(0,this.path.length-2))}},LAY.RelPath.prototype.resolve=function(t){if(this.isMe)return t;var e;if(this.isAbsolute)e=LAY.$pathName2level[this.path];else{e=t;for(var r=this.traverseArray,i=0,n=r.length;n>i;i++)if(0===r[i])e=e.parentLevel;else do e=e.parentLevel;while(!e.derivedMany);e=""===this.path?e:LAY.$pathName2level[e.pathName+("/"===e.pathName?"":"/")+this.path]}return this.isMany?e.derivedMany.level:e}}(),function(){"use strict";LAY.Take=function(t,e){var r;if(void 0!==e){var i=new LAY.RelPath(t);r=[[i,e]],this.executable=function(){return i.resolve(this).$getAttrVal(e).calcVal}}else{r=[];var n=t;n instanceof LAY.Take?(this.executable=n.executable,r=n._relPath00attr_S):this.executable=function(){return n}}this._relPath00attr_S=r},LAY.Take.prototype.execute=function(t){return this.executable.call(t)},LAY.Take.prototype.$mergePathAndAttrs=function(t){for(var e=t._relPath00attr_S,r=0,i=e.length;i>r;r++)this._relPath00attr_S.push(e[r])},LAY.Take.prototype.add=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)+t.execute(this)}):this.executable=function(){return e.call(this)+t},this},LAY.Take.prototype.plus=LAY.Take.prototype.add,LAY.Take.prototype.subtract=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)-t.execute(this)}):this.executable=function(){
return e.call(this)-t},this},LAY.Take.prototype.minus=LAY.Take.prototype.subtract,LAY.Take.prototype.divide=function(t){var e=this.executable;if(t instanceof LAY.Take)this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)/t.execute(this)};else{if(2===t)return this.half();this.executable=function(){return e.call(this)/t}}return this},LAY.Take.prototype.multiply=function(t){var e=this.executable;if(t instanceof LAY.Take)this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)*t.execute(this)};else{if(2===t)return this["double"]();this.executable=function(){return e.call(this)*t}}return this},LAY.Take.prototype.remainder=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)%t.execute(this)}):this.executable=function(){return e.call(this)%t},this},LAY.Take.prototype.half=function(){var t=this.executable;return this.executable=function(){return t.call(this)/2},this},LAY.Take.prototype["double"]=function(){var t=this.executable;return this.executable=function(){return 2*t.call(this)},this},LAY.Take.prototype.contains=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return-1!==e.call(this).indexOf(t.execute(this))}):this.executable=function(){return-1!==e.call(this).indexOf(t)},this},LAY.Take.prototype.identical=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return LAY.identical(e.call(this),t.execute(this))}):this.executable=function(){return LAY.identical(e.call(this),t)},this},LAY.Take.prototype.eq=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)===t.execute(this)}):this.executable=function(){return e.call(this)===t},this},LAY.Take.prototype.neq=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)!==t.execute(this)}):this.executable=function(){return e.call(this)!==t},this},LAY.Take.prototype.gt=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)>t.execute(this)}):this.executable=function(){return e.call(this)>t},this},LAY.Take.prototype.gte=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)>=t.execute(this)}):this.executable=function(){return e.call(this)>=t},this},LAY.Take.prototype.lt=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)<t.execute(this)}):this.executable=function(){return e.call(this)<t},this},LAY.Take.prototype.lte=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)<=t.execute(this)}):this.executable=function(){return e.call(this)<=t},this},LAY.Take.prototype.or=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)||t.execute(this)}):this.executable=function(){return e.call(this)||t},this},LAY.Take.prototype.and=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)&&t.execute(this)}):this.executable=function(){return e.call(this)&&t},this},LAY.Take.prototype.not=function(){var t=this.executable;return this.executable=function(){return!t.call(this)},this},LAY.Take.prototype.negative=function(){var t=this.executable;return this.executable=function(){return-t.call(this)},this},LAY.Take.prototype.number=function(){var t=this.executable;return this.executable=function(){return parseInt(t.call(this))},this},LAY.Take.prototype.key=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this)[t.execute(this)]}):this.executable=function(){return e.call(this)[t]},this},LAY.Take.prototype.index=LAY.Take.prototype.key,LAY.Take.prototype.length=function(t){var e=this.executable;return this.executable=function(){return e.call(this).length},this},LAY.Take.prototype.slice=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return r.call(this).slice(t.execute(this),e.execute(this))}):this.executable=function(){return r.call(this).slice(t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return r.call(this).slice(t,e.execute(this))}):this.executable=function(){return r.call(this).slice(t,e)},this},LAY.Take.prototype.min=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return Math.min(e.call(this),t.execute(this))}):this.executable=function(){return Math.min(e.call(this),t)},this},LAY.Take.prototype.max=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return Math.max(e.call(this),t.execute(this))}):this.executable=function(){return Math.max(e.call(this),t)},this},LAY.Take.prototype.ceil=function(){var t=this.executable;return this.executable=function(){return Math.ceil(t.call(this))},this},LAY.Take.prototype.floor=function(){var t=this.executable;return this.executable=function(){return Math.floor(t.call(this))},this},LAY.Take.prototype.round=function(){var t=this.executable;return this.executable=function(){return Math.round(t.call(this))},this},LAY.Take.prototype.sin=function(){var t=this.executable;return this.executable=function(){return Math.sin(t.call(this))},this},LAY.Take.prototype.cos=function(){var t=this.executable;return this.executable=function(){return Math.cos(t.call(this))},this},LAY.Take.prototype.tan=function(){var t=this.executable;return this.executable=function(){return Math.tan(t.call(this))},this},LAY.Take.prototype.abs=function(){var t=this.executable;return this.executable=function(){return Math.abs(t.call(this))},this},LAY.Take.prototype.pow=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return Math.pow(e.call(this),t.execute(this))}):this.executable=function(){return Math.pow(e.call(this),t)},this},LAY.Take.prototype.log=function(){var t=this.executable;return this.executable=function(){return Math.log(t.call(this))},this},LAY.Take.prototype.match=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).match(t.execute(this))}):this.executable=function(){return e.call(this).match(t)},this},LAY.Take.prototype.test=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).test(t.execute(this))}):this.executable=function(){return e.call(this).test(t)},this},LAY.Take.prototype.concat=LAY.Take.prototype.add,LAY.Take.prototype.lowercase=function(){var t=this.executable;return this.executable=function(){return t.call(this).toLowerCase()},this},LAY.Take.prototype.uppercase=function(){var t=this.executable;return this.executable=function(){return t.call(this).toUpperCase()},this},LAY.Take.prototype.capitalize=function(){var t=this.executable;return this.executable=function(){var e=t.call(this);return e.charAt(0).toUpperCase()+e.slice(1)},this},LAY.Take.prototype.format=function(){var t=Array.prototype.slice.call(arguments),e=new LAY.Take(LAY.$format);return t.unshift(this),e.fn.apply(e,t)},LAY.Take.prototype.i18nFormat=function(){function t(){var t=Array.prototype.slice.call(arguments);if(t[0]=t[0][LAY.level("/").attr("data.lang")],void 0===t[0])throw"LAY Error: No language defined for i18nFormat";return LAY.$format.apply(void 0,t)}this._relPath00attr_S.push([new LAY.RelPath("/"),"data.lang"]);var e=Array.prototype.slice.call(arguments),r=new LAY.Take(t);return e.unshift(this),r.fn.apply(r,e)},LAY.Take.prototype.colorEquals=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).equals(t.execute(this))}):this.executable=function(){return e.call(this).equals(t)},this},LAY.Take.prototype.colorLighten=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().lighten(t.execute(this))}):this.executable=function(){return e.call(this).copy().lighten(t)},this},LAY.Take.prototype.colorDarken=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().darken(t.execute(this))}):this.executable=function(){return e.call(this).copy().darken(t)},this},LAY.Take.prototype.colorStringify=function(){var t=this.executable;return this.executable=function(){return t.call(this).copy().stringify()},this},LAY.Take.prototype.colorInvert=function(){var t=this.executable;return this.executable=function(){return t.call(this).copy().invert()},this},LAY.Take.prototype.colorSaturate=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().saturate(t.execute(this))}):this.executable=function(){return e.call(this).copy().saturate(t)},this},LAY.Take.prototype.colorDesaturate=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().desaturate(t.execute(this))}):this.executable=function(){return e.call(this).copy().desaturate(t)},this},LAY.Take.prototype.colorAlpha=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().alpha(t.execute(this))}):this.executable=function(){return e.call(this).copy().alpha(t)},this},LAY.Take.prototype.colorRed=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().red(t.execute(this))}):this.executable=function(){return e.call(this).copy().red(t)},this},LAY.Take.prototype.colorGreen=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().green(t.execute(this))}):this.executable=function(){return e.call(this).copy().green(t)},this},LAY.Take.prototype.colorBlue=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().blue(t.execute(this))}):this.executable=function(){return e.call(this).copy().blue(t)},this},LAY.Take.prototype.colorHue=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().hue(t.execute(this))}):this.executable=function(){return e.call(this).copy().hue(t)},this},LAY.Take.prototype.colorSaturation=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().saturation(t.execute(this))}):this.executable=function(){return e.call(this).copy().saturation(t)},this},LAY.Take.prototype.colorLightness=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return e.call(this).copy().lightness(t.execute(this))}):this.executable=function(){return e.call(this).copy().lightness(t)},this},LAY.Take.prototype.filterEq=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.eq(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.eq(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.eq(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.eq(r.call(this),t,e)},this},LAY.Take.prototype.filterNeq=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.neq(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.neq(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.neq(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.neq(r.call(this),t,e)},this},LAY.Take.prototype.filterGt=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.gt(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.gt(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.gt(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.gt(r.call(this),t,e)},this},LAY.Take.prototype.filterGte=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.gte(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.gte(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.gte(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.gte(r.call(this),t,e)},this},LAY.Take.prototype.filterLt=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.lt(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.lt(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.lt(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.lt(r.call(this),t,e)},this},LAY.Take.prototype.filterLte=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.lte(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.lte(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.lte(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.lte(r.call(this),t,e)},this},LAY.Take.prototype.filterRegex=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.regex(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.regex(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.regex(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.regex(r.call(this),t,e)},this},LAY.Take.prototype.filterContains=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.contains(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.contains(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.contains(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.contains(r.call(this),t,e)},this},LAY.Take.prototype.filterWithin=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.within(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.within(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.within(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.within(r.call(this),t,e)},this},LAY.Take.prototype.filterFn=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.fn(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$filterUtils.fn(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$filterUtils.fn(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$filterUtils.fn(r.call(this),t,e)},this},LAY.Take.prototype.foldMin=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return LAY.$foldUtils.min(e.call(this),t.execute(this))}):this.executable=function(){return LAY.$foldUtils.min(e.call(this),t)},this},LAY.Take.prototype.foldMax=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return LAY.$foldUtils.max(e.call(this),t.execute(this))}):this.executable=function(){return LAY.$foldUtils.max(e.call(this),t)},this},LAY.Take.prototype.foldSum=function(t){var e=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),this.executable=function(){return LAY.$foldUtils.sum(e.call(this),t.execute(this))}):this.executable=function(){return LAY.$foldUtils.sum(e.call(this),t)},this},LAY.Take.prototype.foldFn=function(t,e){var r=this.executable;return t instanceof LAY.Take?(this.$mergePathAndAttrs(t),e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$foldUtils.fn(r.call(this),t.execute(this),e.execute(this))}):this.executable=function(){return LAY.$foldUtils.fn(r.call(this),t.execute(this),e)}):e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return LAY.$foldUtils.fn(r.call(this),t,e.execute(this))}):this.executable=function(){return LAY.$foldUtils.fn(r.call(this),t,ac)},this},LAY.Take.prototype.fn=function(){var t=this.executable;if(0===arguments.length)this.executable=function(){return t.call(this).call(this)};else if(1===arguments.length){var e=arguments[0];e instanceof LAY.Take?(this.$mergePathAndAttrs(e),this.executable=function(){return t.call(this).call(this,e.execute(this))}):this.executable=function(){return t.call(this).call(this,e)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];r instanceof LAY.Take?(this.$mergePathAndAttrs(r),i instanceof LAY.Take?(this.$mergePathAndAttrs(i),this.executable=function(){return t.call(this).call(this,r.execute(this),i.execute(this))}):this.executable=function(){return t.call(this).call(this,r.execute(this),i)}):i instanceof LAY.Take?(this.$mergePathAndAttrs(i),this.executable=function(){return t.call(this).call(this,r,i.execute(this))}):this.executable=function(){return t.call(this).call(this,r,i)}}else{for(var n,a=arguments.length,o=Array.prototype.slice.call(arguments),l=0;a>l;l++)n=arguments[l],n instanceof LAY.Take&&this.$mergePathAndAttrs(n);this.executable=function(){for(var e,r=new Array(a),i=0;a>i;i++)e=o[i],r[i]=e instanceof LAY.Take?e.execute(this):e;return t.call(this).apply(this,r)}}return this}}(),function(){"use strict";function t(t,e){this.curTime=0,this.duration=t}function e(t,e){this.curTime=0,this.duration=t,this.cx=3*e.a,this.bx=3*(e.c-e.a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e.b,this.by=3*(e.d-e.b)-this.cy,this.ay=1-this.cy-this.by}var r,i=1e-6;LAY.Transition=function(t,e,i,n,a){this.done=a,this.delay=e,this.transition=r[t](i,n)},LAY.Transition.prototype.generateNext=function(t){return this.transition.generateNext(t)},LAY.Transition.prototype.checkIsComplete=function(){return this.transition.checkIsComplete()},t.prototype.generateNext=function(t){return(this.curTime+=t)/this.duration},t.prototype.checkIsComplete=function(){return this.curTime>=this.duration},e.prototype.generateNext=function(t){return this.sampleCurveY(this.solveCurveX((this.curTime+=t)/this.duration))},e.prototype.checkIsComplete=function(){return this.curTime>=this.duration},e.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},e.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},e.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},e.prototype.solveCurveX=function(t){var e,r,n,a,o,l;for(n=t,l=0;8>l;l++){if(a=this.sampleCurveX(n)-t,Math.abs(a)<i)return n;if(o=this.sampleCurveDerivativeX(n),Math.abs(o)<1e-6)break;n-=a/o}if(e=0,r=1,n=t,e>n)return e;if(n>r)return r;for(;r>e;){if(a=this.sampleCurveX(n),Math.abs(a-t)<i)return n;t>a?e=n:r=n,n=.5*(r-e)+e}return n},r={linear:function(e,r){return new t(e,r)},spring:function(t,e){return new LAY.$springTransition(t,e)},"cubic-bezier":function(t,r){return new e(t,r)},ease:function(t,r){return new e(t,{a:.25,b:.1,c:.25,d:1})},"ease-in":function(t,r){return new e(t,{a:.42,b:0,c:1,d:1})},"ease-out":function(t,r){return new e(t,{a:0,b:0,c:.58,d:1})},"ease-in-out":function(t,r){return new e(t,{a:.42,b:0,c:.58,d:1})}}}(),function(){"use strict";LAY.clog=function(){LAY.$numClog++}}(),function(){"use strict";function t(t){return LAY.color(t)}var e=/(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,?\s*((\d+\.\d+)|(\d+))?/;LAY.color=function(i){if(i instanceof LAY.Take)return new LAY.Take(t).fn(i);i=i.toLowerCase();var n=r[i];if(void 0!==n)return new LAY.Color("rgb",n,1);if(i.match(/(rgb)|(hsl)/)){var a=i.match(e);if(a){var o=parseInt(a[1]),l=parseInt(a[2]),s=parseInt(a[3]),c=void 0===a[4]?1:parseFloat(a[4]);return-1!==i.indexOf("rgb")?LAY.rgba(o,l,s,c):LAY.hsla(o,l,s,c)}}throw"LAY Error: Color name: "+i+" not found."};var r={aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},aqua:{r:0,g:255,b:255},aquamarine:{r:127,g:255,b:212},azure:{r:240,g:255,b:255},beige:{r:245,g:245,b:220},bisque:{r:255,g:228,b:196},black:{r:0,g:0,b:0},blanchedalmond:{r:255,g:235,b:205},blue:{r:0,g:0,b:255},blueviolet:{r:138,g:43,b:226},brown:{r:165,g:42,b:42},burlywood:{r:222,g:184,b:135},cadetblue:{r:95,g:158,b:160},chartreuse:{r:127,g:255,b:0},chocolate:{r:210,g:105,b:30},coral:{r:255,g:127,b:80},cornflowerblue:{r:100,g:149,b:237},cornsilk:{r:255,g:248,b:220},crimson:{r:220,g:20,b:60},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgoldenrod:{r:184,g:134,b:11},darkgray:{r:169,g:169,b:169},darkgreen:{r:0,g:100,b:0},darkgrey:{r:169,g:169,b:169},darkkhaki:{r:189,g:183,b:107},darkmagenta:{r:139,g:0,b:139},darkolivegreen:{r:85,g:107,b:47},darkorange:{r:255,g:140,b:0},darkorchid:{r:153,g:50,b:204},darkred:{r:139,g:0,b:0},darksalmon:{r:233,g:150,b:122},darkseagreen:{r:143,g:188,b:143},darkslateblue:{r:72,g:61,b:139},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},darkturquoise:{r:0,g:206,b:209},darkviolet:{r:148,g:0,b:211},deeppink:{r:255,g:20,b:147},deepskyblue:{r:0,g:191,b:255},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},dodgerblue:{r:30,g:144,b:255},firebrick:{r:178,g:34,b:34},floralwhite:{r:255,g:250,b:240},forestgreen:{r:34,g:139,b:34},fuchsia:{r:255,g:0,b:255},gainsboro:{r:220,g:220,b:220},ghostwhite:{r:248,g:248,b:255},gold:{r:255,g:215,b:0},goldenrod:{r:218,g:165,b:32},gray:{r:128,g:128,b:128},green:{r:0,g:128,b:0},greenyellow:{r:173,g:255,b:47},grey:{r:128,g:128,b:128},honeydew:{r:240,g:255,b:240},hotpink:{r:255,g:105,b:180},indianred:{r:205,g:92,b:92},indigo:{r:75,g:0,b:130},ivory:{r:255,g:255,b:240},khaki:{r:240,g:230,b:140},lavender:{r:230,g:230,b:250},lavenderblush:{r:255,g:240,b:245},lawngreen:{r:124,g:252,b:0},lemonchiffon:{r:255,g:250,b:205},lightblue:{r:173,g:216,b:230},lightcoral:{r:240,g:128,b:128},lightcyan:{r:224,g:255,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},lightgray:{r:211,g:211,b:211},lightgreen:{r:144,g:238,b:144},lightgrey:{r:211,g:211,b:211},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightseagreen:{r:32,g:178,b:170},lightskyblue:{r:135,g:206,b:250},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},lightsteelblue:{r:176,g:196,b:222},lightyellow:{r:255,g:255,b:224},lime:{r:0,g:255,b:0},limegreen:{r:50,g:205,b:50},linen:{r:250,g:240,b:230},magenta:{r:255,g:0,b:255},maroon:{r:128,g:0,b:0},mediumaquamarine:{r:102,g:205,b:170},mediumblue:{r:0,g:0,b:205},mediumorchid:{r:186,g:85,b:211},mediumpurple:{r:147,g:112,b:219},mediumseagreen:{r:60,g:179,b:113},mediumslateblue:{r:123,g:104,b:238},mediumspringgreen:{r:0,g:250,b:154},mediumturquoise:{r:72,g:209,b:204},mediumvioletred:{r:199,g:21,b:133},midnightblue:{r:25,g:25,b:112},mintcream:{r:245,g:255,b:250},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},navy:{r:0,g:0,b:128},oldlace:{r:253,g:245,b:230},olive:{r:128,g:128,b:0},olivedrab:{r:107,g:142,b:35},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},orchid:{r:218,g:112,b:214},palegoldenrod:{r:238,g:232,b:170},palegreen:{r:152,g:251,b:152},paleturquoise:{r:175,g:238,b:238},palevioletred:{r:219,g:112,b:147},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},peru:{r:205,g:133,b:63},pink:{r:255,g:192,b:203},plum:{r:221,g:160,b:221},powderblue:{r:176,g:224,b:230},purple:{r:128,g:0,b:128},red:{r:255,g:0,b:0},rosybrown:{r:188,g:143,b:143},royalblue:{r:65,g:105,b:225},saddlebrown:{r:139,g:69,b:19},salmon:{r:250,g:128,b:114},sandybrown:{r:244,g:164,b:96},seagreen:{r:46,g:139,b:87},seashell:{r:255,g:245,b:238},sienna:{r:160,g:82,b:45},silver:{r:192,g:192,b:192},skyblue:{r:135,g:206,b:235},slateblue:{r:106,g:90,b:205},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},snow:{r:255,g:250,b:250},springgreen:{r:0,g:255,b:127},steelblue:{r:70,g:130,b:180},tan:{r:210,g:180,b:140},teal:{r:0,g:128,b:128},thistle:{r:216,g:191,b:216},tomato:{r:255,g:99,b:71},turquoise:{r:64,g:224,b:208},violet:{r:238,g:130,b:238},wheat:{r:245,g:222,b:179},white:{r:255,g:255,b:255},whitesmoke:{r:245,g:245,b:245},yellow:{r:255,g:255,b:0},yellowgreen:{r:154,g:205,b:50}}}(),function(){"use strict";LAY.formation=function(t,e,r){LAY.$formation2fargs[t]=e,LAY.$formation2fn[t]=r}}(),function(){"use strict";function t(t){return LAY.hex(t)}function e(t){return{r:t>>16&255,g:t>>8&255,b:255&t}}LAY.hex=function(r){return r instanceof LAY.Take?new LAY.Take(t).fn(r):new LAY.Color("rgb",e(r),1)}}(),function(){"use strict";LAY.hsl=function(t,e,r){return LAY.hsla(t,e,r,1)}}(),function(){"use strict";function t(t,e,r,i){new LAY.Color("hsl",{h:t,s:e,l:r},i)}LAY.hsla=function(e,r,i,n){return e instanceof LAY.Take||r instanceof LAY.Take||i instanceof LAY.Take||n instanceof LAY.Take?new LAY.Take(t).fn(e,r,i,n):new LAY.Color("hsl",{h:e,s:r,l:i},n)}}(),function(){"use strict";function t(t){return LAY.$type(t)}function e(e,s,c){var h=t(e),d=t(s);return r(e,s)?!0:"color"===h?n(e,s):"level"===h?a(e,s):"take"===h||"take"===d?!1:"date"===h?i(e,s):"regexp"===h?o(e,s):"arguments"===h?l(e,s,c):"object"!==h&&"object"!==d&&"array"!==h&&"array"!==d?r(e,s):u(e,s,c)}function r(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function i(e,i){return"date"!==t(i)?!1:r(e.getTime(),i.getTime())}function n(e,r){return"color"===t(r)&&e.equals(r)}function a(e,r){return"level"===t(r)&&e.pathName===r.pathName}function o(e,i){return"regexp"!==t(i)?!1:r(e.toString(),i.toString())}function l(r,i,n){return"arguments"!==t(i)?!1:(r=[].slice.call(r),i=[].slice.call(i),e(r,i,n))}function s(t){var e=[];for(var r in t)e.push(r);return e}function c(t,e){if(t.length!==e.length)return!1;for(var r=0,i=!0;r<t.length;r++)if(t[r]!==e[r]){i=!1;break}return i}function h(t){return null!==t&&void 0!==t}function u(t,r,i){if(!h(t)||!h(r))return!1;if(t.prototype!==r.prototype)return!1;var n;if(i){for(n=0;n<i.length;n++)if(i[n][0]===t&&i[n][1]===r||i[n][0]===r&&i[n][1]===t)return!0}else i=[];try{var a=s(t),o=s(r)}catch(l){return!1}if(a.sort(),o.sort(),!c(a,o))return!1;i.push([t,r]);var u;for(n=a.length-1;n>=0;n--)if(u=a[n],!e(t[u],r[u],i))return!1;return!0}/*!
* source: chai.js (https://github.com/chaijs/deep-eql)
* deep-eql
* Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
* MIT Licensed
*/
LAY.identical=function(t,r){return e(t,r,void 0)}}(),function(){"use strict";LAY.level=function(t){return LAY.$pathName2level[t]}}(),function(){"use strict";LAY.rgb=function(t,e,r){return LAY.rgba(t,e,r,1)}}(),function(){"use strict";function t(t,e,r,i){return new LAY.Color("rgb",{r:t,g:e,b:r},i)}LAY.rgba=function(e,r,i,n){return e instanceof LAY.Take||r instanceof LAY.Take||i instanceof LAY.Take||n instanceof LAY.Take?new LAY.Take(t).fn(e,r,i,n):new LAY.Color("rgb",{r:e,g:r,b:i},n)}}(),function(){"use strict";function t(){var t=LAY.take("","width").half(),e=LAY.take("","height").half();LAY.$miscPosAttr2take={centerX:LAY.take("","left").add(t),centerY:LAY.take("","top").add(e),$midpointX:t,$midpointY:e,$absoluteLeft:LAY.take("../","$absoluteLeft").add(LAY.take("","left")),$absoluteTop:LAY.take("../","$absoluteTop").add(LAY.take("","top"))},LAY.$essentialPosAttr2take={right:LAY.take("","left").add(LAY.take("","width")),bottom:LAY.take("","top").add(LAY.take("","height"))},LAY.$emptyAttrVal=new LAY.AttrVal("",void 0),LAY.$formationDisplayNoneState={onlyif:LAY.take("","$f").eq(-1),props:{display:!1}}}function e(){var t=LAY.$pathName2level["/"];t.$changeAttrVal("$windowWidth",window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth),t.$changeAttrVal("$windowHeight",window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)}LAY.run=function(r){t(),new LAY.Level("/",r,void 0).$init(),LAY.$solve(),window.onresize=e}}(),function(){"use strict";LAY.take=function(t,e){if(void 0!==e&&LAY.$checkIsValidUtils.checkIsAttrExpandable(e))throw"LAY Error: takes using expander props such as '"+t+"' are not permitted.";return new LAY.Take(t,e)}}(),function(){"use strict";LAY.transparent=function(){return new LAY.Color("rgb",{r:0,g:0,b:0},0)}}(),function(){"use strict";LAY.unclog=function(){0===--LAY.$numClog&&LAY.$solve()}}(),function(){"use strict";LAY.$arrayUtils={pushUnique:function(t,e){return-1===t.indexOf(e)?(t.push(e),!0):!1},prependUnique:function(t,e){LAY.$arrayUtils.remove(t,e),t.unshift(e)},remove:function(t,e){var r=t.indexOf(e);return-1!==r?(t.splice(r,1),!0):!1},removeAtIndex:function(t,e){t.splice(e,1)},cloneSingleLevel:function(t){return t.slice(0)},swap:function(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}}}(),function(){"use strict";LAY.$capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}(),function(){"use strict";var t=["$hovering","$clicking"];LAY.$checkIfDoingReadonly=function(e){return-1!==t.indexOf(e)}}(),function(){"use strict";var t=["$naturalWidth","$naturalHeight","$scrolledX","$scrolledY","$focused","$input"];LAY.$checkIfImmidiateReadonly=function(e){return-1!==t.indexOf(e)}}(),function(){"use strict";function t(t){var e=["data","when","transition"],r=t.indexOf(".");if(-1===r)return t;var i=t.slice(0,r);return-1!==e.indexOf(i)?t:t.slice(r+1)}function e(t){return-1===t.indexOf(".")&&-1===t.indexOf("/")&&-1===t.indexOf(":")&&-1===t.indexOf("*")}var r=["root","transition","data","when","onlyif","states","exist","","many","formation","formationDisplayNone","sort","fargs","rows","row","filter","args","all"];LAY.$checkIsValidUtils={levelName:function(t){return e(t)&&-1===r.indexOf(t)},stateName:function(t){return e(t)&&(-1===r.indexOf(t)||"root"===t)},checkIsAttrExpandable:function(t){return this.checkIsNonPropAttrExpandable(t)||this.checkIsPropAttrExpandable(t)},checkIsNonPropAttrExpandable:function(e){var r=["data","when","transition","states","fargs","sort"],i=/(^sort\.\d+$)|(^fargs\.[a-zA-Z]+$)|(^transition\.[a-zA-Z]+$)|(^transition\.[a-zA-Z]+\.args$)|(^when\.[a-zA-Z]+$)/,n=t(e);return-1!==r.indexOf(n)||i.test(n)},checkIsPropAttrExpandable:function(e){var r=["border","background","boxShadows","textShadows","videoSources","audioSources","videoTracks","audioTracks","filters","borderTop","borderRight","borderBottom","borderLeft"],i=/(^boxShadows\d+$)|(^textShadows\d+$)|(^videoSources\d+$)|(^audioSources\d+$)|(^videoTracks\d+$)|(^audioTracks\d+$)|(^filters\d+$)|(^filters\d+DropShadow$)/,n=t(e);return-1!==r.indexOf(n)||i.test(n)},propAttr:function(t){return-1===t.indexOf(".")&&"$"!==t.charAt(0)&&-1===r.indexOf(t)},nan:function(t){return"number"==typeof val&&val!==+val}}}(),function(){"use strict";LAY.$clearDataTravellingAttrVals=function(){var t,e,r,i,n,a,o=LAY.$renderDirtyPartS;for(t=0;t<o.length;t++)for(i=o[t],n=i.travelRenderDirtyAttrValS,e=0,r=n.length;r>e;e++)a=n[0],a.renderCall?(a.startCalcVal=a.transitionCalcVal,i.addNormalRenderDirtyAttrVal(a)):LAY.$arrayUtils.remove(n,a)}}(),function(){"use strict";function t(t){return Object.prototype.toString.call(t)}var e={isArray:function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===t(e)},isDate:function(e){return"object"==typeof e&&"[object Date]"===t(e)},isRegExp:function(e){return"object"==typeof e&&"[object RegExp]"===t(e)},getRegExpFlags:function(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}};LAY.$clone=function(t){function r(t,o){if(null===t)return null;if(0===o)return t;var l,s;if("object"!=typeof t||t instanceof LAY.Level||t instanceof LAY.Take)return t;if(t instanceof LAY.Color)return t.copy();if(e.isArray(t)?l=[]:e.isRegExp(t)?(l=new RegExp(t.source,e.getRegExpFlags(t)),t.lastIndex&&(l.lastIndex=t.lastIndex)):e.isDate(t)?l=new Date(t.getTime()):(s=Object.getPrototypeOf(t),l=Object.create(s)),a){var c=i.indexOf(t);if(-1!=c)return n[c];i.push(t),n.push(l)}for(var h in t){var u;s&&(u=Object.getOwnPropertyDescriptor(s,h)),u&&null===u.set||(l[h]=r(t[h],o-1))}return l}if("object"!=typeof t||t instanceof LAY.Level||t instanceof LAY.Take)return t;var i=[],n=[],a=!0,o=1/0;return r(t,o)}}(),function(){"use strict";var t;LAY.$defaultizeManyLson=function(e){var r,i=e.states.root;e.rows=e.rows||[];for(r in t)void 0===i[r]&&(i[r]=t[r])},t={filter:new LAY.Take("","rows"),sort:[{key:"id",ascending:!0}],formation:"onebelow",fargs:{}}}(),function(){"use strict";var t,e;LAY.$defaultizePartLson=function(r,i){var n,a,o,l,s,c,h,u,d,f,p,v,A,g=r.states.root,L=g.props,y=g.when,Y=g.transition,b=r.states,x=void 0===i,m=i?t:e;for(n in m)void 0===L[n]&&(L[n]=m[n]);if(b){for(o in b){l=b[o],a=l.props,c=l.when,h=l.transition,u=l.$$max;for(s in a)void 0===L[s]&&(v=LAY.$getLazyPropVal(s,x),void 0!==v&&(L[s]=v))}for(d in u)r.$$max=r.$$max||{},r.$$max[d]||(r.$$max[u]=u[d]);for(f in c)y[f]||(y[f]=[]);for(p in Y)Y[p]||(Y[p]={})}if(!x){A=i.lson.states.root.props;for(s in A)void 0===L[s]&&-1!==LAY.$inheritablePropS.indexOf(s)&&(L[s]=LAY.$getLazyPropVal(s))}void 0===L.text||void 0!==r.$type&&"none"!==r.$type?void 0===r.$type&&(r.$type="none"):r.$type="text"},e={top:0,left:0,width:LAY.take("","$windowWidth"),height:LAY.take("","$windowHeight")},t={top:0,left:0,width:LAY.take("","$naturalWidth"),height:LAY.take("","$naturalHeight")}}(),function(){"use strict";var t={$hovering:{mouseover:function(){this.$changeAttrVal("$hovering",!0)},mouseout:function(){this.$changeAttrVal("$hovering",!1)}},$clicking:{mousedown:function(){this.$changeAttrVal("$clicking",!0)},touchdown:function(){this.$changeAttrVal("$clicking",!0)},mouseup:function(){this.$changeAttrVal("$clicking",!1)},mouseleave:function(){this.$changeAttrVal("$clicking",!1)},touchup:function(){this.$changeAttrVal("$clicking",!1)}},$focused:{focus:function(){this.$requestRecalculation("$focused")},blur:function(){this.$requestRecalculation("$focused")}},$scrolledX:{scroll:function(){this.$requestRecalculation("$scrolledX")}},$scrolledY:{scroll:function(){this.$requestRecalculation("$scrolledY")}},$cursorX:{mousemove:function(t){this.$changeAttrVal("$cursorX",t.clientX)}},$cursorY:{mousemove:function(t){this.$changeAttrVal("$cursorY",t.clientY)}},$input:{click:function(){("multiline"===this.part.inputType||"line"===this.part.inputType)&&this.$requestRecalculation("$input")},change:function(){this.$requestRecalculation("$input")},keyup:function(){("multiline"===this.part.inputType||"line"===this.part.inputType)&&this.$requestRecalculation("$input")}}};LAY.$eventReadonlyUtils={checkIsEventReadonlyAttr:function(e){return void 0!==t[e]},getEventType2fnHandler:function(e){return t[e]}}}(),function(){"use strict";function t(t){var r=!0;t=t||e(((this.ownerDocument||this.document||this).parentWindow||window).event);for(var i=this.events[t.type],n=0,a=i.length;a>n;n++)this.$$handleEvent=i[n],this.$$handleEvent(t)===!1&&(r=!1);return r}function e(t){return t.preventDefault=r,t.stopPropagation=i,t}function r(){this.returnValue=!1}function i(){this.cancelBubble=!0}LAY.$eventUtils={add:function(e,r,i){if(e.addEventListener)e.addEventListener(r,i,!1);else{e.events||(e.events={});var n=e.events[r];n||(n=e.events[r]=[],e["on"+r]&&n.push(e["on"+r])),n.push(i),e["on"+r]=t}},remove:function(t,e,r){if(t.removeEventListener)t.removeEventListener(e,r,!1);else if(t.events&&t.events[e]){var i=t.events[e];LAY.$arrayUtils.remove(i,r)}}}}(),function(){"use strict";function t(t,e){for(var r,i=[],n=0,a=e.length;a>n;n++)r=e[n],t(r)&&i.push(r);return i}LAY.$filterUtils={eq:function(e,r,i){return t(function(t){return t[r]===i},e)},neq:function(e,r,i){return t(function(t){return t[r]!==i},e)},gt:function(e,r,i){return t(function(t){return t[r]>i},e)},gte:function(e,r,i){return t(function(t){return t[r]>=i},e)},lt:function(e,r,i){return t(function(t){return t[r]<i},e)},lte:function(e,r,i){return t(function(t){return t[r]<=i},e)},regex:function(e,r,i){return t(function(t){return i.test(t[r])},e)},contains:function(e,r,i){return t(function(t){return-1!==t[r].indexOf(i)},e)},within:function(e,r,i){return t(function(t){return-1!==i.indexOf(t[r])},e)},fn:function(e,r){return t(r,e)}}}(),function(){"use strict";var t=/^([a-zA-Z]+)(\d+)/;LAY.$findMultipleTypePropMatchDetails=function(e){return e.match(t)}}(),function(){"use strict";LAY.$findRenderCall=function(t,e){var r,i;if(e.isHelper)return"";if(LAY.$checkIsValidUtils.propAttr(t)&&-1===["centerX","right","centerY","bottom"].indexOf(t)&&!LAY.$shorthandPropsUtils.checkIsDecentralizedShorthandProp(t)){if(i=LAY.$findMultipleTypePropMatchDetails(t))return i[1];if(r=LAY.$shorthandPropsUtils.getShorthandPropCenteralized(t),void 0!==r)return!e.isGpu||"x"!==r&&"y"!==r&&"transform"!==r?r:"positionAndTransform";if(!t.startsWith("text")||e.part&&"none"!==e.part.type)return t}}}(),function(){"use strict";function t(t,e,r){for(var i=0,n=r.length;n>i;i++)e=t(r[i],e);return e}LAY.$foldlUtils={min:function(e,r){return t(function(t,e){var i=t[r];return void 0===e||e>i?i:e},void 0,e)},max:function(e,r){return t(function(t,e){var i=t[r];return void 0===e||i>e?i:e},void 0,e)},sum:function(e,r){return t(function(t,e){return e+t[r]},0,e)},fn:function(e,r,i){return t(r,i,e)}}}(),function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}var e=function(){var e=function(e){var r=function(t){return new Array(t)};switch(!0){case/^#\{(\w+)\}*$/.test(e):this.formatter=function(t,e){return t.replace("#{"+RegExp.$1+"}",e[RegExp.$1])};break;case/^([ds])$/.test(e):this.formatter=function(r,i){if("d"===RegExp.$1&&!t(i))throw new TypeError;return r.replace("%"+e,i)};break;case/^(o)$/.test(e):this.formatter=function(r,i){if(!t(i))throw new TypeError;return r.replace("%"+e,parseInt(i).toString(8))};break;case/^(b)$/.test(e):this.formatter=function(r,i){if(!t(i))throw new TypeError;return r.replace("%"+e,parseInt(i).toString(2))};break;case/^([xX])$/.test(e):this.formatter=function(r,i){if(!t(i))throw new TypeError;var n=parseInt(i).toString(16);return"X"===e&&(n=n.toUpperCase()),r.replace("%"+e,n)};break;case/^(c)$/.test(e):this.formatter=function(r,i){if(!t(i))throw new TypeError;return r.replace("%"+e,String.fromCharCode(i))};break;case/^(u)$/.test(e):this.formatter=function(r,i){if(!t(i))throw new TypeError;return r.replace("%"+e,parseInt(i,10)>>>0)};break;case/^(-?)(\d*).?(\d?)(e)$/.test(e):this.formatter=function(i,n){if(!t(n))throw new TypeError;var a,o,l,s="-"===RegExp.$1,c=RegExp.$2,h=""!==RegExp.$3?RegExp.$3:void 0,u=n.toExponential(h);return""!==c&&(void 0!==h?(l=c-u.length,l>=0&&(u=s?u+r(l+1).join(" "):r(l+1).join(" ")+u)):(a=u.split("e")[0],o="e"+u.split("e")[1],l=c-(a.length+o.length),u=l>=0?a+r(l+1).join("0")+o:a.slice(0,l)+o)),i.replace("%"+e,u)};break;case/^(-?)(\d*).?(\d?)(f)$/.test(e):this.formatter=function(i,n){if(!t(n))throw new TypeError;var a,o,l="-"===RegExp.$1,s=RegExp.$2,c=RegExp.$3,h=".".length,u=n>0?Math.floor(n):Math.ceil(n),d=parseFloat(n).toFixed(""!==c?c:6);return""!==s&&(""!==c?(a=u.toString().length+h+parseInt(c,10),o=s-a,d=l?parseFloat(n).toFixed(c)+r(o+1).join(" "):r(o+1).join(" ")+parseFloat(n).toFixed(c)):d=parseFloat(n).toFixed(s-(u.toString().length+h))),i.replace("%"+e,d)};break;case/^([0\-]?)(\d+)d$/.test(e):this.formatter=function(i,n){if(!t(n))throw new TypeError;var a=RegExp.$2-n.toString().length,o="";switch(0>a&&(a=0),RegExp.$1){case"":o=(r(a+1).join(" ")+n).slice(-RegExp.$2);break;case"-":o=(n+r(a+1).join(" ")).slice(-RegExp.$2);break;case"0":o=(r(a+1).join("0")+n).slice(-RegExp.$2)}return i.replace("%"+e,o)};break;case/^(-?)(\d)s$/.test(e):this.formatter=function(t,i){var n=RegExp.$2-i.toString().length,a="";switch(0>n&&(n=0),RegExp.$1){case"":a=(r(n+1).join(" ")+i).slice(-RegExp.$2);break;case"-":a=(i+r(n+1).join(" ")).slice(-RegExp.$2)}return t.replace("%"+e,a)};break;case/^(-?\d?)\.(\d)s$/.test(e):this.formatter=function(t,i){var n,a,o="";return""===RegExp.$1?o=i.slice(0,RegExp.$2):(i=i.slice(0,RegExp.$2),n=Math.abs(RegExp.$1),a=n-i.toString().length,o=-1!==RegExp.$1.indexOf("-")?(i+r(a+1).join(" ")).slice(-n):(r(a+1).join(" ")+i).slice(-n)),t.replace("%"+e,o)};break;default:this.formatter=function(t,e){return t}}};return e.prototype={format:function(t,e){return this.formatter.call(this,t,e)}},e}();LAY.$format=function(){var t,r,i,n=arguments.length,a=Array.prototype.slice.call(arguments);try{for(r=a[0],t=1;n>t;t++)i=a[t],r.match(/%([.#0-9\-]*[bcdefosuxX])/)&&(i=i instanceof LAY.Color?i.stringify():i,r=new e(RegExp.$1).format(r,i));return r}catch(o){return""}}}(),function(){"use strict";LAY.$formation2fargs={onebelow:{gap:0},totheright:{gap:0},grid:{columns:null,hgap:0,vgap:0},none:{},circular:{radius:null}}}(),function(){"use strict";LAY.$formation2fn={none:function(t,e,r,i){return[void 0,void 0]},onebelow:function(t,e,r,i){return[void 0,0===i.gap?LAY.take(r[t-2].path(),"bottom"):LAY.take(r[t-2].path(),"bottom").add(i.gap)]},totheright:function(t,e,r,i){return[0===i.gap?LAY.take(r[t-2].path(),"right"):LAY.take(r[t-2].path(),"right").add(i.gap),void 0]},grid:function(t,e,r,i){var n,a,o=i.columns,l=i.vgap,s=i.hgap;return n=t>o&&(t%o===1||1===o)?LAY.take(r[0].path(),"left"):LAY.take(r[t-2].path(),"right").add(s),a=o>=t?void 0:LAY.take(r[t-o-1].path(),"bottom").add(l),[n,a]},circular:function(t,e,r,i){var n=(t-1)*(360/r.length)-90,a=r[0].path(),o=LAY.take(a,"centerX"),l=LAY.take(a,"centerY").add(i.radius),s=Math.PI/180,c=i.radius*Math.cos(n*s),h=i.radius*Math.sin(n*s);return[o.add(c).minus(LAY.take("","width").half()),l.add(h).minus(LAY.take("","height").half())]}}}(),function(){"use strict";LAY.$generateColorMix=function(t,e,r){var i=t.getRgba(),n=e.getRgba();return new LAY.Color("rgb",{r:Math.round(i.r+r*(n.r-i.r)),g:Math.round(i.g+r*(n.g-i.g)),b:Math.round(i.b+r*(n.b-i.b))},i.a+r*(n.a-i.a))}}(),function(){"use strict";var t={userSelect:"auto",cursor:"auto",textSize:15,textFamily:"sans-serif",textWeight:"normal",textColor:LAY.color("black"),textVariant:"normal",textTransform:"none",textStyle:"normal",textLetterSpacing:0,textWordSpacing:0,textAlign:"left",textDirection:"ltr",textLineHeight:1.3,textIndent:0,textWrap:"nowrap",textWordBreak:"normal",textWordWrap:"normal",textSmoothing:"antialiased",textRendering:"auto"},e={userSelect:LAY.take("../","userSelect"),cursor:LAY.take("../","cursor"),textSize:LAY.take("../","textSize"),textFamily:LAY.take("../","textFamily"),textWeight:LAY.take("../","textWeight"),textColor:LAY.take("../","textColor"),textVariant:LAY.take("../","textVariant"),textTransform:LAY.take("../","textTransform"),textStyle:LAY.take("../","textStyle"),textLetterSpacing:LAY.take("../","textLetterSpacing"),textWordSpacing:LAY.take("../","textWordSpacing"),textAlign:LAY.take("../","textAlign"),textDirection:LAY.take("../","textDirection"),textLineHeight:LAY.take("../","textLineHeight"),textIndent:LAY.take("../","textIndent"),textWrap:LAY.take("../","textWrap"),textWordBreak:LAY.take("../","textWordBreak"),textWordWrap:LAY.take("../","textWordWrap"),textSmoothing:LAY.take("../","textSmoothing"),textRendering:LAY.take("../","textRendering")},r={display:!0,visible:!0,z:0,shiftX:0,shiftY:0,rotateX:0,rotateY:0,rotateZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,originX:.5,originY:.5,originZ:0,perspective:0,perspectiveOriginX:.5,perspectiveOriginY:.5,backfaceVisibility:!1,opacity:1,zIndex:"auto",overflowX:"hidden",overflowY:"hidden",scrollX:0,scrollY:0,focus:!1,scrollElastic:!0,title:null,backgroundColor:LAY.transparent(),backgroundImage:"none",backgroundAttachment:"scroll",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,backgroundSizeX:"auto",backgroundSizeY:"auto",cornerRadiusTopLeft:0,cornerRadiusTopRight:0,cornerRadiusBottomLeft:0,cornerRadiusBottomRight:0,borderTopStyle:"solid",borderBottomStyle:"solid",borderRightStyle:"solid",borderLeftStyle:"solid",borderTopWidth:0,borderBottomWidth:0,borderRightWidth:0,borderLeftWidth:0,borderTopColor:LAY.transparent(),borderBottomColor:LAY.transparent(),borderRightColor:LAY.transparent(),borderLeftColor:LAY.transparent(),text:"",textOverflow:"clip",textDecoration:"none",textPaddingTop:0,textPaddingRight:0,textPaddingBottom:0,textPaddingLeft:0,input:"",inputLabel:"",inputPlaceholder:"",inputAutocomplete:!1,inputAutocorrect:!0,inputDisabled:!1,imageUrl:null,imageAlt:null,videoAutoplay:!1,videoControls:!0,videoCrossorigin:"anonymous",videoLoop:!1,videoMuted:!1,videoPreload:"auto",videoPoster:null,audioControls:!0,audioLoop:!1,audioMuted:!1,audioPreload:"auto",audioVolume:1};LAY.$getLazyPropVal=function(i,n){var a=r[i];return void 0!==a?a:n?t[i]:e[i]}}(),function(){"use strict";function t(t,e,r,i){var n,a,o,l=e[i],s=t[r];if(void 0!==l&&(void 0===s&&(s=t[r]={}),s.type=l.type||s.type,s.duration=l.duration||s.duration,s.delay=l.delay||s.delay,s.done=l.done||s.done,n=l.args,a=s.args,void 0!==n)){void 0===a&&(a=s.args={});for(o in n)a[o]=n[o]}}function e(t){return"object"==typeof t}function r(t,r,i,n){var a,o,l,s;a=r[i],o=t[i],void 0===o&&(o=t[i]={});for(l in a)s=a[l],o[l]=n&&e(s)?LAY.$clone(s):s}LAY.$inherit=function(t,e,r,n,a){if(r)a||(t.onlyif=e.onlyif||t.onlyif,t.install=e.install||t.install,t.uninstall=e.uninstall||t.uninstall),n?(t.formation=e.formation||t.formation,t.filter=e.filter||t.filter,i.fargs(t,e),t.sort=e.sort||t.sort):(void 0!==e.props&&i.props(t,e),void 0!==e.when&&i.when(t,e),void 0!==e.transition&&i.transition(t,e),void 0!==e.$$max&&i.$$max(t,e));else for(var o in e)e[o]&&(i[o]?i[o](t,e,n):t[o]=e[o])};var i={data:function(t,e){r(t,e,"data")},props:function(t,e){r(t,e,"props")},transition:function(e,r){var i,n,a=r.transition,o=e.transition,l={};if(void 0===o&&(o=e.transition={}),a.all)for(n in o)"all"!==o&&t(o,a,n,"all");for(i in a)t(o,a,i,i);if(o.all)for(n in o)"all"!==n&&(l[n]={},t(l,o,n,"all"),t(l,o,n,n),o[n]=l[n])},many:function(t,e){void 0===t.many&&(t.many={}),LAY.$inherit(t.many,e.many,!1,!0,!1)},rows:function(t,r){var i,n=t.rows,a=r.rows;if(a)if(a instanceof LAY.Take)t.rows=a;else{t.rows=new Array(a.length),n=t.rows;for(var o=0,l=a.length;l>o;o++)i=a[o],n[o]=e(i)?LAY.$clone(i):i}},fargs:function(t,e){var i,n=t.fargs,a=e.fargs;if(a){n||(n=t.fargs={});for(i in a)n[i]||(n[i]={}),r(n,a,i)}},children:function(t,e){var r,i;r=e.children,i=t.children,void 0===i&&(i=t.children={});for(var n in r)void 0===i[n]&&(i[n]={}),LAY.$inherit(i[n],r[n],!1,!1,!1)},states:function(t,e,r){var i=e.states,n=t.states;void 0===n&&(n=t.states={});for(var a in i)n[a]||(n[a]={}),LAY.$inherit(n[a],i[a],!0,r,!1)},when:function(t,e){var r,i,n,a=e.when,o=t.when;void 0===o&&(o=t.when={});for(n in a)r=a[n],i=o[n],void 0===i?o[n]=LAY.$arrayUtils.cloneSingleLevel(r):o[n]=i.concat(r),LAY.$meta.set(t,"num","when."+n,o[n].length)},$$max:function(t,e){LAY.$meta.inherit.$$max(t,e)}}}(),function(){"use strict";LAY.$inheritablePropS=["textSize","textFamily","textWeight","textColor","textVariant","textTransform","textStyle","textLetterSpacing","textWordSpacing","textAlign","textDirection","textLineHeight","textIndent","textWrap","textWordBreak","textWordWrap","textSmoothing","textRendering","cursor","userSelect"]}(),function(){"use strict";LAY.$meta={set:function(t,e,r,i){var n="$$"+e;void 0===t[n]&&(t[n]={}),t[n][r]=i},get:function(t,e,r){var i="$$"+e;return void 0===t[i]?void 0:t[i][r]},inherit:{$$max:function(t,e){var r,i=e.$$max,n=t.$$max;void 0===n&&(n=t.$$max={});for(r in i)void 0===n[r]?n[r]=i[r]:n[r]=Math.max(n[r],i[r])}}}}(),function(){"use strict";function t(t,i){var n;if(!t.$$normalized){if(t.states||(t.states={}),t.states.root)throw"LAY Error: State name 'root' is reserved.";e(t),r(t),t.states.root={props:t.props,when:t.when,transition:t.transition};for(n in t)if(("children"!==n||i)&&t[n]&&"$$max"!==n){if(!f[n])throw"LAY Error: LSON key: '"+n+"' not found";f[n](t)}t.props=void 0,t.when=void 0,t.transition=void 0,t.$$normalized=!0}}function e(t){var e="";if(t.inherits||t.$inherits)throw"LAY Error: Did you mean '$inherit'?";if(t.load?e="load":t.inherit?e="inherit":t.gpu?e="gpu":t.obdurate?e="obdurate":t.type&&(e="type"),e)throw"LAY Error: prefix readonly '"+e+"' with '$'"}function r(t){t.children=t.children||{};for(var e in t)f[e]||(t.children[e]=t[e],t[e]=void 0)}function i(t,e){if(e instanceof LAY.Take)throw"LAY Error: takes for special/expander props such as '"+t+"' are not permitted."}function n(t,e,r,a){var o,l,s;if(o=e[r],l=LAY.$type(o),"array"===l&&"input"!==r){for(var c=0,h=o.length;h>c;c++)s=a+(c+1),n(t,o,c,s);e[r]=void 0}else if("object"===l)for(var u in o)s=a+LAY.$capitalize(u),n(t,o,u,s),e[r]=void 0;else LAY.$checkIsValidUtils.checkIsPropAttrExpandable(a)&&i(a,o),t[a]=o}var a,o,l,s,c,h,u,d,f,p=[];a=function(t,e,r){return r/2+(t-e/2)},o=function(t,e,r){return r-(t+e)},l=new LAY.Take("","width"),s=new LAY.Take("","height"),c=new LAY.take("../","width"),h=new LAY.take("../","height"),u=new LAY.take("../","width").half().minus(new LAY.take("","width").half()),d=new LAY.take("../","height").half().minus(new LAY.take("","height").half()),LAY.$normalize=function(e,r){r?-1===p.indexOf(e)&&(t(e,!0),p.push(e)):t(e,!1)},f={$type:function(t){i("$type",t.$type)},$inherit:function(t){t.$inherit instanceof Array||(t.$inherit=[t.$inherit]),i("$inherit",t.$inherit),void 0!==t.$inherit&&"array"!==LAY.$type(t.$inherit)&&(t.$inherit=[t.$inherit])},$obdurate:function(t){i("$obdurate",t.$obdurate)},$load:function(t){i("$load",t.$load)},$gpu:function(t){i("$gpu",t.$gpu)},data:function(t){i("data",t.data)},exist:function(t){},props:function(t){var e,r,f,p,v,A,g,L,y=t.props;void 0===t.props&&(y=t.props={}),i("props",t.props),void 0!==y.centerX&&(0===y.centerX?y.left=u:y.left=new LAY.Take(a).fn(y.centerX,l,c),y.centerX=void 0),void 0!==y.right&&(y.left=new LAY.Take(o).fn(y.right,l,c),y.right=void 0),void 0!==y.centerY&&(0===y.centerY?y.top=d:y.top=new LAY.Take(a).fn(y.centerY,s,h),y.centerY=void 0),void 0!==y.bottom&&(y.top=new LAY.Take(o).fn(y.bottom,s,h),y.bottom=void 0);for(e in y)n(y,y,e,e);for(e in y)if(r=LAY.$shorthandPropsUtils.getLonghandPropsDecenteralized(e),void 0!==r)for(p=y[e],g=0,L=r.length;L>g;g++)f=r[g],y[f]=y[f]||p;for(e in y){if(-1!==e.lastIndexOf("Color")&&"string"==typeof y[e])throw"LAY Error: '"+e+"' must be LAY.color()/LAY.rgb()/LAY.rgba()/LAY.hsl()/LAY.hsla()";v=LAY.$findMultipleTypePropMatchDetails(e),null!==v&&(A=LAY.$meta.get(t,"max",v[1]),(void 0===A||A<parseInt(v[2]))&&LAY.$meta.set(t,"max",v[1],parseInt(v[2])))}},when:function(t){if(void 0===t.when)t.when={};else{i("when",t.when);var e,r,n=t.when;for(e in n)r=n[e],r instanceof Array||(r=n[e]=[r]),i("when."+e,r)}},transition:function(t){if(void 0===t.transition)t.transition={};else{var e,r,n,a=t.transition;if(void 0!==a){i("transition",t.transition),void 0!==a.centerX&&(a.left=a.centerX),void 0!==a.right&&(a.left=a.right),void 0!==a.centerY&&(a.top=a.centerY),void 0!==a.bottom&&(a.top=a.bottom);for(e in a){if(LAY.$checkIsValidUtils.checkIsPropAttrExpandable(e))throw"LAY Error: transitions for special/expander props such as '"+name+"' are not permitted.";r=a[e],i("transition."+e,r),n=r.args,void 0!==n&&i("transition."+e+".args",n)}}}},states:function(t,e){if(void 0!==t.states){var r,n=t.states;i("states",n);for(var a in n){if(!LAY.$checkIsValidUtils.stateName(a))throw"LAY Error: Invalid state name: "+a;r=n[a],i("states."+a,r),e?(f.fargs(r),f.sort(r)):(f.props(r),f.when(r),f.transition(r))}}},children:function(e){if(void 0!==e.children){var r=e.children;i("children",r);for(var n in r)t(r[n],!0)}},many:function(t){if(void 0!==t.many){var e=t.many;i("many",e),e.states||(e.states={}),e.states.root={formation:e.formation,sort:e.sort,filter:e.filter,fargs:e.fargs},e.formation=void 0,e.sort=void 0,e.filter=void 0,e.fargs=void 0,f.states(e,!0)}},fargs:function(t){if(t.fargs){var e,r=t.fargs;i("fargs",r);for(e in r)i("fargs."+e,r[e])}},sort:function(t){if(t.sort){var e,r,n=t.sort;for(i("sort",n),e=0,r=n.length;r>e;e++)i("sort."+e,n[e]),void 0===n[e].ascending&&(n[e].ascending=!0)}}}}(),function(){"use strict";void 0===Function.prototype.bind&&(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),r=this,i=function(){},n=function(){return r.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,n.prototype=new i,n})}(),function(){"use strict";void 0===window.console&&(window.console={error:function(){},log:function(){},info:function(){}})}(),function(){"use strict";if(void 0===window.performance&&(window.performance={}),void 0===window.performance.now){void 0===Date.now&&(Date.now=function(){return(new Date).getTime()});var t=Date.now();void 0!==performance.timing&&void 0!==performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-t}}}(),/*
http://paulirish.com/2011/requestanimationframe-for-smart-animating/
http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
requestAnimationFrame polyfill by Erik Mller. fixes from Paul Irish and Tino Zijdel
MIT license*/
function(){"use strict";for(var t=0,e=["ms","moz","webkit","o"],r=0;r<e.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[e[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[r]+"CancelAnimationFrame"]||window[e[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,r){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),a=window.setTimeout(function(){e(i+n)},n);return t=i+n,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(){"use strict";void 0===String.prototype.startWith&&(String.prototype.startsWith=function(t){return 0===this.indexOf(t)})}(),function(){"use strict";function t(){var t,r,i,n,a,o,l,s,c,h,u,d,f,p,v=performance.now(),A=v-LAY.$prevTimeFrame,g=(LAY.$isDataTravelling,LAY.$dataTravelDelta),L=LAY.$renderDirtyPartS,y=[],Y=!0;for(LAY.$isRendering=!0,t=0;t<L.length;t++){for(a=L[t],o=a.travelRenderDirtyAttrValS,s=a.normalRenderDirtyAttrValS,u=[],r=0;r<o.length;r++)l=o[r],l.isTransitionable&&(e(l,g),LAY.$arrayUtils.pushUnique(u,l.renderCall));for(r=0;r<s.length;r++)c=s[r],d=!0,void 0!==c.calcVal&&LAY.$arrayUtils.pushUnique(u,c.renderCall),h=c.transition,void 0!==h&&(h.delay&&h.delay>0?(h.delay-=A,d=!1):h.checkIsComplete()?(void 0!==h.done&&h.done.call(a.level),c.transition=void 0):(Y=!1,d=!1,e(c,h.generateNext(A)))),d&&(c.transitionCalcVal=c.calcVal,LAY.$arrayUtils.removeAtIndex(s,r),r--);for(LAY.$arrayUtils.remove(u,"scrollX")&&u.push("scrollX"),LAY.$arrayUtils.remove(u,"scrollY")&&u.push("scrollY"),i=0,n=u.length;n>i;i++){var b=a["renderFn_"+u[i]];if(!b)throw"LAY Error: Inexistent prop: '"+u[i]+"'";a["renderFn_"+u[i]]()}0===s.length&&0===o.length&&(LAY.$arrayUtils.removeAtIndex(LAY.$renderDirtyPartS,t),t--),a.isInitiallyRendered||-1!==LAY.$renderDirtyPartS.indexOf(a)||LAY.$arrayUtils.pushUnique(y,a.level)}for(i=0,n=y.length;n>i;i++)f=y[i],f.part.isInitiallyRendered=!0,p=f.lson.$load,p&&p.call(f);LAY.$isRendering=!1,LAY.$isSolveRequiredOnRenderFinish?(LAY.$isSolveRequiredOnRenderFinish=!1,LAY.$solve()):Y||LAY.$render(v)}function e(t,e){t.calcVal instanceof LAY.Color?t.transitionCalcVal=LAY.$generateColorMix(t.startCalcVal,t.calcVal,e):t.transitionCalcVal=t.startCalcVal+e*(t.calcVal-t.startCalcVal)}LAY.$render=function(e){(0!==LAY.$renderDirtyPartS.length||LAY.isDataTravelling)&&(e?(LAY.$prevTimeFrame=e,window.requestAnimationFrame(t)):(LAY.$prevTimeFrame=performance.now()-16.7,t()))}}(),function(){"use strict";var t,e,r;t={transform:["z","scaleX","scaleY","scaleZ","rotateX","rotateY","rotateZ","skewX","skewY"],x:["left","shiftX"],y:["top","shiftY"],origin:["originX","originY","originZ"],overflow:["overflowX","overflowY"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],backgroundSize:["backgroundSizeX","backgroundSizeY"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],textPadding:["textPaddingTop","textPaddingRight","textPaddingBottom","textPaddingLeft"],cornerRadius:["cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomRight","cornerRadiusBottomLeft"]},r=["transform","x","y","origin","backgroundPosition","backgroundSize"],e=function(){var e,r=[];for(e in t)r=r.concat(t[e]);return r}(),LAY.$shorthandPropsUtils={getLonghandProps:function(e){return t[e]},getLonghandPropsDecenteralized:function(e){return-1===r.indexOf(e)?t[e]:void 0},getShorthandProp:function(r){var i;if(-1!==e.indexOf(r))for(i in t)if(-1!==t[i].indexOf(r))return i},getShorthandPropCenteralized:function(t){var e=LAY.$shorthandPropsUtils.getShorthandProp(t);return void 0!==e&&-1!==r.indexOf(e)?e:void 0},checkIsDecentralizedShorthandProp:function(e){return void 0!==t[e]&&-1===r.indexOf(e)}}}(),function(){"use strict";function t(){for(var t=LAY.$relayoutDirtyManyS,e=0,r=t.length;r>e;e++)t[e].relayout();LAY.$relayoutDirtyManyS=[]}function e(){var t,e,r=LAY.$naturalWidthDirtyPartS,i=LAY.$naturalHeightDirtyPartS;for(t=r.length-1;t>=0;t--)e=r[t].level.attr2attrVal.$naturalWidth,e&&e.requestRecalculation();for(t=i.length-1;t>=0;t--)e=i[t].level.attr2attrVal.$naturalHeight,e&&e.requestRecalculation();LAY.$naturalWidthDirtyPartS=[],LAY.$naturalHeightDirtyPartS=[]}function r(){for(var t,e,r=LAY.$newManyS,i=0,n=r.length;n>i;i++)t=r[i],t.isLoaded=!0,e=t.level.lson.$load,e&&e.call(t.level);LAY.$newManyS=[]}function i(){var t,e,r,i,n,a,o,l,s,c,h=LAY.$newlyInstalledStateLevelS,u=LAY.$newlyUninstalledStateLevelS;for(t=0,r=h.length;r>t;t++){for(n=h[t],a=n.newlyInstalledStateS,e=0,i=a.length;i>e;e++)o=n.attr2attrVal[a[e]+".install"],o&&"function"===LAY.$type(o.calcVal)&&o.calcVal.call(n);n.newlyInstalledStateS=[]}for(LAY.$newlyInstalledStateLevelS=[],t=0,r=u.length;r>t;t++){for(l=u[t],s=l.newlyUninstalledStateS,e=0,i=s.length;i>e;e++)c=l.attr2attrVal[s[e]+".uninstall"],c&&"function"===LAY.$type(c.calcVal)&&c.calcVal.call(l);l.newlyUninstalledStateS=[]}LAY.$newlyUninstalledStateLevelS=[]}LAY.$solve=function(){if(LAY.$isRendering)LAY.$isSolveRequiredOnRenderFinish=!0;else if(!LAY.$isSolving&&0===LAY.$numClog){var n,a,o,l,s=!1;LAY.$isSolving=!0;do if(l=!1,a=!1,o=!1,n=LAY.$solveForNew(),2>n&&(l=!0),n=LAY.$solveForRecalculation(),2>n&&(l=!0),o=0===LAY.$recalculateDirtyAttrValS.length,a=0===LAY.$newLevelS.length,l)s=!1;else{if(s)break;s=!0}while(!a||!o);if(!a||!o){var c="LAY Error: Circular/Undefined Reference Encountered [";if(a){var h=LAY.$recalculateDirtyAttrValS[0];c+="Uninstantiable Attr: "+h.attr+" (Level: "+h.level.pathName+")"}else c+="Uninheritable Level: "+LAY.$newLevelS[0].pathName;throw c+="]"}t(),e(),r(),i(),LAY.$isSolving=!1,LAY.$recalculateDirtyAttrValS.length?LAY.$solve():LAY.$render()}}}(),function(){"use strict";LAY.$solveForNew=function(){var t,e,r,i,n=!1,a=LAY.$newLevelS,o=[];if(!a.length)return 3;do for(r=!1,t=0;t<a.length;t++)i=a[t],i.$normalizeAndInherit()&&(i.$identify(),r=!0,n=!0,o.push(i),LAY.$arrayUtils.removeAtIndex(a,t),t--);while(0!==a.length&&r);for(t=0,e=o.length;e>t;t++)o[t].$decideExistence();return 0===a.length?0:n?1:2}}(),function(){"use strict";LAY.$solveForRecalculation=function(){var t,e,r,i=!1,n=LAY.$recalculateDirtyAttrValS;if(!n.length)return 3;do for(e=!1,t=0;t<n.length;t++)r=n[t].recalculate(),r&&(e=!0,i=!0,LAY.$arrayUtils.removeAtIndex(n,t),t--);while(0!==n.length&&e);return 0===n.length?0:i?1:2}}(),function(){"use strict";function t(t){return-t.tension*t.x-t.friction*t.v}function e(e){var r;return r={},r.dx=e.v,r.dv=t(e),r}function r(e,r,i){var n,a;return a={},a.x=e.x+i.dx*r,a.v=e.v+i.dv*r,a.tension=e.tension,a.friction=e.friction,n={},n.dx=a.v,n.dv=t(a),n}function i(t,i){var n,a,o,l,s,c;return n=e(t),a=r(t,.5*i,n),o=r(t,.5*i,a),l=r(t,i,o),c=1/6*(n.dx+2*(a.dx+o.dx)+l.dx),s=1/6*(n.dv+2*(a.dv+o.dv)+l.dv),t.x=t.x+c*i,t.v=t.v+s*i,t}LAY.$springTransition=function(t,e){this.curTime=0,this.value=0,this.friction=parseFloat(e.friction),this.tension=parseFloat(e.tension),this.velocity=parseFloat(e.velocity||0),this.threshold=parseFloat(e.threshold||.001),this.isComplete=!1},LAY.$springTransition.prototype.generateNext=function(t){var e,r,n,a,o,l,s;return t/=1e3,this.curTime+=t,s={},l={},s.x=this.value-1,s.v=this.velocity,s.tension=this.tension,s.friction=this.friction,l=i(s,t),this.value=1+l.x,e=l.v,n=l.x,r=l.v,a=Math.abs(n)<this.threshold,o=Math.abs(r)<this.threshold,this.isComplete=a&&o,this.velocity=e,this.value},LAY.$springTransition.prototype.checkIsComplete=function(){return this.isComplete}}(),function(){"use strict";LAY.$transitionType2args={linear:[],"cubic-bezier":["a","b","c","d"],spring:["velocity","tension","friction","threshold"]}}(),function(){"use strict";var t={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error"};LAY.$type=function(e){return null===e?e+"":e instanceof LAY.Color?"color":e instanceof LAY.Take?"take":e instanceof LAY.Level?"level":"object"==typeof e||"function"==typeof e?t[Object.prototype.toString.call(e)]||"object":typeof e}}();